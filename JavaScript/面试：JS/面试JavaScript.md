# ç‰›å®¢

## 1. æ•°æ®ç±»å‹

1. æ•°æ®ç±»å‹ï¼ˆäº†è§£symbolå’Œbigintå—ï¼‰
2. åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹çš„åŒºåˆ«
3. åˆ¤æ–­æ•°æ®ç±»å‹æ–¹æ³•
4. JSåŸºæœ¬æ•°æ®ç±»å‹å¼•ç”¨æ•°æ®ç±»å‹åˆ†åˆ«æœ‰å“ªäº›ï¼Ÿ
5. åŸºæœ¬æ•°æ®ç±»å‹ä¹‹é—´çš„è½¬æ¢
6. typeofçš„ä½¿ç”¨ å’Œ instanceofçš„åŒºåˆ«
7. nullå’Œundefinedçš„åŒºåˆ«
8. æ ˆå’Œå †

## 2. BOMã€DOM

1. å¦‚ä½•é¿å… js é˜»æ­¢ DOM æ ‘æ¸²æŸ“ï¼Ÿ
2. JSä¸­æ•°æ®ç»å¸¸ä¸å‡†ç¡®ï¼Œæ¯”å¦‚ï¼šä¸ºä»€ä¹ˆ0.1+0.2 ! == 0.3ï¼Œå¦‚ä½•è®©å…¶ç›¸ç­‰ï¼Ÿ[ç­”æ¡ˆ](https://www.nowcoder.com/discuss/726027?channel=-1&source_id=profile_follow_post_nctrack)
3. DOMæ ‘ä¸Šæœ‰10ä¸ªèŠ‚ç‚¹ï¼Œæ¸²æŸ“æ ‘ä¸Šä¸€å®šæœ‰10ä¸ªèŠ‚ç‚¹å—ï¼Ÿ



1. new æ“ä½œç¬¦å¹²äº†ä»€ä¹ˆäº‹ï¼Ÿ
2. å£°æ˜å˜é‡çš„æ–¹å¼ const var let çš„åŒºåˆ«
3. const å£°æ˜ç”Ÿæˆå¯¹è±¡çš„æ—¶å€™ï¼Œå¦‚ä½•ä½¿å…¶ä¸å¯æ›´æ”¹
4. é˜²æŠ–å’ŒèŠ‚æµ

# æ•´ç†

## 1.æ•°æ®ç±»å‹

![1654396167299](JsImg/1654396167299.png)

### **ğŸ¦ˆé—®é¢˜1ï¼šæ•°æ®ç±»å‹åˆ†ç±»**

åˆ†ä¸ºä¸¤å¤§ç±»ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹ã€‚

åŸºæœ¬ç±»å‹ï¼šNumber Boolean  String  undefined null ï¼ˆES6æ–°å¢äº†ï¼‰Symbol BigInt

ï¼ˆå¯¹è±¡ï¼‰å¼•ç”¨ç±»å‹ï¼šObject  Function Array

ES6æ–°å¢æ•°æ®ç±»å‹Symbol BigInt

- Symbol ä»£è¡¨åˆ›å»ºåç‹¬ä¸€æ— äºŒä¸”ä¸å¯å˜çš„æ•°æ®ç±»å‹ï¼Œå®ƒä¸»è¦æ˜¯ä¸ºäº†è§£å†³å¯èƒ½å‡ºç°çš„å…¨å±€å˜é‡å†²çªçš„é—®é¢˜ã€‚---symbolç±»å‹ï¼šä¸å¯ç”¨ä½œæ„é€ å‡½æ•°ä¸newä¸€èµ·ä½¿ç”¨ï¼›ï¼ˆè¯´è¯´ä½ å¯¹Symbolçš„ç†è§£ï¼Ÿä¸»è¦ç”¨äºå®šä¹‰å¯¹è±¡çš„å±æ€§ï¼Œé¿å…å±æ€§å†²çªï¼‰ã€‚
- BigInt æ˜¯ä¸€ç§æ•°å­—ç±»å‹çš„æ•°æ®ï¼Œå®ƒå¯ä»¥è¡¨ç¤ºä»»æ„ç²¾åº¦æ ¼å¼çš„æ•´æ•°ï¼Œä½¿ç”¨ BigInt å¯ä»¥å®‰å…¨åœ°å­˜å‚¨å’Œæ“ä½œå¤§æ•´æ•°ï¼Œå³ä½¿è¿™ä¸ªæ•°å·²ç»è¶…å‡ºäº† Number èƒ½å¤Ÿè¡¨ç¤ºçš„å®‰å…¨æ•´æ•°èŒƒå›´ã€‚ï¼ˆè¯´è¯´å¯¹BigIntçš„ç†è§£ï¼Ÿï¼‰

### **ğŸ¦ˆé—®é¢˜2ï¼šåŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„åŒºåˆ«ï¼š**

* å­˜æ”¾ä½ç½®ï¼š
  * åŸºæœ¬ç±»å‹çš„æ•°æ®æ˜¯ç›´æ¥å­˜å‚¨åœ¨æ ˆï¼ˆstackï¼‰ä¸­çš„ç®€å•æ•°æ®æ®µï¼Œå æ®ç©ºé—´å°ã€å¤§å°å›ºå®šï¼Œå±äºè¢«é¢‘ç¹ä½¿ç”¨æ•°æ®ï¼Œæ‰€ä»¥æ”¾å…¥æ ˆä¸­å­˜å‚¨ï¼Œ
  * å¼•ç”¨ç±»å‹çš„æ•°æ®æ˜¯å­˜æ”¾åœ¨å †å†…å­˜ä¸­çš„ï¼Œå æ®ç©ºé—´å¤§ã€å¤§å°ä¸å›ºå®šã€‚å¦‚æœå­˜å‚¨åœ¨æ ˆä¸­ï¼Œå°†ä¼šå½±å“ç¨‹åºè¿è¡Œçš„æ€§èƒ½ï¼›å¼•ç”¨æ•°æ®ç±»å‹åœ¨æ ˆä¸­å­˜å‚¨äº†æŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆæŒ‡å‘å †ä¸­è¯¥å®ä½“çš„èµ·å§‹åœ°å€ã€‚å½“è§£é‡Šå™¨å¯»æ‰¾å¼•ç”¨å€¼æ—¶ï¼Œä¼šé¦–å…ˆæ£€ç´¢å…¶åœ¨æ ˆä¸­çš„åœ°å€ï¼Œå–å¾—åœ°å€åä»å †ä¸­è·å¾—å®ä½“ã€‚---åŸºæœ¬ç±»å‹ä¿å­˜çš„å°±æ˜¯è¯¥åŸºæœ¬ç±»å‹æ•°æ®ï¼Œè€Œå¼•ç”¨ç±»å‹ä¿å­˜çš„æ˜¯åœ°å€å€¼ã€‚

* å¤åˆ¶ï¼š

  * åŸºæœ¬ç±»å‹çš„å¤åˆ¶å°±æ˜¯åœ¨æ ˆå†…å­˜ä¸­å¼€è¾Ÿå‡ºäº†ä¸€ä¸ªæ–°çš„å­˜å‚¨åŒºåŸŸç”¨æ¥å­˜å‚¨æ–°çš„å˜é‡ï¼Œè¿™ä¸ªå˜é‡æœ‰å®ƒè‡ªå·±çš„å€¼ï¼Œåªä¸è¿‡å’Œå‰é¢çš„å€¼ä¸€æ ·ï¼Œæ‰€ä»¥å¦‚æœå…¶ä¸­ä¸€ä¸ªçš„å€¼æ”¹å˜ï¼Œåˆ™ä¸ä¼šå½±å“åˆ°å¦ä¸€ä¸ªã€‚
  * å¼•ç”¨ç±»å‹å®šä¹‰ä¸€ä¸ªå¯¹è±¡å…¶å®æ˜¯åœ¨æ ˆå†…å­˜ä¸­å­˜å‚¨äº†ä¸€ä¸ªæŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆæŒ‡å‘å †å†…å­˜ä¸­è¯¥å¯¹è±¡çš„å­˜å‚¨åœ°å€ã€‚å¤åˆ¶ç»™å¦ä¸€ä¸ªå¯¹è±¡çš„è¿‡ç¨‹å…¶å®æ˜¯æŠŠè¯¥å¯¹è±¡çš„åœ°å€å¤åˆ¶ç»™äº†å¦ä¸€ä¸ªå¯¹è±¡å˜é‡ï¼Œä¸¤ä¸ªæŒ‡é’ˆéƒ½æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡å®ä½“ï¼Œæ‰€ä»¥è‹¥å…¶ä¸­ä¸€ä¸ªä¿®æ”¹äº†ï¼Œåˆ™å¦ä¸€ä¸ªä¹Ÿä¼šæ”¹å˜ã€‚

  **æ‰©å±•**

  å †å’Œæ ˆçš„æ¦‚å¿µå­˜åœ¨äºæ•°æ®ç»“æ„å’Œæ“ä½œç³»ç»Ÿå†…å­˜ä¸­ï¼Œåœ¨æ•°æ®ç»“æ„ä¸­ï¼š

  - åœ¨æ•°æ®ç»“æ„ä¸­ï¼Œæ ˆä¸­æ•°æ®çš„å­˜å–æ–¹å¼ä¸ºå…ˆè¿›åå‡ºã€‚
  - å †æ˜¯ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ï¼Œæ˜¯æŒ‰ä¼˜å…ˆçº§æ¥è¿›è¡Œæ’åºçš„ï¼Œä¼˜å…ˆçº§å¯ä»¥æŒ‰ç…§å¤§å°æ¥è§„å®šã€‚

  åœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œå†…å­˜è¢«åˆ†ä¸ºæ ˆåŒºå’Œå †åŒºï¼š

  - æ ˆåŒºå†…å­˜ç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…é‡Šæ”¾ï¼Œå­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼ï¼Œå±€éƒ¨å˜é‡çš„å€¼ç­‰ã€‚å…¶æ“ä½œæ–¹å¼ç±»ä¼¼äºæ•°æ®ç»“æ„ä¸­çš„æ ˆã€‚
  - å †åŒºå†…å­˜ä¸€èˆ¬ç”±å¼€å‘ç€åˆ†é…é‡Šæ”¾ï¼Œè‹¥å¼€å‘è€…ä¸é‡Šæ”¾ï¼Œç¨‹åºç»“æŸæ—¶å¯èƒ½ç”±åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ã€‚

### **ğŸ¦ˆé—®é¢˜3ï¼štypeofçš„ä½¿ç”¨ å’Œ instanceofçš„åŒºåˆ«**

* **typeof**
  `typeof`ç¡®å®šä»»æ„==å˜é‡==çš„æ•°æ®ç±»å‹ï¼›`typeof` æ“ä½œç¬¦è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæœªç»è®¡ç®—çš„æ“ä½œæ•°çš„ç±»å‹ã€‚

  ```js
  typeof 1 // 'number'
  typeof '1' // 'string'
  typeof undefined // 'undefined'
  typeof true // 'boolean'
  typeof Symbol() // 'symbol'
  typeof null // 'object'
  typeof [] // 'object'
  typeof {} // 'object'
  typeof console // 'object'
  typeof console.log // 'function'
  ```

  å‰6ä¸ªéƒ½æ˜¯åŸºç¡€æ•°æ®ç±»å‹ï¼Œä½†æ˜¯`null`è¿”å›'object'ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨`typeof()`å»åˆ¤æ–­nullï¼Œå¯ä»¥é‡‡ç”¨`===null`å»åˆ¤æ–­æ˜¯å¦ä¸ºnullã€‚
  å¼•ç”¨ç±»å‹é‡‡ç”¨`typeof`å»åˆ¤æ–­ï¼Œé™¤äº†`functionå¯ä»¥è¯†åˆ«ï¼Œå…¶ä»–éƒ½ä¼šè¿”å›`object`

  **å…³äºåº•å±‚**

  js åœ¨åº•å±‚å­˜å‚¨å˜é‡çš„æ—¶å€™ï¼Œä¼šåœ¨å˜é‡çš„æœºå™¨ç çš„ä½ä½1-3ä½å­˜å‚¨å…¶ç±»å‹ä¿¡æ¯ğŸ‘‰

  - 000ï¼šå¯¹è±¡
  - 010ï¼šæµ®ç‚¹æ•°
  - 100ï¼šå­—ç¬¦ä¸²
  - 110ï¼šå¸ƒå°”
  - 1ï¼šæ•´æ•°

  but, å¯¹äº `undefined` å’Œ `null` æ¥è¯´ï¼Œè¿™ä¸¤ä¸ªå€¼çš„ä¿¡æ¯å­˜å‚¨æ˜¯æœ‰ç‚¹ç‰¹æ®Šçš„ã€‚

  `null`ï¼šæ‰€æœ‰æœºå™¨ç å‡ä¸º0

  `undefined`ï¼šç”¨ âˆ’2^30 æ•´æ•°æ¥è¡¨ç¤º

  æ‰€ä»¥ï¼Œ`typeof` åœ¨åˆ¤æ–­ `null` çš„æ—¶å€™å°±å‡ºç°é—®é¢˜äº†ï¼Œç”±äº `null` çš„æ‰€æœ‰æœºå™¨ç å‡ä¸º0ï¼Œå› æ­¤ç›´æ¥è¢«å½“åšäº†å¯¹è±¡æ¥çœ‹å¾…ã€‚

* **instanceof**
  `instanceof` è¿ç®—ç¬¦ç”¨äºæ£€æµ‹æ„é€ å‡½æ•°çš„ `prototype` å±æ€§æ˜¯å¦å‡ºç°åœ¨æŸä¸ªå®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ä¸Šã€‚---ï¼ˆ`instanceof`è¿ç®—ç¬¦è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå¯ä»¥ç”¨äºæ£€æµ‹æ„é€ å‡½æ•°çš„ `prototype` å±æ€§æ˜¯å¦å‡ºç°åœ¨æŸä¸ªå®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ä¸Šï¼Œé€šä¿—è¯´å°±æ˜¯ç”¨äºåˆ¤æ–­æŸä¸ªå®ä¾‹æ˜¯å¦å±äºæŸæ„é€ å‡½æ•°ã€‚å†é€šä¿—ä¸€ç‚¹å°±æ˜¯ï¼Œåªè¦å³è¾¹å˜é‡çš„`prototype`åœ¨å·¦è¾¹å˜é‡çš„åŸå‹é“¾ä¸Šå°±è¿”å› trueï¼Œå¦åˆ™è¿”å› falseï¼‰
  ä½¿ç”¨ï¼š

* ```react
  object instanceof constructor
  ```

  æ„é€ å‡½æ•°é€šè¿‡`new`å¯ä»¥å®ä¾‹å¯¹è±¡ï¼Œ`instanceof`åˆ¤æ–­ç”Ÿæˆçš„å®ä¾‹å¯¹è±¡æ˜¯ä¸æ˜¯å³è¾¹çš„æ„é€ å‡½æ•°æ‰€ç”Ÿæˆçš„å®ä¾‹å¯¹è±¡ã€‚

  ```js
  // å®šä¹‰æ„å»ºå‡½æ•°
  let Car = function() {}
  let benz = new Car()
  benz instanceof Car // true
  let car = new String('xxx')
  car instanceof String // true
  let str = 'xxx'
  str instanceof String // false
  ```

  `instanceof`çš„==å®ç°åŸç†==ï¼šğŸ¦ˆå³è¾¹å˜é‡çš„`prototype`æ˜¯å¦åœ¨å·¦è¾¹å˜é‡çš„åŸå‹é“¾ä¸Š

  ```js
  function myInstanceof(left, right) {
    // è¿™é‡Œå…ˆç”¨typeofæ¥åˆ¤æ–­åŸºç¡€æ•°æ®ç±»å‹ï¼Œå¦‚æœæ˜¯ï¼Œç›´æ¥è¿”å›false
    if(typeof left !== 'object' || left === null) return false;
    // getProtypeOfæ˜¯Objectå¯¹è±¡è‡ªå¸¦çš„APIï¼Œèƒ½å¤Ÿæ‹¿åˆ°å‚æ•°çš„åŸå‹å¯¹è±¡
    let proto = Object.getPrototypeOf(left);
    while(true) {                  
      if(proto === null) return false;
      if(proto === right.prototype) return true;//æ‰¾åˆ°ç›¸åŒåŸå‹å¯¹è±¡ï¼Œè¿”å›true
      proto = Object.getPrototypeof(proto);
    }
  }
  ```
  é¡ºç€åŸå‹é“¾å»æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ç›¸åŒçš„åŸå‹å¯¹è±¡ï¼Œè¿”å›`true`ï¼Œå¦åˆ™ä¸º`false`ã€‚

  ğŸ¦ˆè¿™é‡Œå¯èƒ½ä¼šæé—®åŸå‹ç»§æ‰¿çš„åŸç†ï¼Ÿ

  `__proto__`å±æ€§ï¼Œå¯ä»¥è®¿é—®å¯¹è±¡çš„åŸå‹ï¼Œå³p1.__proto__ = Person.prototype

* **åŒºåˆ«**

  * typeofä¼šè¿”å›ä¸€ä¸ªå˜é‡çš„åŸºæœ¬ç±»å‹ï¼Œinstanceofè¿”å›çš„æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ã€‚
  * instanceof å¯ä»¥å‡†ç¡®åœ°åˆ¤æ–­å¤æ‚å¼•ç”¨æ•°æ®ç±»å‹ï¼Œä½†æ˜¯ä¸èƒ½æ­£ç¡®åˆ¤æ–­åŸºç¡€æ•°æ®ç±»å‹ã€‚
  * è€Œtypeof ä¹Ÿå­˜åœ¨å¼Šç«¯ï¼Œå®ƒè™½ç„¶å¯ä»¥åˆ¤æ–­åŸºç¡€æ•°æ®ç±»å‹ï¼ˆnull é™¤å¤–ï¼‰ï¼Œä½†æ˜¯å¼•ç”¨æ•°æ®ç±»å‹ä¸­ï¼Œé™¤äº†function ç±»å‹ä»¥å¤–ï¼Œå…¶ä»–çš„ä¹Ÿæ— æ³•åˆ¤æ–­ã€‚

  **é€šç”¨æ•°æ®ç±»å‹æ£€æµ‹**
  å¯ä»¥é‡‡ç”¨`Object.prototype.toString`ï¼Œè°ƒç”¨è¯¥æ–¹æ³•ï¼Œç»Ÿä¸€è¿”å›æ ¼å¼`â€œ[object Xxx]â€`çš„å­—ç¬¦ä¸²ã€‚

  ```js
  Object.prototype.toString({})       // "[object Object]"
  Object.prototype.toString.call({})  // åŒä¸Šç»“æœï¼ŒåŠ ä¸Šcallä¹Ÿok
  Object.prototype.toString.call(1)    // "[object Number]"
  Object.prototype.toString.call('1')  // "[object String]"
  Object.prototype.toString.call(true)  // "[object Boolean]"
  Object.prototype.toString.call(function(){})  // "[object Function]"
  Object.prototype.toString.call(null)   //"[object Null]"
  Object.prototype.toString.call(undefined) //"[object Undefined]"
  Object.prototype.toString.call(/123/g)    //"[object RegExp]"
  Object.prototype.toString.call(new Date()) //"[object Date]"
  Object.prototype.toString.call([])       //"[object Array]"
  Object.prototype.toString.call(document)  //"[object HTMLDocument]"
  Object.prototype.toString.call(window)   //"[object Window]"
  ```

  å®ç°ä¸€ä¸ªå…¨å±€é€šç”¨çš„æ•°æ®ç±»å‹åˆ¤æ–­æ–¹æ³•ï¼ˆæŠŠtypeofæ–¹æ³•å’Œinstanceofæ–¹æ³•ç»“åˆèµ·æ¥ï¼‰

  æ€è·¯ï¼šå…ˆé‡‡ç”¨`typeof`å»åˆ¤æ–­ï¼Œèƒ½åˆ¤æ–­åˆ™ç›´æ¥è¿”å›ï¼Œä¸èƒ½åˆ¤æ–­åˆ™é‡‡ç”¨`instanceof`å»åˆ¤æ–­ï¼Œé‡‡ç”¨æ­£åˆ™è¡¨è¾¾å¼å¯¹åˆ¤æ–­ç»“æœè¿›è¡Œè°ƒæ•´ã€‚

  ```js
  function getType(obj){
    let type  = typeof obj;
    if (type !== "object") { // å…ˆè¿›è¡Œtypeofåˆ¤æ–­ï¼Œå¦‚æœæ˜¯åŸºç¡€æ•°æ®ç±»å‹ï¼Œç›´æ¥è¿”å›
      return type;
    }
    // å¯¹äºtypeofè¿”å›ç»“æœæ˜¯objectçš„ï¼Œå†è¿›è¡Œå¦‚ä¸‹çš„åˆ¤æ–­ï¼Œæ­£åˆ™è¿”å›ç»“æœ
    return Object.prototype.toString.call(obj).replace(/^\[object (\S+)\]$/, '$1'); 
  }
  ```

  ä½¿ç”¨

  ```js
  getType([])     // "Array" typeof []æ˜¯objectï¼Œå› æ­¤toStringè¿”å›
  getType('123')  // "string" typeof ç›´æ¥è¿”å›
  getType(window) // "Window" toStringè¿”å›
  getType(null)   // "Null"é¦–å­—æ¯å¤§å†™ï¼Œtypeof nullæ˜¯objectï¼Œéœ€toStringæ¥åˆ¤æ–­
  getType(undefined)   // "undefined" typeof ç›´æ¥è¿”å›
  getType()            // "undefined" typeof ç›´æ¥è¿”å›
  getType(function(){}) // "function" typeofèƒ½åˆ¤æ–­ï¼Œå› æ­¤é¦–å­—æ¯å°å†™
  getType(/123/g)      //"RegExp" toStringè¿”å›
  ```


**å°é—®é¢˜ï¼š**

* **typeof NaN çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ'number'**

  NaN æŒ‡"ä¸æ˜¯ä¸€ä¸ªæ•°å­—â€ï¼ˆnot a numberï¼‰ï¼ŒNaN æ˜¯ä¸€ä¸ªâ€œè­¦æˆ’å€¼â€ï¼ˆsentinel valueï¼Œæœ‰ç‰¹æ®Šç”¨é€”çš„å¸¸è§„å€¼ï¼‰ï¼Œç”¨äºæŒ‡å‡ºæ•°å­—ç±»å‹ä¸­çš„é”™è¯¯æƒ…å†µï¼Œå³â€œæ‰§è¡Œæ•°å­¦è¿ç®—æ²¡æœ‰æˆåŠŸï¼Œè¿™æ˜¯å¤±è´¥åè¿”å›çš„ç»“æœâ€ã€‚

  ```javascript
  typeof NaN; // "number"
  ```

  NaN æ˜¯ä¸€ä¸ªç‰¹æ®Šå€¼ï¼Œå®ƒå’Œè‡ªèº«ä¸ç›¸ç­‰ï¼Œæ˜¯å”¯ä¸€ä¸€ä¸ªéè‡ªåï¼ˆè‡ªåï¼Œreflexiveï¼Œå³ `x === x` ä¸æˆç«‹ï¼‰çš„å€¼ã€‚è€Œ NaN !== NaN ä¸º trueã€‚

* **isNaN å’Œ Number.isNaN å‡½æ•°çš„åŒºåˆ«**

  - å‡½æ•° isNaN æ¥æ”¶å‚æ•°åï¼Œä¼šå°è¯•å°†è¿™ä¸ªå‚æ•°è½¬æ¢ä¸ºæ•°å€¼ï¼Œ==ä»»ä½•ä¸èƒ½è¢«è½¬æ¢ä¸ºæ•°å€¼çš„çš„å€¼éƒ½ä¼šè¿”å› true==ï¼Œå› æ­¤éæ•°å­—å€¼ä¼ å…¥ä¹Ÿä¼šè¿”å› true ï¼Œä¼šå½±å“ NaN çš„åˆ¤æ–­ã€‚
  - å‡½æ•° Number.isNaN ä¼šé¦–å…ˆåˆ¤æ–­ä¼ å…¥å‚æ•°æ˜¯å¦ä¸ºæ•°å­—ï¼Œå¦‚æœæ˜¯æ•°å­—å†ç»§ç»­åˆ¤æ–­æ˜¯å¦ä¸º NaN ï¼Œ==ä¸ä¼šè¿›è¡Œæ•°æ®ç±»å‹çš„è½¬æ¢==ï¼Œè¿™ç§æ–¹æ³•å¯¹äº NaN çš„åˆ¤æ–­æ›´ä¸ºå‡†ç¡®ã€‚

**æ‰©å±•**

åŒæ ·æ˜¯æ£€æµ‹å¯¹è±¡objè°ƒç”¨toStringæ–¹æ³•ï¼Œobj.toString()çš„ç»“æœå’ŒObject.prototype.toString.call(obj)çš„ç»“æœä¸ä¸€æ ·ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ

è¿™æ˜¯å› ä¸ºtoStringæ˜¯Objectçš„åŸå‹æ–¹æ³•ï¼Œè€ŒArrayã€functionç­‰**ç±»å‹ä½œä¸ºObjectçš„å®ä¾‹ï¼Œéƒ½é‡å†™äº†toStringæ–¹æ³•**ã€‚ä¸åŒçš„å¯¹è±¡ç±»å‹è°ƒç”¨toStringæ–¹æ³•æ—¶ï¼Œæ ¹æ®åŸå‹é“¾çš„çŸ¥è¯†ï¼Œè°ƒç”¨çš„æ˜¯å¯¹åº”çš„é‡å†™ä¹‹åçš„toStringæ–¹æ³•ï¼ˆfunctionç±»å‹è¿”å›å†…å®¹ä¸ºå‡½æ•°ä½“çš„å­—ç¬¦ä¸²ï¼ŒArrayç±»å‹è¿”å›å…ƒç´ ç»„æˆçš„å­—ç¬¦ä¸²â€¦ï¼‰ï¼Œè€Œä¸ä¼šå»è°ƒç”¨Objectä¸ŠåŸå‹toStringæ–¹æ³•ï¼ˆè¿”å›å¯¹è±¡çš„å…·ä½“ç±»å‹ï¼‰ï¼Œæ‰€ä»¥é‡‡ç”¨obj.toString()ä¸èƒ½å¾—åˆ°å…¶å¯¹è±¡ç±»å‹ï¼Œåªèƒ½å°†objè½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼›å› æ­¤ï¼Œåœ¨æƒ³è¦å¾—åˆ°å¯¹è±¡çš„å…·ä½“ç±»å‹æ—¶ï¼Œåº”è¯¥è°ƒç”¨ObjectåŸå‹ä¸Šçš„toStringæ–¹æ³•ã€‚

### **ğŸ¦ˆé—®é¢˜4ï¼šnull å’Œ undefined çš„å·®å¼‚**

- null è½¬ä¸ºæ•°å­—ç±»å‹å€¼ä¸º 0ï¼Œè€Œ undefined è½¬ä¸ºæ•°å­—ç±»å‹ä¸º NaNï¼›ï¼ˆå·²å£°æ˜ä½†æ˜¯å€¼ä¸ºç©ºnullï¼‰
- undefined æ˜¯ä»£è¡¨è°ƒç”¨ä¸€ä¸ªå€¼è€Œè¯¥å€¼å´æ²¡æœ‰èµ‹å€¼ï¼Œè¿™æ—¶å€™é»˜è®¤åˆ™ä¸º undefinedï¼›ï¼ˆå£°æ˜å˜é‡ä½†æœªèµ‹å€¼ï¼‰
- null æ˜¯ä¸€ä¸ªå¾ˆç‰¹æ®Šçš„å¯¹è±¡ï¼Œæœ€ä¸ºå¸¸è§çš„ä¸€ä¸ªç”¨æ³•å°±æ˜¯ä½œä¸ºå‚æ•°ä¼ å…¥(è¯´æ˜è¯¥å‚æ•°ä¸æ˜¯å¯¹è±¡ï¼‰
- åˆå§‹èµ‹å€¼nullï¼Œè¡¨æ˜å°†è¦èµ‹å€¼ä¸ºå¯¹è±¡ã€‚ï¼Ÿ
- ç»“æŸå‰ï¼Œè®©å¯¹è±¡æˆä¸ºåƒåœ¾å¯¹è±¡ï¼Œè®¾ç½®ä¸º null çš„å˜é‡æˆ–è€…å¯¹è±¡ä¼šè¢«å†…å­˜æ”¶é›†å™¨å›æ”¶ï¼›åƒåœ¾å›æ”¶
- å…³äºåº•å±‚ï¼š`null`ï¼šæ‰€æœ‰æœºå™¨ç å‡ä¸º0ã€‚`undefined`ï¼šæœºå™¨ç ç”¨ âˆ’2^30 æ•´æ•°æ¥è¡¨ç¤º

### ğŸ¦ˆé—®é¢˜5ï¼š`==`ã€`===`å’Œ Object.is()çš„åŒºåˆ«

- ==ï¼šç­‰åŒï¼Œæ¯”è¾ƒè¿ç®—ç¬¦ï¼Œä¸¤è¾¹å€¼ç±»å‹ä¸åŒçš„æ—¶å€™ï¼Œå…ˆè¿›è¡Œç±»å‹è½¬æ¢ï¼Œå†æ¯”è¾ƒï¼›
- ===ï¼šæ’ç­‰ï¼Œä¸¥æ ¼æ¯”è¾ƒè¿ç®—ç¬¦ï¼Œä¸åšç±»å‹è½¬æ¢ï¼Œç±»å‹ä¸åŒå°±æ˜¯ä¸ç­‰ï¼›
- Object.is()æ˜¯ ES6 æ–°å¢çš„ç”¨æ¥æ¯”è¾ƒä¸¤ä¸ªå€¼æ˜¯å¦ä¸¥æ ¼ç›¸ç­‰çš„æ–¹æ³•ï¼Œä¸===çš„è¡Œä¸ºåŸºæœ¬ä¸€è‡´ã€‚
- å…ˆè¯´===ï¼Œè¿™ä¸ªæ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦åˆ©ç”¨ä¸‹é¢çš„è§„åˆ™æ¥åˆ¤æ–­ä¸¤ä¸ªå€¼æ˜¯å¦æ’ç­‰å°±è¡Œäº†ï¼š
  - å¦‚æœç±»å‹ä¸åŒï¼Œå°±ä¸ç›¸ç­‰
  - å¦‚æœä¸¤ä¸ªéƒ½æ˜¯æ•°å€¼ï¼Œå¹¶ä¸”æ˜¯åŒä¸€ä¸ªå€¼ï¼Œé‚£ä¹ˆç›¸ç­‰ï¼› 
  - å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä¸¤ä¸ªå€¼ä¸­è‡³å°‘ä¸€ä¸ªæ˜¯ NaNï¼Œé‚£ä¹ˆä¸ç›¸ç­‰ï¼ˆåˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦æ˜¯ NaNï¼Œå¯ä»¥ç”¨ isNaN()ã€Number.isNaN()æˆ– Object.is()æ¥åˆ¤æ–­ï¼‰ã€‚
  - å¦‚æœä¸¤ä¸ªéƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œæ¯ä¸ªä½ç½®çš„å­—ç¬¦éƒ½ä¸€æ ·ï¼Œé‚£ä¹ˆç›¸ç­‰ï¼›å¦åˆ™ä¸ç›¸ç­‰ã€‚
  - å¦‚æœä¸¤ä¸ªå€¼éƒ½æ˜¯åŒæ ·çš„ Boolean å€¼ï¼Œé‚£ä¹ˆç›¸ç­‰ã€‚
  - å¦‚æœä¸¤ä¸ªå€¼éƒ½å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡æˆ–å‡½æ•°ï¼Œé‚£ä¹ˆç›¸ç­‰ï¼Œå³ä¸¤ä¸ªå¯¹è±¡çš„ç‰©ç†åœ°å€ä¹Ÿå¿…é¡»ä¿æŒä¸€è‡´ï¼›å¦åˆ™ä¸ç›¸ç­‰ã€‚
  - å¦‚æœä¸¤ä¸ªå€¼éƒ½æ˜¯ nullï¼Œæˆ–è€…éƒ½æ˜¯ undefinedï¼Œé‚£ä¹ˆç›¸ç­‰ã€‚
- å†è¯´ Object.is()ï¼Œå…¶è¡Œä¸ºä¸===åŸºæœ¬ä¸€è‡´ï¼Œä¸è¿‡æœ‰ä¸¤å¤„ä¸åŒï¼š
  - +0 ä¸ç­‰äº-0ã€‚
  - NaN ç­‰äºè‡ªèº«ã€‚

### ğŸ¦ˆé—®é¢˜6ï¼šJavaScript ä¸­çš„åŒ…è£…ç±»å‹

åœ¨JSä¸­ä¸ºæˆ‘ä»¬æä¾›äº†ä¸‰ä¸ªåŒ…è£…ç±»ï¼Œé€šè¿‡è¿™ä¸‰ä¸ªåŒ…è£…ç±»å¯ä»¥å°†åŸºæœ¬æ•°æ®ç±»å‹çš„æ•°æ®è½¬æ¢ä¸ºå¯¹è±¡ã€‚
String()å¯ä»¥å°†åŸºæœ¬æ•°æ®ç±»å‹å­—ç¬¦ä¸²è½¬æ¢ä¸ºStringå¯¹è±¡
Number()å¯ä»¥å°†åŸºæœ¬æ•°æ®ç±»å‹çš„æ•°å­—è½¬æ¢ä¸ºNumberå¯¹è±¡
Boolean()å¯ä»¥å°†åŸºæœ¬æ•°æ®ç±»å‹çš„å¸ƒå°”å€¼è½¬æ¢ä¸ºBooleanå¯¹è±¡

åœ¨ JavaScript ä¸­ï¼ŒåŸºæœ¬ç±»å‹æ˜¯æ²¡æœ‰å±æ€§å’Œæ–¹æ³•çš„ï¼Œä½†æ˜¯ä¸ºäº†ä¾¿äºæ“ä½œåŸºæœ¬ç±»å‹çš„å€¼ï¼Œåœ¨è°ƒç”¨åŸºæœ¬ç±»å‹çš„å±æ€§æˆ–æ–¹æ³•æ—¶ JavaScript ä¼šåœ¨åå°éšå¼åœ°å°†åŸºæœ¬ç±»å‹çš„å€¼è½¬æ¢ä¸ºå¯¹è±¡ï¼Œå¦‚ï¼š

```js
const a = "abc";
a.length; // 3
a.toUpperCase(); // "ABC"
```

åœ¨è®¿é—®\'abc\'.lengthæ—¶ï¼ŒJavaScript å°†'abc'åœ¨åå°è½¬æ¢æˆString('abc')ï¼Œç„¶åå†è®¿é—®å…¶lengthå±æ€§ã€‚
JavaScriptä¹Ÿå¯ä»¥ä½¿ç”¨**Object**å‡½æ•°æ˜¾å¼åœ°å°†åŸºæœ¬ç±»å‹è½¬æ¢ä¸ºåŒ…è£…ç±»å‹ï¼š

```js
var a = 'abc'
Object(a) // String {"abc"}
```

ä¹Ÿå¯ä»¥ä½¿ç”¨**valueOf**æ–¹æ³•å°†åŒ…è£…ç±»å‹å€’è½¬æˆåŸºæœ¬ç±»å‹ï¼š

```
var a = 'abc'
var b = Object(a)
var c = b.valueOf() // 'abc'
```

çœ‹çœ‹å¦‚ä¸‹ä»£ç ä¼šæ‰“å°å‡ºä»€ä¹ˆï¼š

```js
var a = new Boolean( false );
if (!a) {
	console.log( "Oops" ); // never runs
}
console.log(typeof(a))
// object
```

ç­”æ¡ˆæ˜¯ä»€ä¹ˆéƒ½ä¸ä¼šæ‰“å°ï¼Œå› ä¸ºè™½ç„¶åŒ…è£¹çš„åŸºæœ¬ç±»å‹æ˜¯falseï¼Œä½†æ˜¯falseè¢«åŒ…è£¹æˆåŒ…è£…ç±»å‹åå°±æˆäº†å¯¹è±¡ï¼Œæ‰€ä»¥å…¶éå€¼ä¸ºfalseï¼Œæ‰€ä»¥å¾ªç¯ä½“ä¸­çš„å†…å®¹ä¸ä¼šè¿è¡Œã€‚

### ğŸ¦ˆé—®é¢˜7ï¼šåˆ¤æ–­æ•°ç»„çš„äº”ç§æ–¹æ³•

**instanceof**

```JavaScript
const arr= []
arr instanceof Array // true
```

**Array.isArray**

```
const arr = []
Array.isArray(arr) // true

const obj = {}
Array.isArray(obj) // false
```

**Object.prototype.isPrototypeOf**

- ä½¿ç”¨ Object çš„åŸå‹æ–¹æ³• isPrototypeOfï¼Œåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡çš„åŸå‹æ˜¯å¦ä¸€æ ·, `isPrototypeOf()` æ–¹æ³•ç”¨äºæµ‹è¯•ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å­˜åœ¨äºå¦ä¸€ä¸ªå¯¹è±¡çš„åŸå‹é“¾ä¸Šã€‚---ã€‹instanceofå°±æ˜¯é‡‡ç”¨çš„è¿™ç§æ–¹æ³•ã€‚

```
const arr = []
Object.prototype.isPrototypeOf(arr, Array.prototype) // true
```

**Object.getPrototypeOf**ï¼š`getPrototypeOf()` æ–¹æ³•è¿”å›æŒ‡å®šå¯¹è±¡çš„åŸå‹ã€‚

```
const arr = []
Object.getPrototypeOf(arr) === Array.prototype // true
```

**Object.prototype.toString**

```
const arr = []
Object.prototype.toString.call(arr) === '[object Array]' // true

const obj = {}
Object.prototype.toString.call(obj) // "[object Object]"
```

- ä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨ obj.toString()å‘¢ï¼Ÿ
  è¿™æ˜¯å› ä¸º toString ä¸º Object çš„åŸå‹æ–¹æ³•ï¼Œè€Œ Arrayï¼Œfunction ç­‰ç±»å‹ä½œä¸º Object çš„å®ä¾‹ï¼Œéƒ½==é‡å†™äº† toString æ–¹æ³•==ã€‚ä¸åŒçš„å¯¹è±¡ç±»å‹è°ƒç”¨ toString æ–¹æ³•æ—¶ï¼Œæ ¹æ®åŸå‹é“¾çš„çŸ¥è¯†ï¼Œè°ƒç”¨çš„æ˜¯å¯¹åº”çš„é‡å†™ä¹‹åçš„ toString æ–¹æ³•ï¼Œè€Œä¸ä¼šå»è°ƒç”¨ Object ä¸ŠåŸå‹ toString æ–¹æ³•ï¼ˆè¿”å›å¯¹è±¡çš„å…·ä½“ç±»å‹ï¼‰ï¼Œæ‰€ä»¥é‡‡ç”¨ obj.toString()ä¸èƒ½å¾—åˆ°å…¶å¯¹è±¡ç±»å‹ï¼Œåªèƒ½å°† obj è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼›å› æ­¤ï¼Œåœ¨æƒ³è¦å¾—åˆ°å¯¹è±¡çš„å…·ä½“ç±»å‹æ—¶ï¼Œåº”è¯¥è°ƒç”¨ Object ä¸ŠåŸå‹ toString æ–¹æ³•ã€‚

### ğŸ¦ˆé—®é¢˜8ï¼šæ•°ç»„æ“ä½œ

**æ•°ç»„æ‰å¹³åŒ–**
æ•°ç»„æ‰å¹³åŒ–å°±æ˜¯æŠŠå¤šç»´æ•°ç»„è½¬åŒ–æˆä¸€ç»´æ•°ç»„ã€‚

- flat()æ–¹æ³•

  - æŒ‡å®šæå–æ•°ç»„çš„åµŒå¥—å±‚æ•°ï¼Œé»˜è®¤æ˜¯1ï¼ŒInfinityå¯ä»¥æå–ä»»æ„æ·±åº¦
  - flatæ–¹æ³•ä¼šè‡ªåŠ¨ç§»é™¤ç©ºé¡¹ï¼ˆç§»é™¤ç©ºæ ¼ï¼‰

  ```js
  console.log([1 ,[2, 3]].flat()); // [1, 2, 3]
  // æŒ‡å®šè½¬æ¢çš„åµŒå¥—å±‚æ•°
  console.log([1, [2, [3, [4, 5]]]].flat(2)); // [1, 2, 3, [4, 5]]
  // ä¸ç®¡åµŒå¥—å¤šå°‘å±‚
  console.log([1, [2, [3, [4, 5]]]].flat(Infinity)); // [1, 2, 3, 4, 5]
  // è‡ªåŠ¨è·³è¿‡ç©ºä½
  console.log([1, [2, , 3]].flat()); // [1, 2, 3]
  ```

- reduce + concat

  ```js
  arr.reduce((prev, cur) => prev.concat((cur), []);//è¿™ä¸ªä»…èƒ½å¯¹äºŒç»´æ•°ç»„è¿›è¡Œé“ºå¹³
  // ä¼˜åŒ–---é‡‡ç”¨é€’å½’
  // å®šä¹‰ä¸€ä¸ªflattenå‡½æ•°ï¼Œåˆ¤æ–­å¦‚æœæ˜¯æ•°ç»„å°±ä¸€ç›´é€’å½’
  function flatten(arr){
    return arr.reduce((prev, cur) => {
      return prev.concat(Array.isArray(cur) ? flatten(cur) : cur)
    },[])
  }
  ```

- æ‰©å±•è¿ç®—ç¬¦ + concat

  ```js
  // äºŒç»´
  const flattened = arr => [].concat(...arr);
  
  // ä¼˜åŒ–
  function flatten(arr){
  while(arr.some(item => Array.isArray(item))){
    arr = [].concat(...arr);
  }
  return arr;
  }
  
  const arr = [1, [2, [3, 4]]];
  console.log(flatten(arr));
  ```

**æ•°ç»„å»é‡**
å»é™¤æ•°ç»„çš„é‡å¤å…ƒç´ 

- åŒé‡forå¾ªç¯

  ```js
  function Array_dfor(data) {
    const newArray = [];
    let isRepeat;
    for (let i = 0; i < data.length; i++) {
      isRepeat = false;
      for (let j = 0; j < newArray.length; j++) {
        if (data[i] === newArray[j]) {
          isRepeat = true;
          break;
        }
      }
      if (!isRepeat) {
        newArray.push(data[i]);
      }
    }
    return newArray;
  }
  ```

- includes()
  ä¸å­˜åœ¨å°±åŠ å…¥æ•°ç»„ï¼Œå­˜åœ¨ç›´æ¥è·³è¿‡

  ```js
  function Array_includes(data) {
  var arr = [];
  for (var i = 0; i < data.length; i++) {
    if (!arr.includes(data[i])) {
      arr.push(data[i])
    }
  }
  return arr;
  ```

- index()
  åŒincludes()

  ```js
  function Array_indexOf(data) {
    var arr = [];
    for (var i = 0; i < data.length; i++) {
      if (arr.indexOf(data[i]) === -1){
        arr.push(data[i])
      }
    }
    return arr;
  }
  ```

- reducer + indexOf()
  ä¸å­˜åœ¨è¯¥å…ƒç´ æ—¶ï¼ŒåŠ å…¥åˆ°æ•°ç»„ï¼Œå­˜åœ¨æ—¶ç›´æ¥è¿”å›å‰ä¸€è®¡ç®—ç»“æœçš„æ•°ç»„

  ```js
  let myArray = ['a', 'b', 'a', 'b', 'c', 'e', 'e', 'c', 'd', 'd', 'd', 'd']
  let myArrayWithNoDuplicates = myArray.reduce(function (previousValue, currentValue) {
    if (previousValue.indexOf(currentValue) === -1) {// indexOfåˆ¤æ–­ä¸å­˜åœ¨è¯¥å…ƒç´ è¿”å›-1
      previousValue.push(currentValue)
    }
    return previousValue // å·²ç»å­˜åœ¨è¯¥å…ƒç´ ï¼Œæ‰€ä»¥ç›´æ¥è¿”å›å‰ä¸€åˆ¤æ–­ç»“æœ
  }, [])
  
  console.log(myArrayWithNoDuplicates)
  ```

- Map()

```js
function Array_Map(data) {
  const newArr = [];
  const tmp = new Map();
  for (var i = 0; i < data.length; i++) {
    if (!tmp.has(data[i])){
      tmp.set(data[i],1)
      newArr.push(data[i])
    }
  }
  return newArr;
}
```

- Set()

```js
function Array_set(data) {
  return Array.from(new Set(data))
}
```



## 2. BOMå’ŒDOM

### åŸºç¡€çŸ¥è¯†ç‚¹

* BOM
  æµè§ˆå™¨å¯¹è±¡æ¨¡å‹ï¼Œå®ƒæŒ‡çš„æ˜¯æŠŠæµè§ˆå™¨å½“åšä¸€ä¸ªå¯¹è±¡æ¥å¯¹å¾…ï¼Œè¿™ä¸ªå¯¹è±¡ä¸»è¦å®šä¹‰äº†ä¸æµè§ˆå™¨è¿›è¡Œäº¤äº’çš„æ–¹æ³•å’Œæ¥å£ã€‚

  * location

    æä¾›äº†å½“å‰çª—å£ä¸­åŠ è½½æ–‡æ¡£çš„ä¿¡æ¯ï¼Œä»¥åŠé€šå¸¸çš„å¯¼èˆªåŠŸèƒ½ã€‚

  * history å¯¹è±¡
    `history`å¯¹è±¡ä¸»è¦ç”¨æ¥æ“ä½œæµè§ˆå™¨`URL`çš„å†å²è®°å½•ï¼Œå¯ä»¥é€šè¿‡å‚æ•°å‘å‰ï¼Œå‘åï¼Œæˆ–è€…å‘æŒ‡å®š`URL`è·³è½¬

    - history.go() -- å‰è¿›æˆ–åé€€æŒ‡å®šçš„é¡µé¢æ•° history.go(num);
    - history.back() -- åé€€ä¸€é¡µ
    - history.forward() -- å‰è¿›ä¸€é¡µ

  * Navigator
    `navigator` å¯¹è±¡ä¸»è¦ç”¨æ¥è·å–æµè§ˆå™¨çš„å±æ€§ï¼ŒåŒºåˆ†æµè§ˆå™¨ç±»å‹ã€‚å±æ€§è¾ƒå¤šï¼Œä¸”å…¼å®¹æ€§æ¯”è¾ƒå¤æ‚ã€‚

    - navigator.userAgent -- è¿”å›ç”¨æˆ·ä»£ç†å¤´çš„å­—ç¬¦ä¸²è¡¨ç¤º(å°±æ˜¯åŒ…æ‹¬æµè§ˆå™¨ç‰ˆæœ¬ä¿¡æ¯ç­‰çš„å­—ç¬¦ä¸²)
    - navigator.cookieEnabled -- è¿”å›æµè§ˆå™¨æ˜¯å¦æ”¯æŒ(å¯ç”¨)cookie

  * screen
    ä¿å­˜çš„çº¯ç²¹æ˜¯å®¢æˆ·ç«¯èƒ½åŠ›ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯æµè§ˆå™¨çª—å£å¤–é¢çš„å®¢æˆ·ç«¯æ˜¾ç¤ºå™¨çš„ä¿¡æ¯ï¼Œæ¯”å¦‚åƒç´ å®½åº¦å’Œåƒç´ é«˜åº¦

* DOM
  DOM æŒ‡çš„æ˜¯æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼Œå®ƒæŒ‡çš„æ˜¯æŠŠæ–‡æ¡£å½“åšä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¸»è¦å®šä¹‰äº†å¤„ç†ç½‘é¡µå†…å®¹çš„æ–¹æ³•å’Œæ¥å£ã€‚==DOM è¡¨ç¤ºç”±å¤šå±‚èŠ‚ç‚¹æ„æˆçš„æ–‡æ¡£ï¼Œé€šè¿‡å®ƒå¼€å‘è€…å¯ä»¥æ·»åŠ ã€åˆ é™¤å’Œä¿®æ”¹é¡µé¢çš„å„ä¸ªéƒ¨åˆ†ã€‚==

### ğŸ¦ˆé—®é¢˜1ï¼šè¯´è¯´ä½ å¯¹BOMçš„ç†è§£ï¼Œå¸¸è§çš„BOMå¯¹è±¡ä½ äº†è§£å“ªäº›ï¼Ÿ

[å‚è€ƒ](https://vue3js.cn/interview/JavaScript/BOM.html#%E4%B8%80%E3%80%81%E6%98%AF%E4%BB%80%E4%B9%88)

![img](JsImg/3e191c40-8089-11eb-85f6-6fac77c0c9b3.png)

### ğŸ¦ˆé—®é¢˜2ï¼šDOMå¸¸è§çš„æ“ä½œæœ‰å“ªäº›ï¼Ÿ

**![img](JsImg/a89c99a0-7fdc-11eb-ab90-d9ae814b240d.png)**
**æ“ä½œ**

`React`ç­‰æ¡†æ¶å‡ºç°åï¼Œæˆ‘ä»¬é€šè¿‡æ“ä½œæ•°æ®æ¥æ§åˆ¶`DOM`ï¼ˆç»å¤§å¤šæ•°æ—¶å€™ï¼‰ï¼Œè¶Šæ¥è¶Šå°‘çš„å»ç›´æ¥æ“ä½œ`DOM`ã€‚

- åˆ›å»ºèŠ‚ç‚¹
- æŸ¥è¯¢èŠ‚ç‚¹
- æ›´æ–°èŠ‚ç‚¹
- æ·»åŠ èŠ‚ç‚¹
- åˆ é™¤èŠ‚ç‚¹

**åˆ›å»ºèŠ‚ç‚¹**

* createElement

  åˆ›å»ºæ–°å…ƒç´ ï¼Œæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå³è¦åˆ›å»ºå…ƒç´ çš„æ ‡ç­¾å

```js
const divEl = document.createElement("div");
```

- createTextNode

  åˆ›å»ºä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹

```js
const textEl = document.createTextNode("content");
```

- createDocumentFragment

  ç”¨æ¥åˆ›å»ºä¸€ä¸ªæ–‡æ¡£ç¢ç‰‡ï¼Œå®ƒè¡¨ç¤ºä¸€ç§è½»é‡çº§çš„æ–‡æ¡£ï¼Œä¸»è¦æ˜¯ç”¨æ¥å­˜å‚¨ä¸´æ—¶èŠ‚ç‚¹ï¼Œç„¶åæŠŠæ–‡æ¡£ç¢ç‰‡çš„å†…å®¹ä¸€æ¬¡æ€§æ·»åŠ åˆ°`DOM`ä¸­

```js
const fragment = document.createDocumentFragment();
```

â€‹	å½“è¯·æ±‚æŠŠä¸€ä¸ª`DocumentFragment` èŠ‚ç‚¹æ’å…¥æ–‡æ¡£æ ‘æ—¶ï¼Œæ’å…¥çš„ä¸æ˜¯ `DocumentFragment`è‡ªèº«ï¼Œè€Œæ˜¯å®ƒçš„æ‰€æœ‰å­å­™èŠ‚ç‚¹

- createAttribute

  åˆ›å»ºå±æ€§èŠ‚ç‚¹ï¼Œå¯ä»¥æ˜¯è‡ªå®šä¹‰å±æ€§

```js
const dataAttribute = document.createAttribute('custom');
consle.log(dataAttribute);
```

**è·å–èŠ‚ç‚¹**

- querySelector

ä¼ å…¥ä»»ä½•æœ‰æ•ˆçš„`css` é€‰æ‹©å™¨ï¼Œå³å¯é€‰ä¸­å•ä¸ª `DOM`å…ƒç´ ï¼ˆé¦–ä¸ªï¼‰ï¼š

```js
document.querySelector('.element')
document.querySelector('#element')
document.querySelector('div')
document.querySelector('[name="username"]')
document.querySelector('div + p > span')
```

å¦‚æœé¡µé¢ä¸Šæ²¡æœ‰æŒ‡å®šçš„å…ƒç´ æ—¶ï¼Œè¿”å› `null`

- querySelectorAll

è¿”å›ä¸€ä¸ªåŒ…å«èŠ‚ç‚¹å­æ ‘å†…æ‰€æœ‰ä¸ä¹‹ç›¸åŒ¹é…çš„`Element`èŠ‚ç‚¹åˆ—è¡¨ï¼Œå¦‚æœæ²¡æœ‰ç›¸åŒ¹é…çš„ï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºèŠ‚ç‚¹åˆ—è¡¨

```js
const notLive = document.querySelectorAll("p");
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯¥æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ª `NodeList`çš„é™æ€å®ä¾‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªé™æ€çš„â€œå¿«ç…§â€ï¼Œè€Œéâ€œå®æ—¶â€çš„æŸ¥è¯¢

å…³äºè·å–`DOM`å…ƒç´ çš„æ–¹æ³•è¿˜æœ‰å¦‚ä¸‹ï¼Œå°±ä¸ä¸€ä¸€è¿°è¯´

```js
document.getElementById('idå±æ€§å€¼');è¿”å›æ‹¥æœ‰æŒ‡å®šidçš„å¯¹è±¡çš„å¼•ç”¨
document.getElementsByClassName('classå±æ€§å€¼');è¿”å›æ‹¥æœ‰æŒ‡å®šclassçš„å¯¹è±¡é›†åˆ
document.getElementsByTagName('æ ‡ç­¾å');è¿”å›æ‹¥æœ‰æŒ‡å®šæ ‡ç­¾åçš„å¯¹è±¡é›†åˆ
document.getElementsByName('nameå±æ€§å€¼'); è¿”å›æ‹¥æœ‰æŒ‡å®šåç§°çš„å¯¹è±¡ç»“åˆ
document/element.querySelector('CSSé€‰æ‹©å™¨');  ä»…è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…çš„å…ƒç´ 
document/element.querySelectorAll('CSSé€‰æ‹©å™¨');   è¿”å›æ‰€æœ‰åŒ¹é…çš„å…ƒç´ 
document.documentElement;  è·å–é¡µé¢ä¸­çš„HTMLæ ‡ç­¾
document.body; è·å–é¡µé¢ä¸­çš„BODYæ ‡ç­¾
document.all[''];  è·å–é¡µé¢ä¸­çš„æ‰€æœ‰å…ƒç´ èŠ‚ç‚¹çš„å¯¹è±¡é›†åˆå‹
```

é™¤æ­¤ä¹‹å¤–ï¼Œæ¯ä¸ª`DOM`å…ƒç´ è¿˜æœ‰`parentNode`ã€`childNodes`ã€`firstChild`ã€`lastChild`ã€`nextSibling`ã€`previousSibling`å±æ€§ï¼Œå…³ç³»å›¾å¦‚ä¸‹å›¾æ‰€ç¤º

![img](JsImg/c100f450-7fdc-11eb-ab90-d9ae814b240d.png)

**æ›´æ–°èŠ‚ç‚¹**

- innerHTML

ä¸ä½†å¯ä»¥ä¿®æ”¹ä¸€ä¸ª`DOM`èŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹ï¼Œè¿˜å¯ä»¥ç›´æ¥é€šè¿‡`HTML`ç‰‡æ®µä¿®æ”¹`DOM`èŠ‚ç‚¹å†…éƒ¨çš„å­æ ‘

```js
// è·å–<p id="p">...</p >
var p = document.getElementById('p');
// è®¾ç½®æ–‡æœ¬ä¸ºabc:
p.innerHTML = 'ABC'; // <p id="p">ABC</p >
// è®¾ç½®HTML:
p.innerHTML = 'ABC <span style="color:red">RED</span> XYZ';
// <p>...</p >çš„å†…éƒ¨ç»“æ„å·²ä¿®æ”¹
```

- innerTextã€textContent

è‡ªåŠ¨å¯¹å­—ç¬¦ä¸²è¿›è¡Œ`HTML`ç¼–ç ï¼Œä¿è¯æ— æ³•è®¾ç½®ä»»ä½•`HTML`æ ‡ç­¾

```js
// è·å–<p id="p-id">...</p >
var p = document.getElementById('p-id');
// è®¾ç½®æ–‡æœ¬:
p.innerText = '<script>alert("Hi")</script>';
// HTMLè¢«è‡ªåŠ¨ç¼–ç ï¼Œæ— æ³•è®¾ç½®ä¸€ä¸ª<script>èŠ‚ç‚¹:
// <p id="p-id">&lt;script&gt;alert("Hi")&lt;/script&gt;</p >
```

ä¸¤è€…çš„åŒºåˆ«åœ¨äºè¯»å–å±æ€§æ—¶ï¼Œ`innerText`ä¸è¿”å›éšè—å…ƒç´ çš„æ–‡æœ¬ï¼Œè€Œ`textContent`è¿”å›æ‰€æœ‰æ–‡æœ¬

- style

`DOM`èŠ‚ç‚¹çš„`style`å±æ€§å¯¹åº”æ‰€æœ‰çš„`CSS`ï¼Œå¯ä»¥ç›´æ¥è·å–æˆ–è®¾ç½®ã€‚é‡åˆ°`-`éœ€è¦è½¬åŒ–ä¸ºé©¼å³°å‘½åã€‚

```js
// è·å–<p id="p-id">...</p >
const p = document.getElementById('p-id');
// è®¾ç½®CSS:
p.style.color = '#ff0000';
p.style.fontSize = '20px'; // é©¼å³°å‘½å
p.style.paddingTop = '2em';
```

**æ·»åŠ èŠ‚ç‚¹**

- innerHTML

å¦‚æœè¿™ä¸ªDOMèŠ‚ç‚¹æ˜¯ç©ºçš„ï¼Œä¾‹å¦‚ï¼Œ`<div></div>`ï¼Œé‚£ä¹ˆï¼Œç›´æ¥ä½¿ç”¨`innerHTML = '<span>child</span>'`å°±å¯ä»¥ä¿®æ”¹`DOM`èŠ‚ç‚¹çš„å†…å®¹ï¼Œç›¸å½“äºæ·»åŠ äº†æ–°çš„`DOM`èŠ‚ç‚¹

å¦‚æœè¿™ä¸ªDOMèŠ‚ç‚¹ä¸æ˜¯ç©ºçš„ï¼Œé‚£å°±ä¸èƒ½è¿™ä¹ˆåšï¼Œå› ä¸º`innerHTML`ä¼šç›´æ¥æ›¿æ¢æ‰åŸæ¥çš„æ‰€æœ‰å­èŠ‚ç‚¹ã€‚

- appendChild

æŠŠä¸€ä¸ªå­èŠ‚ç‚¹æ·»åŠ åˆ°çˆ¶èŠ‚ç‚¹çš„æœ€åä¸€ä¸ªå­èŠ‚ç‚¹

ä¸¾ä¸ªä¾‹å­

```js
<!-- HTMLç»“æ„ -->
<p id="js">JavaScript</p >
<div id="list">
    <p id="java">Java</p >
    <p id="python">Python</p >
    <p id="scheme">Scheme</p >
</div>
```

æ·»åŠ ä¸€ä¸ª`p`å…ƒç´ 

```js
const js = document.getElementById('js')
js.innerHTML = "JavaScript"
const list = document.getElementById('list');
list.appendChild(js);
```

ç°åœ¨`HTML`ç»“æ„å˜æˆäº†ä¸‹é¢

```js
<!-- HTMLç»“æ„ -->
<div id="list">
    <p id="java">Java</p >
    <p id="python">Python</p >
    <p id="scheme">Scheme</p >
    <p id="js">JavaScript</p >  <!-- æ·»åŠ å…ƒç´  -->
</div>
```

ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬æ˜¯è·å–`DOM`å…ƒç´ åå†è¿›è¡Œæ·»åŠ æ“ä½œï¼Œè¿™ä¸ª`js`èŠ‚ç‚¹æ˜¯å·²ç»å­˜åœ¨å½“å‰æ–‡æ¡£æ ‘ä¸­ï¼Œå› æ­¤è¿™ä¸ªèŠ‚ç‚¹é¦–å…ˆä¼šä»åŸå…ˆçš„ä½ç½®åˆ é™¤ï¼Œå†æ’å…¥åˆ°æ–°çš„ä½ç½®

å¦‚æœåŠ¨æ€æ·»åŠ æ–°çš„èŠ‚ç‚¹ï¼Œåˆ™å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œç„¶åæ’å…¥åˆ°æŒ‡å®šçš„ä½ç½®

```js
const list = document.getElementById('list'),
const haskell = document.createElement('p');
haskell.id = 'haskell';
haskell.innerText = 'Haskell';
list.appendChild(haskell);
```

- insertBefore

æŠŠå­èŠ‚ç‚¹æ’å…¥åˆ°æŒ‡å®šçš„ä½ç½®ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š

```js
parentElement.insertBefore(newElement, referenceElement)
```

å­èŠ‚ç‚¹ä¼šæ’å…¥åˆ°`referenceElement`ä¹‹å‰

- setAttribute

åœ¨æŒ‡å®šå…ƒç´ ä¸­æ·»åŠ ä¸€ä¸ªå±æ€§èŠ‚ç‚¹ï¼Œå¦‚æœå…ƒç´ ä¸­å·²æœ‰è¯¥å±æ€§æ”¹å˜å±æ€§å€¼

```js
const div = document.getElementById('id')
div.setAttribute('class', 'white');//ç¬¬ä¸€ä¸ªå‚æ•°å±æ€§åï¼Œç¬¬äºŒä¸ªå‚æ•°å±æ€§å€¼ã€‚
```

- åˆ é™¤èŠ‚ç‚¹

åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé¦–å…ˆè¦è·å¾—è¯¥èŠ‚ç‚¹æœ¬èº«ä»¥åŠå®ƒçš„çˆ¶èŠ‚ç‚¹ï¼Œç„¶åï¼Œè°ƒç”¨çˆ¶èŠ‚ç‚¹çš„`removeChild`æŠŠè‡ªå·±åˆ æ‰

```js
// æ‹¿åˆ°å¾…åˆ é™¤èŠ‚ç‚¹:
const self = document.getElementById('to-be-removed');
// æ‹¿åˆ°çˆ¶èŠ‚ç‚¹:
const parent = self.parentElement;
// åˆ é™¤:
const removed = parent.removeChild(self);
removed === self; // true
```

åˆ é™¤åçš„èŠ‚ç‚¹è™½ç„¶ä¸åœ¨æ–‡æ¡£æ ‘ä¸­äº†ï¼Œä½†å…¶å®å®ƒè¿˜åœ¨å†…å­˜ä¸­ï¼Œå¯ä»¥éšæ—¶å†æ¬¡è¢«æ·»åŠ åˆ°åˆ«çš„ä½ç½®ã€‚

## æ€»ç»“é¢è¯•å®˜ç³»åˆ—

[å‚è€ƒåœ°å€](https://vue3js.cn/interview/)

### é—®é¢˜1ï¼šæ•°ç»„çš„å¸¸ç”¨æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ

![img](JsImg/5842e560-67b6-11eb-85f6-6fac77c0c9b3.png)

**æ“ä½œæ–¹æ³•**

â­â­â­éœ€è¦ç•™æ„çš„æ˜¯å“ªäº›æ–¹æ³•ä¼šå¯¹åŸæ•°ç»„äº§ç”Ÿå½±å“ï¼Œå“ªäº›æ–¹æ³•ä¸ä¼šã€‚

* å¢

  `push() unshift() splice() concat()`ï¼›åªæœ‰cancat()æ–¹æ³•ä¸ä¼šå¯¹åŸæ•°ç»„äº§ç”Ÿå½±å“ã€‚

  - push() æ–¹æ³•æ¥æ”¶ä»»æ„æ•°é‡çš„å‚æ•°ï¼Œå¹¶å°†å®ƒä»¬æ·»åŠ åˆ°æ•°ç»„æœ«å°¾ï¼Œè¿”å›æ•°ç»„çš„æœ€æ–°é•¿åº¦

    ```js
    let colors = []; // åˆ›å»ºä¸€ä¸ªæ•°ç»„
    let count = colors.push("red", "green"); // æ¨å…¥ä¸¤é¡¹
    console.log(count) // 2
    ```

  - unshift() unshift()åœ¨æ•°ç»„å¼€å¤´æ·»åŠ ä»»æ„å¤šä¸ªå€¼ï¼Œç„¶åè¿”å›æ–°çš„æ•°ç»„é•¿åº¦

  - splice() ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯å¼€å§‹ä½ç½®ã€0ï¼ˆè¦åˆ é™¤çš„å…ƒç´ æ•°é‡ï¼‰ã€æ’å…¥çš„å…ƒç´ ï¼Œè¿”å›ç©ºæ•°ç»„

  - concat() é¦–å…ˆä¼šåˆ›å»ºä¸€ä¸ªå½“å‰æ•°ç»„çš„å‰¯æœ¬ï¼Œç„¶åå†æŠŠå®ƒçš„å‚æ•°æ·»åŠ åˆ°å‰¯æœ¬æœ«å°¾ï¼Œæœ€åè¿”å›è¿™ä¸ªæ–°æ„å»ºçš„æ•°ç»„ï¼Œä¸ä¼šå½±å“åŸå§‹æ•°ç»„ã€‚---ã€‹ç”Ÿæˆçš„æ•°ç»„è¿˜æ˜¯ä¸€ç»´æ•°ç»„ã€‚

* åˆ 

  `pop() shift() splice() slice()`ï¼›å…¶ä¸­slice()æ–¹æ³•ä¸å½±å“åŸæ•°ç»„ã€‚

  - pop() ç”¨äºåˆ é™¤æ•°ç»„çš„æœ€åä¸€é¡¹ï¼ŒåŒæ—¶å‡å°‘æ•°ç»„çš„`length` å€¼ï¼Œè¿”å›è¢«åˆ é™¤çš„é¡¹ã€‚

  - shift() ç”¨äºåˆ é™¤æ•°ç»„çš„ç¬¬ä¸€é¡¹ï¼ŒåŒæ—¶å‡å°‘æ•°ç»„çš„`length` å€¼ï¼Œè¿”å›è¢«åˆ é™¤çš„é¡¹ã€‚

  - splice() ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯å¼€å§‹ä½ç½®ï¼Œåˆ é™¤å…ƒç´ çš„æ•°é‡ï¼Œè¿”å›åŒ…å«åˆ é™¤å…ƒç´ çš„æ•°ç»„ã€‚

  - slice()  ç”¨äºåˆ›å»ºä¸€ä¸ªåŒ…å«åŸæœ‰æ•°ç»„ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ çš„æ–°æ•°ç»„ï¼Œä¸ä¼šå½±å“åŸå§‹æ•°ç»„ã€‚æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºè¦å¤åˆ¶çš„ä½ç½®ã€‚`[)`å·¦é—­å³å¼€ã€‚---ã€‹æˆªå–æ•°ç»„ã€‚

    ```js
    let colors = ["red", "green", "blue", "yellow", "purple"];
    let colors2 = colors.slice(1);
    let colors3 = colors.slice(1, 4);
    console.log(colors)   // red,green,blue,yellow,purple
    concole.log(colors2); // green,blue,yellow,purple
    concole.log(colors3); // green,blue,yellow
    ```

* æ”¹
  ä¿®æ”¹åŸæ¥æ•°ç»„çš„å†…å®¹ï¼Œå¸¸ç”¨`splice()`

  `splice() `ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯å¼€å§‹ä½ç½®ï¼Œè¦åˆ é™¤å…ƒç´ çš„æ•°é‡ï¼Œè¦æ’å…¥çš„ä»»æ„å¤šä¸ªå…ƒç´ ï¼Œè¿”å›åˆ é™¤å…ƒç´ çš„æ•°ç»„ï¼Œå¯¹åŸæ•°ç»„äº§ç”Ÿå½±å“

* æŸ¥
  å³æŸ¥æ‰¾å…ƒç´ ï¼Œè¿”å›å…ƒç´ ç´¢å¼•å€¼æˆ–è€…å…ƒç´ å€¼ã€‚

  - indexOf(value) è¿”å›è¦æŸ¥æ‰¾çš„å…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä½ç½®ï¼Œå¦‚æœæ²¡æ‰¾åˆ°åˆ™è¿”å› -1

  - includes(value) è¿”å›è¦æŸ¥æ‰¾çš„å…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä½ç½®ï¼Œæ‰¾åˆ°è¿”å›`true`ï¼Œå¦åˆ™`false`

  - find() è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…çš„å…ƒç´ 

    ```js
    const people = [
        {
            name: "Matt",
            age: 27
        },
        {
            name: "Nicholas",
            age: 29
        }
    ];
    people.find((element, index, array) => element.age < 28) // // {name: "Matt", age: 27}
    ```

**æ’åºæ–¹æ³•**

- reverse() å°†æ•°ç»„å…ƒç´ æ–¹å‘åè½¬ã€‚

  ```js
  let values = [1, 2, 3, 4, 5];
  values.reverse();
  alert(values); // 5,4,3,2,1
  ```

- sort()  å‡åºã€é™åº

**è¿­ä»£æ–¹æ³•**
éƒ½ä¸æ”¹å˜åŸæ•°ç»„

- some() å¯¹æ•°ç»„æ¯ä¸€é¡¹éƒ½è¿è¡Œä¼ å…¥çš„æµ‹è¯•å‡½æ•°ï¼Œå¦‚æœè‡³å°‘æœ‰1ä¸ªå…ƒç´ è¿”å› true ï¼Œåˆ™è¿™ä¸ªæ–¹æ³•è¿”å› trueã€‚

- every() å¯¹æ•°ç»„æ¯ä¸€é¡¹éƒ½è¿è¡Œä¼ å…¥çš„æµ‹è¯•å‡½æ•°ï¼Œå¦‚æœæ‰€æœ‰å…ƒç´ éƒ½è¿”å› true ï¼Œåˆ™è¿™ä¸ªæ–¹æ³•è¿”å› true

- forEach() å¯¹æ•°ç»„æ¯ä¸€é¡¹éƒ½è¿è¡Œä¼ å…¥çš„å‡½æ•°ï¼Œæ²¡æœ‰è¿”å›å€¼

  ```js
  let numbers = [1, 2, 3, 4, 5, 4, 3, 2, 1];
  numbers.forEach((item, index, array) => {
      // æ‰§è¡ŒæŸäº›æ“ä½œ
  });
  ```

- filter() å¯¹æ•°ç»„æ¯ä¸€é¡¹éƒ½è¿è¡Œä¼ å…¥çš„å‡½æ•°ï¼Œå‡½æ•°è¿”å› `true` çš„é¡¹ä¼šç»„æˆæ•°ç»„ä¹‹åè¿”å›ã€‚

  ```js
  let numbers = [1, 2, 3, 4, 5, 4, 3, 2, 1];
  let filterResult = numbers.filter((item, index, array) => item > 2);
  console.log(filterResult); // 3,4,5,4,3
  ```

- map() å¯¹æ•°ç»„æ¯ä¸€é¡¹éƒ½è¿è¡Œä¼ å…¥çš„å‡½æ•°ï¼Œè¿”å›ç”±æ¯æ¬¡å‡½æ•°è°ƒç”¨çš„ç»“æœæ„æˆçš„æ•°ç»„ã€‚

  ```js
  let numbers = [1, 2, 3, 4, 5, 4, 3, 2, 1];
  let mapResult = numbers.map((item, index, array) => item * 2);
  console.log(mapResult) // 2,4,6,8,10,8,6,4,2
  ```

### é—®é¢˜2ï¼šJavaScriptå­—ç¬¦ä¸²çš„å¸¸ç”¨æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ

![img](JsImg/ceb6ebc0-65c1-11eb-ab90-d9ae814b240d.png)

**æ“ä½œæ–¹æ³•**

å½’çº³ä¸ºå¢ã€åˆ ã€æ”¹ã€æŸ¥ï¼Œå­—ç¬¦ä¸²çš„ç‰¹ç‚¹æ˜¯ä¸€æ—¦åˆ›å»ºäº†ï¼Œå°±ä¸å¯å˜ã€‚

* å¢
  åˆ›å»ºå­—ç¬¦ä¸²çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œå†è¿›è¡Œæ“ä½œã€‚
  é™¤äº†å¸¸ç”¨`+`ä»¥åŠ`${}`è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ä¹‹å¤–ï¼Œè¿˜å¯é€šè¿‡`concat`ã€‚

  - `concat()` ç”¨äºå°†ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ä¸²æ‹¼æ¥æˆä¸€ä¸ªæ–°å­—ç¬¦ä¸²

    ```js
    let stringValue = "hello ";
    let result = stringValue.concat("world");
    console.log(result); // "hello world"
    console.log(stringValue); // "hello"
    ```

* åˆ 

  åˆ›å»ºå­—ç¬¦ä¸²çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œå†è¿›è¡Œæ“ä½œ.

  - slice()

  - substr()

  - substring()
    éƒ½è¿”å›è°ƒç”¨å®ƒä»¬çš„å­—ç¬¦ä¸²çš„ä¸€ä¸ªå­å­—ç¬¦ä¸²ï¼Œè€Œä¸”éƒ½æ¥æ”¶ä¸€æˆ–ä¸¤ä¸ªå‚æ•°ã€‚
    ä¸€ä¸ªå‚æ•°è¡¨ç¤ºæˆªå–ä»è¯¥ç´¢å¼•åˆ°æœ«å°¾ï¼Œä¸¤ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºæˆªå–è¯¥åŒºé—´å†…çš„å…ƒç´ ã€‚é™¤äº†`substr()`æ˜¯å·¦é—­å³é—­ï¼Œå…¶ä»–éƒ½æ˜¯å·¦é—­å³å¼€ã€‚

    ```js
    let stringValue = "hello world";
    console.log(stringValue.slice(3)); // "lo world"
    console.log(stringValue.substring(3)); // "lo world"
    console.log(stringValue.substr(3)); // "lo world"
    console.log(stringValue.slice(3, 7)); // "lo w"
    console.log(stringValue.substring(3,7)); // "lo w"
    console.log(stringValue.substr(3, 7)); // "lo worl"
    ```

* æ”¹

  ä¸æ˜¯æ”¹å˜åŸå­—ç¬¦ä¸²ï¼Œåˆ›å»ºå­—ç¬¦ä¸²çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œå†è¿›è¡Œæ“ä½œã€‚

  å¸¸è§çš„æœ‰ï¼š

  - trim()ã€trimLeft()ã€trimRight() åˆ é™¤å‰ã€åæˆ–å‰åæ‰€æœ‰ç©ºæ ¼ç¬¦ï¼Œå†è¿”å›æ–°çš„å­—ç¬¦ä¸²ï¼›â­æ³¨æ„ï¼Œåªå¤„ç†å‰åçš„ç©ºæ ¼ï¼Œä¸­é—´çš„ç©ºæ ¼ä¸å¤„ç†ã€‚

    ```js
    let stringValue = " hello world ";
    let trimmedStringValue = stringValue.trim();
    console.log(stringValue); // " hello world "
    console.log(trimmedStringValue); // "hello world"
    ```

  - repeat() æ¥æ”¶ä¸€ä¸ªæ•´æ•°å‚æ•°ï¼Œè¡¨ç¤ºè¦å°†å­—ç¬¦ä¸²å¤åˆ¶å¤šå°‘æ¬¡ï¼Œç„¶åè¿”å›æ‹¼æ¥æ‰€æœ‰å‰¯æœ¬åçš„ç»“æœ

    ```js
    let stringValue = "na ";
    let copyResult = stringValue.repeat(2) // na na 
    ```

  - padStart()ã€padEnd() å¤åˆ¶å­—ç¬¦ä¸²ï¼Œå¦‚æœå°äºæŒ‡å®šé•¿åº¦ï¼Œåˆ™åœ¨ç›¸åº”ä¸€è¾¹å¡«å……å­—ç¬¦ï¼Œç›´è‡³æ»¡è¶³é•¿åº¦æ¡ä»¶.

    ```js
    let stringValue = "foo";
    console.log(stringValue.padStart(6)); // " foo"
    console.log(stringValue.padStart(9, ".")); // "......foo"
    ```

  - toLowerCase()ã€ toUpperCase() å¤§å°å†™è½¬åŒ–

    ```js
    let stringValue = "hello world";
    console.log(stringValue.toUpperCase()); // "HELLO WORLD"
    console.log(stringValue.toLowerCase()); // "hello world"
    ```

* æŸ¥

  é™¤äº†é€šè¿‡ç´¢å¼•çš„æ–¹å¼è·å–å­—ç¬¦ä¸²çš„å€¼ï¼Œè¿˜å¯é€šè¿‡ï¼š

  - chatAt() è¿”å›ç»™å®šç´¢å¼•ä½ç½®çš„å­—ç¬¦ï¼Œç”±ä¼ ç»™æ–¹æ³•çš„æ•´æ•°å‚æ•°æŒ‡å®š

    ```js
    let message = "abcde";
    console.log(message.charAt(2)); // "c"
    ```

  - indexOf() ä»å­—ç¬¦ä¸²å¼€å¤´å»æœç´¢ä¼ å…¥çš„å­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ä½ç½®ï¼ˆå¦‚æœæ²¡æ‰¾åˆ°ï¼Œåˆ™è¿”å› -1 ï¼‰

    ```js
    let stringValue = "hello world";
    console.log(stringValue.indexOf("o")); // 4
    ```

  - startWith() æ£€æŸ¥æ˜¯å¦ä»¥æŒ‡å®šå­—ç¬¦ä¸²å¼€å¤´ã€‚

  - includes() ä»å­—ç¬¦ä¸²ä¸­æœç´¢ä¼ å…¥çš„å­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ä¸€ä¸ªè¡¨ç¤ºæ˜¯å¦åŒ…å«çš„å¸ƒå°”å€¼

    ```js
    let message = "foobarbaz";
    console.log(message.startsWith("foo")); // true
    console.log(message.startsWith("bar")); // false
    console.log(message.includes("bar")); // true
    console.log(message.includes("qux")); // false
    ```

**è½¬æ¢æ–¹æ³•**

`split` æŠŠå­—ç¬¦ä¸²æŒ‰ç…§æŒ‡å®šçš„åˆ†å‰²ç¬¦ï¼Œæ‹†åˆ†æˆæ•°ç»„ä¸­çš„æ¯ä¸€é¡¹

```js
let str = "12+23+34"
let arr = str.split("+") // [12,23,34]
```

**æ¨¡æ¿åŒ¹é…æ–¹æ³•**

é’ˆå¯¹æ­£åˆ™è¡¨è¾¾å¼ï¼Œå­—ç¬¦ä¸²è®¾è®¡äº†å‡ ä¸ªæ–¹æ³•ï¼š

- match() æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª`RegExp`å¯¹è±¡ï¼Œè¿”å›æ•°ç»„.

  ```js
  let text = "cat, bat, sat, fat";
  let pattern = /.at/;
  let matches = text.match(pattern);
  console.log(matches[0]); // "cat"
  ```

- search() æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª`RegExp`å¯¹è±¡ï¼Œæ‰¾åˆ°åˆ™è¿”å›åŒ¹é…ç´¢å¼•ï¼Œå¦åˆ™è¿”å› -1

  ```js
  let text = "cat, bat, sat, fat";
  let pos = text.search(/at/);
  console.log(pos); // 1
  ```

- replace() æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºåŒ¹é…çš„å†…å®¹ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºæ›¿æ¢çš„å…ƒç´ ï¼ˆå¯ç”¨å‡½æ•°ï¼‰;==æ›¿æ¢ç¬¬ä¸€ä¸ªå…ƒç´ ==

  ```js
  let text = "cat, bat, sat, fat";
  let result = text.replace("at", "ond");
  console.log(result); // "cond, bat, sat, fat"
  ```

### é—®é¢˜3ï¼šè°ˆè°ˆ JavaScript ä¸­çš„ç±»å‹è½¬æ¢æœºåˆ¶

![img](JsImg/2abd00a0-6692-11eb-85f6-6fac77c0c9b3.png)

**ä¸ºä»€ä¹ˆä¼šå‡ºç°ç±»å‹è½¬æ¢**

å£°æ˜çš„æ—¶å€™æ•°æ®ç±»å‹ä¸ç¡®å®šï¼Œåªæœ‰åˆ°è¿è¡ŒæœŸé—´æ‰ä¼šç¡®å®šå½“å‰ç±»å‹ã€‚

ä½†æ˜¯å„ç§è¿ç®—ç¬¦å¯¹æ•°æ®ç±»å‹æ˜¯æœ‰è¦æ±‚çš„ï¼Œå¦‚æœè¿ç®—ç¬¦çš„ç±»å‹ä¸é¢„æœŸä¸ç¬¦åˆï¼Œå°±ä¼šè§¦å‘ç±»å‹è½¬æ¢æœºåˆ¶ã€‚

å¸¸è§çš„ç±»å‹è½¬æ¢æœ‰ï¼š

- å¼ºåˆ¶è½¬æ¢ï¼ˆæ˜¾ç¤ºè½¬æ¢ï¼‰
- è‡ªåŠ¨è½¬æ¢ï¼ˆéšå¼è½¬æ¢ï¼‰

**æ˜¾ç¤ºè½¬æ¢**

å¸¸è§æ–¹æ³•`Number()`ã€`parseInt()`ã€`String()`ã€`Boolean()`ã€

- Number()

  å°†ä»»æ„ç±»å‹çš„å€¼è½¬åŒ–ä¸ºæ•°å€¼ã€‚

  è½¬æ¢è§„åˆ™

  ![img](JsImg/915b7300-6692-11eb-ab90-d9ae814b240d.png)

  ```js
  Number(324) // 324
  
  // å­—ç¬¦ä¸²ï¼šå¦‚æœå¯ä»¥è¢«è§£æä¸ºæ•°å€¼ï¼Œåˆ™è½¬æ¢ä¸ºç›¸åº”çš„æ•°å€¼
  Number('324') // 324
  
  // å­—ç¬¦ä¸²ï¼šå¦‚æœä¸å¯ä»¥è¢«è§£æä¸ºæ•°å€¼ï¼Œè¿”å› NaN
  Number('324abc') // NaN
  
  // ç©ºå­—ç¬¦ä¸²è½¬ä¸º0
  Number('') // 0
  
  // å¸ƒå°”å€¼ï¼štrue è½¬æˆ 1ï¼Œfalse è½¬æˆ 0
  Number(true) // 1
  Number(false) // 0
  
  // undefinedï¼šè½¬æˆ NaN
  Number(undefined) // NaN
  
  // nullï¼šè½¬æˆ0
  Number(null) // 0
  
  // å¯¹è±¡ï¼šé€šå¸¸è½¬æ¢æˆNaN(é™¤äº†åªåŒ…å«å•ä¸ªæ•°å€¼çš„æ•°ç»„)
  Number({a: 1}) // NaN
  Number([1, 2, 3]) // NaN
  Number([5]) // 5
  ```

  `Number`è½¬æ¢çš„æ—¶å€™æ˜¯å¾ˆä¸¥æ ¼çš„ï¼Œåªè¦æœ‰ä¸€ä¸ªå­—ç¬¦æ— æ³•è½¬æˆæ•°å€¼ï¼Œæ•´ä¸ªå­—ç¬¦ä¸²å°±ä¼šè¢«è½¬ä¸º`NaN`

- parseInt()

  `parseInt`ç›¸æ¯”`Number`ï¼Œå°±æ²¡é‚£ä¹ˆä¸¥æ ¼äº†ï¼Œ`parseInt`å‡½æ•°é€ä¸ªè§£æå­—ç¬¦ï¼Œé‡åˆ°ä¸èƒ½è½¬æ¢çš„å­—ç¬¦å°±åœä¸‹æ¥ã€‚

  ```js
  parseInt('32a3') //32
  ```

- String()

  å¯ä»¥å°†ä»»æ„ç±»å‹çš„å€¼è½¬åŒ–æˆå­—ç¬¦ä¸²ã€‚

  è½¬æ¢è§„åˆ™å›¾ï¼š

  ![img](JsImg/48dd8eb0-6692-11eb-85f6-6fac77c0c9b3.png)

  ```js
  // æ•°å€¼ï¼šè½¬ä¸ºç›¸åº”çš„å­—ç¬¦ä¸²
  String(1) // "1"
  
  //å­—ç¬¦ä¸²ï¼šè½¬æ¢åè¿˜æ˜¯åŸæ¥çš„å€¼
  String("a") // "a"
  
  //å¸ƒå°”å€¼ï¼štrueè½¬ä¸ºå­—ç¬¦ä¸²"true"ï¼Œfalseè½¬ä¸ºå­—ç¬¦ä¸²"false"
  String(true) // "true"
  
  //undefinedï¼šè½¬ä¸ºå­—ç¬¦ä¸²"undefined"
  String(undefined) // "undefined"
  
  //nullï¼šè½¬ä¸ºå­—ç¬¦ä¸²"null"
  String(null) // "null"
  
  //å¯¹è±¡
  String({a: 1}) // "[object Object]"
  String([1, 2, 3]) // "1,2,3"
  ```

- Boolean()

  å¯ä»¥å°†ä»»æ„ç±»å‹çš„å€¼è½¬ä¸ºå¸ƒå°”å€¼ï¼Œè½¬æ¢è§„åˆ™å¦‚ä¸‹ï¼š

  ![img](JsImg/53bdad10-6692-11eb-ab90-d9ae814b240d.png)

  ```js
  Boolean(undefined) // false
  Boolean(null) // false
  Boolean(0) // false
  Boolean(NaN) // false
  Boolean('') // false
  Boolean({}) // true
  Boolean([]) // true
  Boolean(new Boolean(false)) // true
  ```

**éšå¼è½¬æ¢**

ä¸¤ç§å‘ç”Ÿéšå¼è½¬æ¢çš„åœºæ™¯

- æ¯”è¾ƒè¿ç®—ï¼ˆ`==`ã€`!=`ã€`>`ã€`<`ï¼‰ã€`if`ã€`while`éœ€è¦å¸ƒå°”å€¼åœ°æ–¹
- ç®—æœ¯è¿ç®—ï¼ˆ`+`ã€`-`ã€`*`ã€`/`ã€`%`ï¼‰

é™¤äº†ä¸Šé¢çš„åœºæ™¯ï¼Œè¿˜è¦æ±‚è¿ç®—ç¬¦ä¸¤è¾¹çš„æ“ä½œæ•°ä¸æ˜¯åŒä¸€ç±»å‹

* **è‡ªåŠ¨è½¬æ¢ä¸ºå¸ƒå°”å€¼**

  åœ¨éœ€è¦å¸ƒå°”å€¼çš„åœ°æ–¹ï¼Œå°±ä¼šå°†éå¸ƒå°”å€¼çš„å‚æ•°è‡ªåŠ¨è½¬ä¸ºå¸ƒå°”å€¼ï¼Œç³»ç»Ÿå†…éƒ¨ä¼šè°ƒç”¨`Boolean`å‡½æ•°

  å¯ä»¥å¾—å‡ºä¸ªå°ç»“ï¼š

  - undefined
  - null
  - false
  - +0
  - -0
  - NaN
  - ""

  é™¤äº†ä¸Šé¢å‡ ç§ä¼šè¢«è½¬åŒ–æˆ`false`ï¼Œå…¶ä»–éƒ½æ¢è¢«è½¬åŒ–æˆ`true`

* **è‡ªåŠ¨è½¬æ¢æˆå­—ç¬¦ä¸²**

  å°±æ˜¯æ‹¼æ¥

  é‡åˆ°é¢„æœŸä¸ºå­—ç¬¦ä¸²çš„åœ°æ–¹ï¼Œå°±ä¼šå°†éå­—ç¬¦ä¸²çš„å€¼è‡ªåŠ¨è½¬ä¸ºå­—ç¬¦ä¸²

  ==å…·ä½“è§„åˆ™æ˜¯ï¼š==å…ˆå°†å¤åˆç±»å‹çš„å€¼è½¬ä¸ºåŸå§‹ç±»å‹çš„å€¼ï¼Œå†å°†åŸå§‹ç±»å‹çš„å€¼è½¬ä¸ºå­—ç¬¦ä¸²

  å¸¸å‘ç”Ÿåœ¨`+`è¿ç®—ä¸­ï¼Œä¸€æ—¦å­˜åœ¨å­—ç¬¦ä¸²ï¼Œåˆ™ä¼šè¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥æ“ä½œ

  ```js
  '5' + 1 // '51'
  '5' + true // "5true"
  '5' + false // "5false"
  '5' + {} // "5[object Object]"
  '5' + [] // "5"
  '5' + function (){} // "5function (){}"
  '5' + undefined // "5undefined"
  '5' + null // "5null"
  ```

* **è‡ªåŠ¨è½¬æ¢æˆæ•°å€¼**

  é™¤äº†`+`æœ‰å¯èƒ½æŠŠè¿ç®—å­è½¬ä¸ºå­—ç¬¦ä¸²ï¼Œå…¶ä»–è¿ç®—ç¬¦éƒ½ä¼šæŠŠè¿ç®—å­è‡ªåŠ¨è½¬æˆæ•°å€¼

  ```js
  '5' - '2' // 3
  '5' * '2' // 10
  true - 1  // 0
  false - 1 // -1
  '1' - 1   // 0
  '5' * []    // 0
  false / '5' // 0
  'abc' - 1   // NaN
  null + 1 // 1
  undefined + 1 // NaN
  ```

  `null`è½¬ä¸ºæ•°å€¼æ—¶ï¼Œå€¼ä¸º`0` ã€‚`undefined`è½¬ä¸ºæ•°å€¼æ—¶ï¼Œå€¼ä¸º`NaN`

### é—®é¢˜4ï¼š== å’Œ ===åŒºåˆ«ï¼Œåˆ†åˆ«åœ¨ä»€ä¹ˆæƒ…å†µä½¿ç”¨

![img](JsImg/51b208f0-68df-11eb-85f6-6fac77c0c9b3.png)

**ç­‰äºæ“ä½œç¬¦`==`**

æ“ä½œç¬¦ï¼ˆ`==`ï¼‰åœ¨æ¯”è¾ƒä¸­ä¼š==å…ˆè¿›è¡Œç±»å‹è½¬æ¢ï¼Œå†ç¡®å®šæ“ä½œæ•°æ˜¯å¦ç›¸ç­‰==ã€‚

éµå¾ªçš„è½¬æ¢è§„åˆ™ï¼š

å¦‚æœä»»ä¸€æ“ä½œæ•°æ˜¯å¸ƒå°”å€¼ï¼Œåˆ™å°†å…¶è½¬æ¢ä¸ºæ•°å€¼å†æ¯”è¾ƒæ˜¯å¦ç›¸ç­‰

```js
let result1 = (true == 1); // true
```

å¦‚æœä¸€ä¸ªæ“ä½œæ•°æ˜¯å­—ç¬¦ä¸²ï¼Œå¦ä¸€ä¸ªæ“ä½œæ•°æ˜¯æ•°å€¼ï¼Œåˆ™å°è¯•å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å€¼ï¼Œå†æ¯”è¾ƒæ˜¯å¦ç›¸ç­‰

```js
let result1 = ("55" == 55); // true
```

å¦‚æœä¸€ä¸ªæ“ä½œæ•°æ˜¯å¯¹è±¡ï¼Œå¦ä¸€ä¸ªæ“ä½œæ•°ä¸æ˜¯ï¼Œåˆ™è°ƒç”¨å¯¹è±¡çš„ `valueOf()`æ–¹æ³•å–å¾—å…¶åŸå§‹å€¼ï¼Œå†æ ¹æ®å‰é¢çš„è§„åˆ™è¿›è¡Œæ¯”è¾ƒ

```js
let obj = {valueOf:function(){return 1}}
let result1 = (obj == 1); // true
```

`null`å’Œ`undefined`ç›¸ç­‰

```js
let result1 = (null == undefined ); // true
```

å¦‚æœæœ‰ä»»ä¸€æ“ä½œæ•°æ˜¯ `NaN` ï¼Œåˆ™ç›¸ç­‰æ“ä½œç¬¦è¿”å› `false`

```js
let result1 = (NaN == NaN ); // false
```

å¦‚æœä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯å¯¹è±¡ï¼Œåˆ™æ¯”è¾ƒå®ƒä»¬æ˜¯ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚å¦‚æœä¸¤ä¸ªæ“ä½œæ•°éƒ½æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™ç›¸ç­‰æ“ä½œç¬¦è¿”å›`true`

```text
let obj1 = {name:"xxx"}
let obj2 = {name:"xxx"}
let result1 = (obj1 == obj2 ); // false
```

ä¸‹é¢è¿›ä¸€æ­¥åšä¸ªå°ç»“ï¼š

- ä¸¤ä¸ªéƒ½ä¸ºç®€å•ç±»å‹ï¼Œå­—ç¬¦ä¸²å’Œå¸ƒå°”å€¼éƒ½ä¼šè½¬æ¢æˆ==æ•°å€¼==ï¼Œå†æ¯”è¾ƒã€‚
- ç®€å•ç±»å‹ä¸å¼•ç”¨ç±»å‹æ¯”è¾ƒï¼Œå¯¹è±¡è½¬åŒ–æˆå…¶åŸå§‹ç±»å‹çš„å€¼ï¼Œå†æ¯”è¾ƒ
- ä¸¤ä¸ªéƒ½ä¸ºå¼•ç”¨ç±»å‹ï¼Œåˆ™æ¯”è¾ƒå®ƒä»¬æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡
- null å’Œ undefined ç›¸ç­‰
- å­˜åœ¨ NaN åˆ™è¿”å› fals

**å…¨ç­‰æ“ä½œç¬¦`===`**

å…¨ç­‰æ“ä½œç¬¦ç”± 3 ä¸ªç­‰äºå·ï¼ˆ `===` ï¼‰è¡¨ç¤ºï¼Œåªæœ‰ä¸¤ä¸ªæ“ä½œæ•°åœ¨ä¸è½¬æ¢çš„å‰æä¸‹ç›¸ç­‰æ‰è¿”å› `true`ã€‚å³ç±»å‹ç›¸åŒï¼Œå€¼ä¹Ÿéœ€ç›¸åŒã€‚==å…ˆå¯¹æ•°æ®ç±»å‹è¿›è¡Œåˆ¤æ–­å†å¯¹å€¼è¿›è¡Œ.==

```js
let result1 = ("55" === 55); // falseï¼Œä¸ç›¸ç­‰ï¼Œå› ä¸ºæ•°æ®ç±»å‹ä¸åŒ
let result2 = (55 === 55); // trueï¼Œç›¸ç­‰ï¼Œå› ä¸ºæ•°æ®ç±»å‹ç›¸åŒå€¼ä¹Ÿç›¸åŒ
```

`undefined` å’Œ `null` ä¸è‡ªèº«ä¸¥æ ¼ç›¸ç­‰

```js
let result1 = (null === null)  // true
let result2 = (undefined === undefined)  // true
```

```js
console.log(NaN === NaN) // false
```

**åŒºåˆ« **

* ç›¸ç­‰æ“ä½œç¬¦ï¼ˆ`==`ï¼‰ä¼šåšç±»å‹è½¬æ¢ï¼Œå†è¿›è¡Œå€¼çš„æ¯”è¾ƒï¼Œå…¨ç­‰è¿ç®—ç¬¦ä¸ä¼šåšç±»å‹è½¬æ¢

```js
let result1 = ("55" === 55); // falseï¼Œä¸ç›¸ç­‰ï¼Œå› ä¸ºæ•°æ®ç±»å‹ä¸åŒ
let result2 = (55 === 55); // trueï¼Œç›¸ç­‰ï¼Œå› ä¸ºæ•°æ®ç±»å‹ç›¸åŒå€¼ä¹Ÿç›¸åŒ
```

* `null` å’Œ `undefined` æ¯”è¾ƒä¸åŒï¼Œç›¸ç­‰æ“ä½œç¬¦ï¼ˆ==ï¼‰ä¸º`true`ï¼Œå…¨ç­‰ä¸º`false`.

```
let result1 = (null == undefined ); // true
let result2 = (null  === undefined); // false
```

**å°ç»“**

å»ºè®®é™¤äº†åœ¨æ¯”è¾ƒå¯¹è±¡å±æ€§ä¸º`null`æˆ–è€…`undefined`çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç›¸ç­‰æ“ä½œç¬¦ï¼ˆ`==`ï¼‰ï¼Œå…¶ä»–æƒ…å†µå»ºè®®ä¸€å¾‹ä½¿ç”¨å…¨ç­‰æ“ä½œç¬¦ï¼ˆ`===`ï¼‰ã€‚

### é—®é¢˜5ï¼š æ·±æ‹·è´æµ…æ‹·è´çš„åŒºåˆ«ï¼Ÿå¦‚ä½•å®ç°ä¸€ä¸ªæ·±æ‹·è´ï¼Ÿ

![img](JsImg/cdf952e0-69b8-11eb-85f6-6fac77c0c9b3.png)

**æ•°æ®ç±»å‹å­˜å‚¨**

ä¸¤å¤§æ•°æ®ç±»å‹ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹å­˜æ”¾åœ¨æ ˆå†…å­˜ä¸­ï¼Œå­˜æ”¾çš„å°±æ˜¯å€¼ï¼›è€Œå¼•ç”¨æ•°æ®ç±»å‹å­˜æ”¾åœ¨å †å†…å­˜ä¸­ï¼Œæ ˆå†…å­˜ä¸­å­˜æ”¾ä¸­å¼•ç”¨å †å†…å­˜å®é™…å¯¹è±¡çš„å¼•ç”¨åœ°å€å€¼ï¼ŒæŒ‡å‘å †å†…å­˜ã€‚

**æµ…æ‹·è´**

æµ…æ‹·è´ï¼ŒæŒ‡çš„æ˜¯åˆ›å»ºæ–°çš„æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®æœ‰ç€åŸå§‹æ•°æ®å±æ€§å€¼çš„ä¸€ä»½ç²¾ç¡®æ‹·è´

å¦‚æœ==å±æ€§æ˜¯åŸºæœ¬ç±»å‹ï¼Œæ‹·è´çš„å°±æ˜¯åŸºæœ¬ç±»å‹çš„å€¼==ã€‚å¦‚æœ==å±æ€§æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‹·è´çš„å°±æ˜¯å†…å­˜åœ°å€==ã€‚

å³æµ…æ‹·è´æ˜¯æ‹·è´ä¸€å±‚ï¼Œæ·±å±‚æ¬¡çš„å¼•ç”¨ç±»å‹åˆ™å…±äº«å†…å­˜åœ°å€ã€‚

* å®ç°ä¸€ä¸ªç®€å•çš„å¯¹è±¡æµ…æ‹·è´

  ```js
  function shallowClone(obj){
    const newObj = new ();
    for(let prop in obj){
      if(obj.hasProperty(prop)){
        newObj[prop] = obj[prop]
      }
    }
    return newObj;
  }
  ```

åœ¨`JavaScript`ä¸­ï¼Œå­˜åœ¨æµ…æ‹·è´çš„ç°è±¡æœ‰ï¼š

1. `Object.assign`
2. `Array.prototype.slice()`, `Array.prototype.concat()`
3. ä½¿ç”¨æ‹“å±•è¿ç®—ç¬¦å®ç°çš„å¤åˆ¶ã€‚

- `Object.assign(target, source)`

  å°†å¯æšä¸¾å’Œè‡ªæœ‰å±æ€§ä»ä¸€ä¸ªæˆ–å¤šä¸ªæºå¯¹è±¡å¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ã€‚---ã€‹æºå¯¹è±¡æ˜¯æˆ‘ä»¬è¦æ‹·è´çš„å¯¹è±¡ã€‚
  å¦‚æœç›®æ ‡å¯¹è±¡ä¸æºå¯¹è±¡keyå€¼ï¼ˆå±æ€§å€¼ï¼‰ç›¸åŒï¼Œåˆ™æŠŠæºå¯¹è±¡çš„å±æ€§è¦†ç›–æ‰ç›®æ ‡å¯¹è±¡çš„å±æ€§ã€‚--ã€‹ç›¸åŒå±æ€§å°±æ›¿æ¢ã€‚

  `Object.assign()` åªå¤åˆ¶å±æ€§å€¼ï¼Œå¯¹äºå¼•ç”¨ç±»å‹ï¼Œå¦‚æœæŠŠæºå¯¹è±¡å †å†…å­˜ä¸­çš„å†…å®¹æ”¹å˜ï¼Œæ‰€å¤åˆ¶åˆ°çš„ç›®æ ‡å¯¹è±¡å€¼ä¹Ÿä¼šæ”¹å˜ã€‚â­ï¼Ÿï¼Ÿï¼Ÿä¼šæ”¹å˜å—ï¼Ÿï¼Ÿï¼Ÿ==ä¿®æ”¹å¯¹è±¡å±æ€§ä¼šå½±å“åŸå¯¹è±¡==

  ```js
  // æµ…æ‹·è´ æ•°å€¼ã€æ•°ç»„ã€å¯¹è±¡ã€å‡½æ•°
  var obj = {
    num: 5,
    arr:[1, 2, 3],
    object:{
      name:bob,
      age:5
    },
    fun:function(){
      console.log('å±æ€§å€¼æ˜¯ä¸€ä¸ªå‡½æ•°')
    }
  }
  var newObj = Object.assign({}, obj) // æŠŠæºå¯¹è±¡objæµ…æ‹·è´ç»™{}
  ```

- `Array.prototype.slice()`æ³•è¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„å¯¹è±¡ï¼Œè¿™ä¸€å¯¹è±¡æ˜¯ä¸€ä¸ªç”± `begin` å’Œ `end` å†³å®šçš„åŸæ•°ç»„çš„**æµ…æ‹·è´**ï¼ˆåŒ…æ‹¬ `begin`ï¼Œä¸åŒ…æ‹¬`end`ï¼‰ã€‚åŸå§‹æ•°ç»„ä¸ä¼šè¢«æ”¹å˜ã€‚--ã€‹å°±æ˜¯æˆªå–åŸæ•°ç»„çš„ä¸€æ®µæ–°ç”Ÿæˆä¸€ä¸ªæµ…æ‹·è´çš„æ•°ç»„ã€‚

  æ¥æ”¶ä¸¤ä¸ªå‚æ•°

  ```js
  const animals = ['ant', 'bison', 'camel', 'duck', 'elephant'];
  
  console.log(animals.slice(2));
  // expected output: Array ["camel", "duck", "elephant"]
  console.log(animals.slice(2, 4));
  // expected output: Array ["camel", "duck"]
  ```

- `Array.prototype.concat()` ç”¨äºåˆå¹¶ä¸¤ä¸ªæˆ–å¤šä¸ªæ•°ç»„ã€‚æ­¤æ–¹æ³•ä¸ä¼šæ›´æ”¹ç°æœ‰æ•°ç»„ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ã€‚

  ```js
  const array1 = ['a', 'b', 'c'];
  const array2 = ['d', 'e', 'f'];
  const array3 = array1.concat(array2);
  
  console.log(array3);
  // expected output: Array ["a", "b", "c", "d", "e", "f"]
  ```

- æ‰©å±•è¿ç®—ç¬¦`...`  

  - è¿ç®—ç¬¦å°†ä¸€ä¸ªæ•°ç»„ï¼Œå˜ä¸ºå‚æ•°åºåˆ—ã€‚

  - æ›¿ä»£apply()å°†æ•°ç»„è½¬ä¸ºå‡½æ•°çš„å‚æ•°

    ```js
    const arr = [html, css, js]
    const newArr = [...arr, react]
    console.log(newArr) // [html, css, js, react]
    ```

**æ·±æ‹·è´**

æ·±æ‹·è´å¼€è¾Ÿä¸€ä¸ªæ–°çš„æ ˆï¼Œä¸¤ä¸ªå¯¹è±¡å±æ€§å®Œå…¨ç›¸åŒï¼Œä½†æ˜¯å¯¹åº”ä¸¤ä¸ªä¸åŒçš„åœ°å€ï¼Œä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œä¸ä¼šæ”¹å˜å¦ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ã€‚

å¸¸è§çš„æ·±æ‹·è´æ–¹å¼æœ‰ï¼š

1. _.cloneDeep()
2. JSON.stringify()
3. æ‰‹å†™å¾ªç¯é€’å½’

* _.cloneDeep()

  ```js
  const _ = require('lodash');
  const obj1 = {
      a: 1,
      b: { f: { g: 1 } },
      c: [1, 2, 3]
  };
  const obj2 = _.cloneDeep(obj1);
  console.log(obj1.b.f === obj2.b.f);// false
  ```

- JSON.stringify()

  - ä¸æ”¯æŒ Symbolï¼ŒBigIntï¼ŒFunctionï¼›å¿½ç•¥`undefined`ã€`symbol`å’Œ`å‡½æ•°`
  - ä¸æ”¯æŒ å¾ªç¯å¼•ç”¨
  - ä¸¢å¤±å€¼ä¸º undefined çš„é”®

  ```js
  const obj2=JSON.parse(JSON.stringify(obj1));
  ```

  ```js
  const obj = {
      name: 'A',
      name1: undefined,
      name3: function() {},
      name4:  Symbol('A')
  }
  const obj2 = JSON.parse(JSON.stringify(obj));
  console.log(obj2); // {name: "A"}
  ```

- å¾ªç¯é€’å½’

  ```js
  function deepClone(obj, hash = new WeakMap()) {
    if (obj === null) return obj; // å¦‚æœæ˜¯nullæˆ–è€…undefinedæˆ‘å°±ä¸è¿›è¡Œæ‹·è´æ“ä½œ
    if (obj instanceof Date) return new Date(obj);
    if (obj instanceof RegExp) return new RegExp(obj);
    // å¯èƒ½æ˜¯å¯¹è±¡æˆ–è€…æ™®é€šçš„å€¼  å¦‚æœæ˜¯å‡½æ•°çš„è¯æ˜¯ä¸éœ€è¦æ·±æ‹·è´
    if (typeof obj !== "object") return obj;
    // æ˜¯å¯¹è±¡çš„è¯å°±è¦è¿›è¡Œæ·±æ‹·è´
    if (hash.get(obj)) return hash.get(obj);
    let cloneObj = new obj.constructor();
    // æ‰¾åˆ°çš„æ˜¯æ‰€å±ç±»åŸå‹ä¸Šçš„constructor,è€ŒåŸå‹ä¸Šçš„ constructoræŒ‡å‘çš„æ˜¯å½“å‰ç±»æœ¬èº«
    hash.set(obj, cloneObj);
    for (let key in obj) {
      if (obj.hasOwnProperty(key)) {
        // å®ç°ä¸€ä¸ªé€’å½’æ‹·è´
        cloneObj[key] = deepClone(obj[key], hash);
      }
    }
    return cloneObj;
  }
  ```



**åŒºåˆ«**

![img](JsImg/d9862c00-69b8-11eb-ab90-d9ae814b240d.png)

- æµ…æ‹·è´åªå¤åˆ¶å±æ€§æŒ‡å‘æŸä¸ªå¯¹è±¡çš„æŒ‡é’ˆï¼Œè€Œä¸å¤åˆ¶å¯¹è±¡æœ¬èº«ï¼Œæ–°æ—§å¯¹è±¡è¿˜æ˜¯å…±äº«åŒä¸€å—å†…å­˜ï¼Œä¿®æ”¹å¯¹è±¡å±æ€§ä¼šå½±å“åŸå¯¹è±¡
- æ·±æ‹·è´ä¼šå¦å¤–åˆ›é€ ä¸€ä¸ªä¸€æ¨¡ä¸€æ ·çš„å¯¹è±¡ï¼Œæ–°å¯¹è±¡è·ŸåŸå¯¹è±¡ä¸å…±äº«å†…å­˜ï¼Œä¿®æ”¹æ–°å¯¹è±¡ä¸ä¼šæ”¹åˆ°åŸå¯¹è±¡

**å°ç»“**

å‰æä¸ºæ‹·è´ç±»å‹ä¸ºå¼•ç”¨ç±»å‹çš„æƒ…å†µä¸‹ï¼š

- æµ…æ‹·è´æ˜¯æ‹·è´ä¸€å±‚ï¼Œå±æ€§ä¸ºå¯¹è±¡æ—¶ï¼Œæµ…æ‹·è´æ˜¯å¤åˆ¶ï¼Œä¸¤ä¸ªå¯¹è±¡æŒ‡å‘åŒä¸€ä¸ªåœ°å€
- æ·±æ‹·è´æ˜¯é€’å½’æ‹·è´æ·±å±‚æ¬¡ï¼Œå±æ€§ä¸ºå¯¹è±¡æ—¶ï¼Œæ·±æ‹·è´æ˜¯æ–°å¼€æ ˆï¼Œä¸¤ä¸ªå¯¹è±¡æŒ‡å‘ä¸åŒçš„åœ°å€

### é—®é¢˜6ï¼šè¯´è¯´ä½ å¯¹é—­åŒ…çš„ç†è§£ï¼Ÿé—­åŒ…ä½¿ç”¨åœºæ™¯

é—­åŒ…å°±æ˜¯ä¸ºäº†ä¿æŠ¤æ–¹æ³•ï¼Œä¸å‘å¤–æš´éœ²

![img](../../../../é¡¹ç›®/Serverlessä¸ªäººåšå®¢/blogImg/c141a030-6a7a-11eb-ab90-d9ae814b240d-1655434927273.png)

**æ˜¯ä»€ä¹ˆ**

ä¸€ä¸ªå‡½æ•°å’Œå¯¹å…¶å‘¨å›´çŠ¶æ€ï¼ˆlexical environmentï¼Œè¯æ³•ç¯å¢ƒï¼‰çš„å¼•ç”¨æ†ç»‘åœ¨ä¸€èµ·ï¼ˆæˆ–è€…è¯´å‡½æ•°è¢«å¼•ç”¨åŒ…å›´ï¼‰ï¼Œè¿™æ ·çš„ç»„åˆå°±æ˜¯é—­åŒ…ï¼ˆclosureï¼‰

ä¹Ÿå°±æ˜¯è¯´ï¼Œé—­åŒ…è®©ä½ å¯ä»¥åœ¨ä¸€ä¸ªå†…å±‚å‡½æ•°ä¸­è®¿é—®åˆ°å…¶å¤–å±‚å‡½æ•°çš„ä½œç”¨åŸŸ

åœ¨ `JavaScript`ä¸­ï¼Œæ¯å½“åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œé—­åŒ…å°±ä¼šåœ¨å‡½æ•°åˆ›å»ºçš„åŒæ—¶è¢«åˆ›å»ºå‡ºæ¥ï¼Œä½œä¸ºå‡½æ•°å†…éƒ¨ä¸å¤–éƒ¨è¿æ¥èµ·æ¥çš„ä¸€åº§æ¡¥æ¢ã€‚

ğŸ¦ˆ

é—­åŒ…æŒ‡çš„æ˜¯é‚£äº›å¼•ç”¨äº†å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„å‡½æ•°ã€‚

1. å¦‚ä½•äº§ç”Ÿé—­åŒ…?

- å½“ä¸€ä¸ªåµŒå¥—çš„å†…éƒ¨(å­)å‡½æ•°å¼•ç”¨äº†åµŒå¥—çš„å¤–éƒ¨(çˆ¶)å‡½æ•°çš„å˜é‡(å‡½æ•°)æ—¶, å°±äº§ç”Ÿäº†é—­åŒ…

2. é—­åŒ…åˆ°åº•æ˜¯ä»€ä¹ˆ?

- ä½¿ç”¨chromeè°ƒè¯•æŸ¥çœ‹
  - ç†è§£ä¸€: é—­åŒ…æ˜¯åµŒå¥—çš„å†…éƒ¨å‡½æ•°(ç»å¤§éƒ¨åˆ†äºº)
  - ç†è§£äºŒ: åŒ…å«è¢«å¼•ç”¨å˜é‡(å‡½æ•°)çš„å¯¹è±¡(æå°‘æ•°äºº)
  - æ³¨æ„: é—­åŒ…å­˜åœ¨äºåµŒå¥—çš„å†…éƒ¨å‡½æ•°ä¸­

3. äº§ç”Ÿé—­åŒ…çš„æ¡ä»¶?

- å‡½æ•°åµŒå¥—

- å†…éƒ¨å‡½æ•°å¼•ç”¨äº†å¤–éƒ¨å‡½æ•°çš„æ•°æ®(å˜é‡/å‡½æ•°) 

ä¸‹é¢ç»™å‡ºä¸€ä¸ªç®€å•çš„ä¾‹å­

```js
function init() {
    var name = "Mozilla"; // name æ˜¯ä¸€ä¸ªè¢« init åˆ›å»ºçš„å±€éƒ¨å˜é‡
    function displayName() { // displayName() æ˜¯å†…éƒ¨å‡½æ•°ï¼Œä¸€ä¸ªé—­åŒ…
        alert(name); // ä½¿ç”¨äº†çˆ¶å‡½æ•°ä¸­å£°æ˜çš„å˜é‡
    }
    displayName();
}
init();
```

`displayName()` æ²¡æœ‰è‡ªå·±çš„å±€éƒ¨å˜é‡ã€‚ç„¶è€Œï¼Œç”±äºé—­åŒ…çš„ç‰¹æ€§ï¼Œå®ƒå¯ä»¥è®¿é—®åˆ°å¤–éƒ¨å‡½æ•°çš„å˜é‡ã€‚

**ä½¿ç”¨åœºæ™¯**

ä»»ä½•é—­åŒ…çš„ä½¿ç”¨åœºæ™¯éƒ½ç¦»ä¸å¼€è¿™ä¸¤ç‚¹ï¼š

- åˆ›å»ºç§æœ‰å˜é‡
- å»¶é•¿å˜é‡çš„ç”Ÿå‘½å‘¨æœŸ

> ä¸€èˆ¬å‡½æ•°çš„è¯æ³•ç¯å¢ƒåœ¨å‡½æ•°è¿”å›åå°±è¢«é”€æ¯ï¼Œä½†æ˜¯é—­åŒ…ä¼šä¿å­˜å¯¹åˆ›å»ºæ—¶æ‰€åœ¨è¯æ³•ç¯å¢ƒçš„å¼•ç”¨ï¼Œå³ä¾¿åˆ›å»ºæ—¶æ‰€åœ¨çš„æ‰§è¡Œä¸Šä¸‹æ–‡è¢«é”€æ¯ï¼Œä½†åˆ›å»ºæ—¶æ‰€åœ¨è¯æ³•ç¯å¢ƒä¾ç„¶å­˜åœ¨ï¼Œä»¥è¾¾åˆ°å»¶é•¿å˜é‡çš„ç”Ÿå‘½å‘¨æœŸçš„ç›®çš„ã€‚

ä¸‹é¢ä¸¾ä¸ªä¾‹å­ï¼š

åœ¨é¡µé¢ä¸Šæ·»åŠ ä¸€äº›å¯ä»¥è°ƒæ•´å­—å·çš„æŒ‰é’®

```js
function makeSizer(size) {
  return function() {
    document.body.style.fontSize = size + 'px';
  };
}

var size12 = makeSizer(12);
var size14 = makeSizer(14);
var size16 = makeSizer(16);

document.getElementById('size-12').onclick = size12;
document.getElementById('size-14').onclick = size14;
document.getElementById('size-16').onclick = size16;
```

* **æŸ¯é‡ŒåŒ–å‡½æ•°**

  é«˜é˜¶å‡½æ•°ï¼šä¸€ä¸ªå‡½æ•°å¯ä»¥æ¥æ”¶å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ã€‚

  æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰æ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œå‡½æ•°æ‰§è¡Œäº§ç”Ÿä¸€ä¸ªé—­åŒ…ï¼ŒæŠŠä¸€äº›ä¿¡æ¯é¢„å…ˆå­˜å‚¨èµ·æ¥ï¼Œç›®çš„æ˜¯ä¾›ä¸‹çº§ä¸Šä¸‹æ–‡ä½¿ç”¨ã€‚è¿™æ ·é¢„å…ˆå­˜å‚¨å’Œå¤„ç†çš„æ€æƒ³ï¼Œå°±å«åšæŸ¯é‡ŒåŒ–çš„ç¼–ç¨‹æ€æƒ³ã€‚

  ç®€å•æ¥è¯´å°±æ˜¯åªä¼ é€’ç»™å‡½æ•°ä¸€éƒ¨åˆ†å‚æ•°æ¥è°ƒç”¨å®ƒï¼Œè®©å®ƒ==è¿”å›ä¸€ä¸ªå‡½æ•°==å»å¤„ç†å‰©ä¸‹çš„å‚æ•°ã€‚

  ```js
  // å®šä¹‰äº†ä¸€ä¸ªæŸ¯é‡ŒåŒ–å‡½æ•°ï¼Œå½“ä¼ å…¥å‚æ•°æ—¶ï¼Œä¼šè¿”å›ä¸€ä¸ªè®°å½•widthçš„heightå‡½æ•°
  function getArea(width) {
    return height => {
      return width * height
    }
  }
  
  // è°ƒç”¨getAreaå‡½æ•°è¿”å›ä¸€ä¸ªå‡½æ•°ç»™getWidthAreaï¼Œå…¶ä¸­è®°å½•ç€ä¼ å…¥çš„widthå‚æ•°
  const getWidthArea = getArea(10)
  
  // getWidthAreaå‡½æ•°åˆæ¥æ”¶ä¸€ä¸ªheightå‚æ•°
  const areaRes = getWidthArea(20)//
  console.log(areaRes); // 200
  ```

  æŸ¯é‡ŒåŒ–å‡½æ•°é¢è¯•é¢˜

  add(1)(2)(3)(4)(5)(6); // => 21
  add(1, 2)(3, 4)(5, 6); // => 21
  add(1, 2, 3, 4, 5, 6); // => 21

  [ç­”æ¡ˆ](https://juejin.cn/post/7086393986780233736#comment)

  ```js
  var curring = () => {
    var result = [];
    var add = (...args) => {
      result = result.concat(args);
      return add;
    };
  
    add.valueOf = add.toString = () => {
      return result.reduce((pre, cur) => pre + cur, 0);
    }
    return add;
  };
  
  var add = curring();
  console.log(+add(1)(2)(3)(4)(5)(6));
  
  add = curring();
  console.log(+add(1, 2)(3, 4)(5, 6));
  
  add = curring();
  console.log(+add(1, 2, 3, 4, 5, 6));
  ```

* **ä½¿ç”¨é—­åŒ…æ¨¡æ‹Ÿç§æœ‰æ–¹æ³•**

  å°±æ˜¯å®šä¹‰JSæ¨¡å—

  - å…·æœ‰ç‰¹å®šåŠŸèƒ½çš„jsæ–‡ä»¶
  - å°†æ‰€æœ‰çš„æ•°æ®å’ŒåŠŸèƒ½éƒ½å°è£…åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨(ç§æœ‰çš„)
  - åªå‘å¤–æš´éœ²ä¸€ä¸ªåŒ…å«nä¸ªæ–¹æ³•çš„å¯¹è±¡æˆ–å‡½æ•°
  - æ¨¡å—çš„ä½¿ç”¨è€…, åªéœ€è¦é€šè¿‡æ¨¡å—æš´éœ²çš„å¯¹è±¡è°ƒç”¨æ–¹æ³•æ¥å®ç°å¯¹åº”çš„åŠŸèƒ½

  ä¸¤ç§å®šä¹‰æ–¹æ³•ï¼šä¸€æ˜¯å®šä¹‰jsæ–‡ä»¶ï¼ŒäºŒæ˜¯å®šä¹‰åŒ¿åè‡ªè°ƒç”¨å‡½æ•°

  ```js
  function makeCounter() {
    var privateCounter = 0;
    function changeBy(val) {
      privateCounter += val;
    }
    return {
      increment: function() {
        changeBy(1);
      },
      decrement: function() {
        changeBy(-1);
      },
      value: function() {
        return privateCounter;
      }
    }
  }
  
  var Counter1 = makeCounter();
  var Counter2 = makeCounter();
  console.log(Counter1.value()); /* logs 0 */
  Counter1.increment();
  Counter1.increment();
  console.log(Counter1.value()); /* logs 2 */
  Counter1.decrement();
  console.log(Counter1.value()); /* logs 1 */
  console.log(Counter2.value()); /* logs 0 */
  ```

**æ³¨æ„äº‹é¡¹**

å¦‚æœä¸æ˜¯æŸäº›ç‰¹å®šä»»åŠ¡éœ€è¦ä½¿ç”¨é—­åŒ…ï¼Œåœ¨å…¶å®ƒå‡½æ•°ä¸­åˆ›å»ºå‡½æ•°æ˜¯ä¸æ˜æ™ºçš„ï¼Œå› ä¸ºé—­åŒ…åœ¨å¤„ç†é€Ÿåº¦å’Œå†…å­˜æ¶ˆè€—æ–¹é¢å¯¹è„šæœ¬æ€§èƒ½å…·æœ‰è´Ÿé¢å½±å“ã€‚

ä¾‹å¦‚ï¼Œåœ¨åˆ›å»ºæ–°çš„å¯¹è±¡æˆ–è€…ç±»æ—¶ï¼Œ==æ–¹æ³•é€šå¸¸åº”è¯¥å…³è”äºå¯¹è±¡çš„åŸå‹ï¼Œè€Œä¸æ˜¯å®šä¹‰åˆ°å¯¹è±¡çš„æ„é€ å™¨ä¸­ã€‚åŸå› åœ¨äºæ¯ä¸ªå¯¹è±¡çš„åˆ›å»ºï¼Œæ–¹æ³•éƒ½ä¼šè¢«é‡æ–°èµ‹å€¼==ã€‚

```js
function MyObject(name, message) {
  this.name = name.toString();
  this.message = message.toString();
  this.getName = function() {
    return this.name;
  };

  this.getMessage = function() {
    return this.message;
  };
}
```

ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰åˆ©ç”¨åˆ°é—­åŒ…çš„å¥½å¤„ï¼Œå› æ­¤å¯ä»¥é¿å…ä½¿ç”¨é—­åŒ…ã€‚ä¿®æ”¹æˆå¦‚ä¸‹ï¼š

```js
function MyObject(name, message) {
  this.name = name.toString();
  this.message = message.toString();
}
MyObject.prototype.getName = function() {
  return this.name;
};
MyObject.prototype.getMessage = function() {
  return this.message;
};
```



è¯æ³•ç¯å¢ƒä¸­ä¿å­˜ç€å±€éƒ¨å˜é‡nameã€‚

ç§æœ‰æ–¹æ³•ï¼šä¾‹å¦‚Javaä¸­ï¼Œç§æœ‰æ–¹æ³•åªèƒ½è¢«åŒä¸€ä¸ªç±»ä¸­çš„å…¶ä»–æ–¹æ³•è°ƒç”¨ã€‚

ç§æœ‰æ–¹æ³•ä¼˜ç‚¹ï¼šç§æœ‰æ–¹æ³•ä¸ä»…ä»…æœ‰åˆ©äºé™åˆ¶å¯¹ä»£ç çš„è®¿é—®ï¼šè¿˜æä¾›äº†ç®¡ç†å…¨å±€å‘½åç©ºé—´çš„å¼ºå¤§èƒ½åŠ›ï¼Œé¿å…éæ ¸å¿ƒçš„æ–¹æ³•å¼„ä¹±äº†ä»£ç çš„å…¬å…±æ¥å£éƒ¨åˆ†ã€‚

æ¯æ¬¡è°ƒç”¨æœ€å¤–é¢çš„å‡½æ•°éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„é—­åŒ…ï¼Œå¹¶ä¸”æœ‰è‡ªå·±çš„ä¸€ä¸ªè¯æ³•ç¯å¢ƒã€‚æ¯ä¸ªé—­åŒ…éƒ½æ˜¯å¼•ç”¨è‡ªå·±è¯æ³•ä½œç”¨åŸŸå†…çš„å˜é‡ ã€‚

### é—®é¢˜7ï¼šè¯´è¯´ä½ å¯¹ä½œç”¨åŸŸé“¾çš„ç†è§£

![img](../../../../é¡¹ç›®/Serverlessä¸ªäººåšå®¢/blogImg/16f614a0-718f-11eb-ab90-d9ae814b240d.png)

ğŸ¦ˆä»€ä¹ˆæ˜¯ä½œç”¨åŸŸé“¾å¢å¼ºï¼Ÿï¼Ÿï¼Ÿ

**ä½œç”¨åŸŸ**

ä½œç”¨åŸŸï¼Œå³å˜é‡ï¼ˆå˜é‡ä½œç”¨åŸŸåˆç§°ä¸Šä¸‹æ–‡ï¼‰å’Œå‡½æ•°ç”Ÿæ•ˆï¼ˆèƒ½è¢«è®¿é—®ï¼‰çš„åŒºåŸŸæˆ–é›†åˆ

æ¢å¥è¯è¯´ï¼Œä½œç”¨åŸŸå†³å®šäº†ä»£ç åŒºå—ä¸­å˜é‡å’Œå…¶ä»–èµ„æºçš„å¯è§æ€§

ä¸¾ä¸ªä¾‹å­

```js
function myFunction() {
    let inVariable = "å‡½æ•°å†…éƒ¨å˜é‡";
}
myFunction();//è¦å…ˆæ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œå¦åˆ™æ ¹æœ¬ä¸çŸ¥é“é‡Œé¢æ˜¯å•¥
console.log(inVariable); // Uncaught ReferenceError: inVariable is not defined
```

ä¸Šè¿°ä¾‹å­ä¸­ï¼Œå‡½æ•°`myFunction`å†…éƒ¨åˆ›å»ºä¸€ä¸ª`inVariable`å˜é‡ï¼Œå½“æˆ‘ä»¬åœ¨å…¨å±€è®¿é—®è¿™ä¸ªå˜é‡çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šæŠ¥é”™

è¿™å°±è¯´æ˜æˆ‘ä»¬åœ¨å…¨å±€æ˜¯æ— æ³•è·å–åˆ°ï¼ˆé—­åŒ…é™¤å¤–ï¼‰å‡½æ•°å†…éƒ¨çš„å˜é‡

æˆ‘ä»¬ä¸€èˆ¬å°†ä½œç”¨åŸŸåˆ†æˆï¼š

- å…¨å±€ä½œç”¨åŸŸ
- å‡½æ•°ä½œç”¨åŸŸ
- å—çº§ä½œç”¨åŸŸ



- **å…¨å±€ä½œç”¨åŸŸ**

ä»»ä½•ä¸åœ¨å‡½æ•°ä¸­æˆ–æ˜¯å¤§æ‹¬å·ä¸­å£°æ˜çš„å˜é‡ï¼Œéƒ½æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹ï¼Œå…¨å±€ä½œç”¨åŸŸä¸‹å£°æ˜çš„å˜é‡å¯ä»¥åœ¨ç¨‹åºçš„ä»»æ„ä½ç½®è®¿é—®

```js
// å…¨å±€å˜é‡
var greeting = 'Hello World!';
function greet() {
  console.log(greeting);
}
// æ‰“å° 'Hello World!'
greet();
```

- **å‡½æ•°ä½œç”¨åŸŸ**

å‡½æ•°ä½œç”¨åŸŸä¹Ÿå«å±€éƒ¨ä½œç”¨åŸŸï¼Œå¦‚æœä¸€ä¸ªå˜é‡æ˜¯åœ¨å‡½æ•°å†…éƒ¨å£°æ˜çš„å®ƒå°±åœ¨ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸‹é¢ã€‚è¿™äº›å˜é‡åªèƒ½åœ¨å‡½æ•°å†…éƒ¨è®¿é—®ï¼Œä¸èƒ½åœ¨å‡½æ•°ä»¥å¤–å»è®¿é—®

```js
function greet() {
  var greeting = 'Hello World!';
  console.log(greeting);
}
// æ‰“å° 'Hello World!'
greet();
// æŠ¥é”™ï¼š Uncaught ReferenceError: greeting is not defined
console.log(greeting);
```

å¯è§ä¸Šè¿°ä»£ç ä¸­åœ¨å‡½æ•°å†…éƒ¨å£°æ˜çš„å˜é‡æˆ–å‡½æ•°ï¼Œåœ¨å‡½æ•°å¤–éƒ¨æ˜¯æ— æ³•è®¿é—®çš„ï¼Œè¿™è¯´æ˜åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡æˆ–è€…æ–¹æ³•åªæ˜¯å‡½æ•°ä½œç”¨åŸŸ

- **å—çº§ä½œç”¨åŸŸ**

  å‡½æ•°å—æ˜¯æŒ‡è¢«å¤§æ‹¬å· ("{}") åŒ…è£¹ä½çš„ç›¸å…³è”çš„é›†åˆï¼›ä¾‹å¦‚ifè¯­å¥åå°±æ˜¯ä¸€ä¸ªå—ä½œç”¨åŸŸã€‚æ³¨æ„åœ¨{}ä¸­ç”¨`var`å£°æ˜çš„å˜é‡æ²¡æœ‰å—çº§ä½œç”¨åŸŸã€‚

  ES6å¼•å…¥äº†`let`å’Œ`const`å…³é”®å­—,å’Œ`var`å…³é”®å­—ä¸åŒï¼Œåœ¨å¤§æ‹¬å·ä¸­ä½¿ç”¨`let`å’Œ`const`å£°æ˜çš„å˜é‡å­˜åœ¨äºå—çº§ä½œç”¨åŸŸä¸­ã€‚åœ¨å¤§æ‹¬å·ä¹‹å¤–ä¸èƒ½è®¿é—®è¿™äº›å˜é‡ã€‚

  ```js
  {
    // å—çº§ä½œç”¨åŸŸä¸­çš„å˜é‡
    let greeting = 'Hello World!';
    var lang = 'English';
    console.log(greeting); // Prints 'Hello World!'
  }
  // å˜é‡ 'English'
  console.log(lang);
  // æŠ¥é”™ï¼šUncaught ReferenceError: greeting is not defined
  console.log(greeting);
  ```

**è¯æ³•ä½œç”¨åŸŸ**

è¯æ³•ä½œç”¨åŸŸï¼Œåˆå«é™æ€ä½œç”¨åŸŸï¼Œå˜é‡è¢«åˆ›å»ºæ—¶å°±ç¡®å®šå¥½äº†ï¼Œè€Œéæ‰§è¡Œé˜¶æ®µç¡®å®šçš„ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å†™å¥½ä»£ç æ—¶å®ƒçš„ä½œç”¨åŸŸå°±ç¡®å®šäº†ï¼Œ`JavaScript` éµå¾ªçš„å°±æ˜¯è¯æ³•ä½œç”¨åŸŸ

```js
var a = 2;
function foo(){
    console.log(a)
}
function bar(){
    var a = 3;
    foo();
}
n()
```

ä¸Šè¿°ä»£ç æ”¹å˜æˆä¸€å¼ å›¾

![img](../../../../é¡¹ç›®/Serverlessä¸ªäººåšå®¢/blogImg/29fab3d0-718f-11eb-85f6-6fac77c0c9b3.png)

ç”±äº`JavaScript`éµå¾ªè¯æ³•ä½œç”¨åŸŸï¼Œç›¸åŒå±‚çº§çš„ `foo` å’Œ `bar` å°±æ²¡æœ‰åŠæ³•è®¿é—®åˆ°å½¼æ­¤å—ä½œç”¨åŸŸä¸­çš„å˜é‡ï¼Œæ‰€ä»¥è¾“å‡º2

**ä½œç”¨åŸŸé“¾**

å½“åœ¨`Javascript`ä¸­ä½¿ç”¨ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œé¦–å…ˆ`Javascript`å¼•æ“ä¼šå°è¯•åœ¨å½“å‰ä½œç”¨åŸŸä¸‹å»å¯»æ‰¾è¯¥å˜é‡ï¼Œå¦‚æœæ²¡æ‰¾åˆ°ï¼Œå†åˆ°å®ƒçš„ä¸Šå±‚ä½œç”¨åŸŸå¯»æ‰¾ï¼Œä»¥æ­¤ç±»æ¨ç›´åˆ°æ‰¾åˆ°è¯¥å˜é‡æˆ–æ˜¯å·²ç»åˆ°äº†å…¨å±€ä½œç”¨åŸŸã€‚ğŸ¦ˆè‡ªä¸‹è€Œä¸Šï¼Œä»å†…å‘å¤–æŸ¥æ‰¾ï¼ŒçŸ¥é“å…¨å±€ä½œç”¨åŸŸã€‚

å¦‚æœåœ¨å…¨å±€ä½œç”¨åŸŸé‡Œä»ç„¶æ‰¾ä¸åˆ°è¯¥å˜é‡ï¼Œå®ƒå°±ä¼šåœ¨å…¨å±€èŒƒå›´å†…éšå¼å£°æ˜è¯¥å˜é‡(éä¸¥æ ¼æ¨¡å¼ä¸‹)æˆ–æ˜¯ç›´æ¥æŠ¥é”™

è¿™é‡Œæ‹¿ã€Šä½ ä¸çŸ¥é“çš„Javascript(ä¸Š)ã€‹ä¸­çš„ä¸€å¼ å›¾è§£é‡Šï¼š

æŠŠä½œç”¨åŸŸæ¯”å–»æˆä¸€ä¸ªå»ºç­‘ï¼Œè¿™ä»½å»ºç­‘ä»£è¡¨ç¨‹åºä¸­çš„åµŒå¥—ä½œç”¨åŸŸé“¾ï¼Œç¬¬ä¸€å±‚ä»£è¡¨å½“å‰çš„æ‰§è¡Œä½œç”¨åŸŸï¼Œé¡¶å±‚ä»£è¡¨å…¨å±€ä½œç”¨åŸŸ

![img](../../../../é¡¹ç›®/Serverlessä¸ªäººåšå®¢/blogImg/33f9c100-718f-11eb-85f6-6fac77c0c9b3.png)

å˜é‡çš„å¼•ç”¨ä¼šé¡ºç€å½“å‰æ¥¼å±‚è¿›è¡ŒæŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œåˆ™ä¼šå¾€ä¸Šä¸€å±‚æ‰¾ï¼Œä¸€æ—¦åˆ°è¾¾é¡¶å±‚ï¼ŒæŸ¥æ‰¾çš„è¿‡ç¨‹éƒ½ä¼šåœæ­¢

ä¸‹é¢ä»£ç æ¼”ç¤ºä¸‹ï¼š

```js
var sex = 'ç”·';
function person() {
    var name = 'å¼ ä¸‰';
    function student() {
        var age = 18;
        console.log(name); // å¼ ä¸‰
        console.log(sex); // ç”· 
    }
    student();
    console.log(age); // Uncaught ReferenceError: age is not defined
}
person();
```

ä¸Šè¿°ä»£ç ä¸»è¦ä¸»è¦åšäº†ä»¥ä¸‹å·¥ä½œï¼š

- `student`å‡½æ•°å†…éƒ¨å±äºæœ€å†…å±‚ä½œç”¨åŸŸï¼Œæ‰¾ä¸åˆ°`name`ï¼Œå‘ä¸Šä¸€å±‚ä½œç”¨åŸŸ`person`å‡½æ•°å†…éƒ¨æ‰¾ï¼Œæ‰¾åˆ°äº†è¾“å‡ºâ€œå¼ ä¸‰â€
- `student`å†…éƒ¨è¾“å‡ºcatæ—¶æ‰¾ä¸åˆ°ï¼Œå‘ä¸Šä¸€å±‚ä½œç”¨åŸŸ`person`å‡½æ•°æ‰¾ï¼Œè¿˜æ‰¾ä¸åˆ°ç»§ç»­å‘ä¸Šä¸€å±‚æ‰¾ï¼Œå³å…¨å±€ä½œç”¨åŸŸï¼Œæ‰¾åˆ°äº†è¾“å‡ºâ€œç”·â€
- åœ¨`person`å‡½æ•°å†…éƒ¨è¾“å‡º`age`æ—¶æ‰¾ä¸åˆ°ï¼Œå‘ä¸Šä¸€å±‚ä½œç”¨åŸŸæ‰¾ï¼Œå³å…¨å±€ä½œç”¨åŸŸï¼Œè¿˜æ˜¯æ‰¾ä¸åˆ°åˆ™æŠ¥é”™

### é—®é¢˜8ï¼šJavaScriptåŸå‹ï¼ŒåŸå‹é“¾ ? æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ

![img](é¢è¯•JavaScript.assets/4500e170-725e-11eb-85f6-6fac77c0c9b3.png)

**åŸå‹**

å‡½æ•°çš„prototypeå±æ€§ï¼Œæ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§ã€‚

`JavaScript` å¸¸è¢«æè¿°ä¸ºä¸€ç§åŸºäºåŸå‹çš„è¯­è¨€â€”â€”æ¯ä¸ªå¯¹è±¡æ‹¥æœ‰ä¸€ä¸ªåŸå‹å¯¹è±¡

å½“è¯•å›¾è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå®ƒä¸ä»…ä»…åœ¨è¯¥å¯¹è±¡ä¸Šæœå¯»ï¼Œè¿˜ä¼šæœå¯»è¯¥å¯¹è±¡çš„åŸå‹ï¼Œä»¥åŠè¯¥å¯¹è±¡çš„åŸå‹çš„åŸå‹ï¼Œä¾æ¬¡å±‚å±‚å‘ä¸Šæœç´¢ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªåå­—åŒ¹é…çš„å±æ€§æˆ–åˆ°è¾¾åŸå‹é“¾çš„æœ«å°¾

å‡†ç¡®åœ°è¯´ï¼Œè¿™äº›å±æ€§å’Œæ–¹æ³•å®šä¹‰åœ¨Objectçš„æ„é€ å™¨å‡½æ•°ï¼ˆconstructor functionsï¼‰ä¹‹ä¸Šçš„`prototype`å±æ€§ä¸Šï¼Œè€Œéå®ä¾‹å¯¹è±¡æœ¬èº«

ä¸‹é¢ä¸¾ä¸ªä¾‹å­ï¼š

å‡½æ•°å¯ä»¥æœ‰å±æ€§ã€‚ æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§å«ä½œåŸå‹`prototype`

```js
function doSomething(){}
console.log( doSomething.prototype );
```

æ§åˆ¶å°è¾“å‡º

```js
{
    constructor: Æ’ doSomething(),
    __proto__: {
        constructor: Æ’ Object(),
        hasOwnProperty: Æ’ hasOwnProperty(),
        isPrototypeOf: Æ’ isPrototypeOf(),
        propertyIsEnumerable: Æ’ propertyIsEnumerable(),
        toLocaleString: Æ’ toLocaleString(),
        toString: Æ’ toString(),
        valueOf: Æ’ valueOf()
    }
}
```

ä¸Šé¢è¿™ä¸ªå¯¹è±¡ï¼Œå°±æ˜¯å¤§å®¶å¸¸è¯´çš„åŸå‹å¯¹è±¡

å¯ä»¥çœ‹åˆ°ï¼ŒåŸå‹å¯¹è±¡æœ‰ä¸€ä¸ªè‡ªæœ‰å±æ€§`constructor`ï¼Œè¿™ä¸ªå±æ€§æŒ‡å‘è¯¥å‡½æ•°ï¼Œå¦‚ä¸‹å›¾å…³ç³»å±•ç¤º

![img](é¢è¯•JavaScript.assets/56d87250-725e-11eb-ab90-d9ae814b240d.png)

**åŸå‹é“¾**

åŸå‹å¯¹è±¡ä¹Ÿå¯èƒ½æ‹¥æœ‰åŸå‹ï¼Œå¹¶ä»ä¸­ç»§æ‰¿æ–¹æ³•å’Œå±æ€§ï¼Œä¸€å±‚ä¸€å±‚ã€ä»¥æ­¤ç±»æ¨ã€‚è¿™ç§å…³ç³»å¸¸è¢«ç§°ä¸ºåŸå‹é“¾ (prototype chain)ï¼Œå®ƒè§£é‡Šäº†ä¸ºä½•ä¸€ä¸ªå¯¹è±¡ä¼šæ‹¥æœ‰å®šä¹‰åœ¨å…¶ä»–å¯¹è±¡ä¸­çš„å±æ€§å’Œæ–¹æ³•

åœ¨å¯¹è±¡å®ä¾‹å’Œå®ƒçš„æ„é€ å™¨ä¹‹é—´å»ºç«‹ä¸€ä¸ªé“¾æ¥ï¼ˆå®ƒæ˜¯`__proto__`å±æ€§ï¼Œæ˜¯ä»æ„é€ å‡½æ•°çš„`prototype`å±æ€§æ´¾ç”Ÿçš„ï¼‰ï¼Œä¹‹åé€šè¿‡ä¸Šæº¯åŸå‹é“¾ï¼Œåœ¨æ„é€ å™¨ä¸­æ‰¾åˆ°è¿™äº›å±æ€§å’Œæ–¹æ³•

ä¸‹é¢ä¸¾ä¸ªä¾‹å­ï¼š

```js
function Person(name) {
    this.name = name;
    this.age = 18;
    this.sayName = function() {
        console.log(this.name);
    }
}
// ç¬¬äºŒæ­¥ åˆ›å»ºå®ä¾‹
var person = new Person('person')
```

æ ¹æ®ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸‹å›¾

![img](é¢è¯•JavaScript.assets/60825aa0-725e-11eb-85f6-6fac77c0c9b3.png)

ğŸ¦ˆæ•´ä¸ªè¿‡ç¨‹
æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ„é€ å‡½æ•°Personå’Œä¸€ä¸ªå®ä¾‹å¯¹è±¡personä½œä¸ºä¾‹å­

- æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼Œæ‰€æ„é€ å‡½æ•°çš„prototypeå±æ€§æŒ‡å‘å…¶åŸå‹å¯¹è±¡Person.prototypeï¼Œå®ä¾‹å¯¹è±¡å­˜åœ¨ç€`__proto__`å±æ€§ï¼ŒæŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚
- æ„é€ å‡½æ•°Personåº•å±‚æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”±å‡½æ•°åˆ›å»ºï¼Œæ‰€ä»¥å…¶`__proto__`å±æ€§ä¼šæŒ‡å‘åŒ¿åå‡½æ•°
- æ„é€ å‡½æ•°Personçš„åŸå‹å¯¹è±¡ä¸ºä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œæ˜¯åˆObjectåˆ›å»ºçš„ï¼Œæ‰€ä»¥å…¶æŒ‡å‘å†…ç½®å¯¹è±¡ï¼Œå³`Person.prototype.__proto__`æŒ‡å‘å†…ç½®å¯¹è±¡ï¼Œ
- Objectå¯¹è±¡çš„åŸå‹æ˜¯å†…ç½®å¯¹è±¡ï¼ŒåŒæ—¶Objectåˆæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥å…¶`__proto__`å±æ€§ä¼šæŒ‡å‘å‡½æ•°çš„åŸå‹å³åŒ¿åå‡½æ•°ã€‚
- Functionçš„ä¸¤ä¸ªå±æ€§éƒ½ä¼šæŒ‡å‘åŒ¿åå‡½æ•°ï¼ŒåŒ¿åå‡½æ•°æŒ‡å‘å†…ç½®å¯¹è±¡ï¼Œæœ€ç»ˆæŒ‡å‘ä¸ºnull

ä¸‹é¢åˆ†æä¸€ä¸‹ï¼š

- æ„é€ å‡½æ•°`Person`å­˜åœ¨åŸå‹å¯¹è±¡`Person.prototype`
- æ„é€ å‡½æ•°ç”Ÿæˆå®ä¾‹å¯¹è±¡`person`ï¼Œ`person`çš„`__proto__`æŒ‡å‘æ„é€ å‡½æ•°`Person`åŸå‹å¯¹è±¡
- `Person.prototype.__proto__` æŒ‡å‘å†…ç½®å¯¹è±¡ï¼Œå› ä¸º `Person.prototype` æ˜¯ä¸ªå¯¹è±¡ï¼Œé»˜è®¤æ˜¯ç”± `Object`å‡½æ•°ä½œä¸ºç±»åˆ›å»ºçš„ï¼Œè€Œ `Object.prototype` ä¸ºå†…ç½®å¯¹è±¡
- `Person.__proto__` æŒ‡å‘å†…ç½®åŒ¿åå‡½æ•° `anonymous`ï¼Œå› ä¸º Person æ˜¯ä¸ªå‡½æ•°å¯¹è±¡ï¼Œé»˜è®¤ç”± Function ä½œä¸ºç±»åˆ›å»º
- `Function.prototype` å’Œ `Function.__proto__`åŒæ—¶æŒ‡å‘å†…ç½®åŒ¿åå‡½æ•° `anonymous`ï¼Œè¿™æ ·åŸå‹é“¾çš„ç»ˆç‚¹å°±æ˜¯ `nul`

**æ€»ç»“**

ä¸‹é¢é¦–å…ˆè¦çœ‹å‡ ä¸ªæ¦‚å¿µï¼š

`__proto__`ä½œä¸ºä¸åŒå¯¹è±¡ä¹‹é—´çš„æ¡¥æ¢ï¼Œç”¨æ¥æŒ‡å‘åˆ›å»ºå®ƒçš„æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡çš„

![img](é¢è¯•JavaScript.assets/6a742160-725e-11eb-ab90-d9ae814b240d-1655518501163.png)

æ¯ä¸ªå¯¹è±¡çš„`__proto__`éƒ½æ˜¯æŒ‡å‘å®ƒçš„æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡`prototype`çš„

```js
person1.__proto__ === Person.prototype
```

æ„é€ å‡½æ•°æ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œæ˜¯é€šè¿‡ `Function`æ„é€ å™¨äº§ç”Ÿçš„

```js
Person.__proto__ === Function.prototype
```

åŸå‹å¯¹è±¡æœ¬èº«æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œè€Œæ™®é€šå¯¹è±¡çš„æ„é€ å‡½æ•°éƒ½æ˜¯`Object`

```js
Person.prototype.__proto__ === Object.prototype
```

åˆšåˆšä¸Šé¢è¯´äº†ï¼Œæ‰€æœ‰çš„æ„é€ å™¨éƒ½æ˜¯å‡½æ•°å¯¹è±¡ï¼Œå‡½æ•°å¯¹è±¡éƒ½æ˜¯ `Function`æ„é€ äº§ç”Ÿçš„

```js
Object.__proto__ === Function.prototype
```

`Object`çš„åŸå‹å¯¹è±¡ä¹Ÿæœ‰`__proto__`å±æ€§æŒ‡å‘`null`ï¼Œ`null`æ˜¯åŸå‹é“¾çš„é¡¶ç«¯

```js
Object.prototype.__proto__ === null
```

ä¸‹é¢ä½œå‡ºæ€»ç»“ï¼š

- ä¸€åˆ‡å¯¹è±¡éƒ½æ˜¯ç»§æ‰¿è‡ª`Object`å¯¹è±¡ï¼Œ`Object` å¯¹è±¡ç›´æ¥ç»§æ‰¿æ ¹æºå¯¹è±¡`null`
- ä¸€åˆ‡çš„å‡½æ•°å¯¹è±¡ï¼ˆåŒ…æ‹¬ `Object` å¯¹è±¡ï¼‰ï¼Œéƒ½æ˜¯ç»§æ‰¿è‡ª `Function` å¯¹è±¡
- `Object` å¯¹è±¡ç›´æ¥ç»§æ‰¿è‡ª `Function` å¯¹è±¡
- `Function`å¯¹è±¡çš„`__proto__`ä¼šæŒ‡å‘è‡ªå·±çš„åŸå‹å¯¹è±¡ï¼Œæœ€ç»ˆè¿˜æ˜¯ç»§æ‰¿è‡ª`Object`å¯¹è±¡

### é—®é¢˜9ï¼šJavascriptå¦‚ä½•å®ç°ç»§æ‰¿ï¼Ÿ

![img](é¢è¯•JavaScript.assets/5d9c4450-72a3-11eb-85f6-6fac77c0c9b3.png)

**æ˜¯ä»€ä¹ˆ**

**å®ç°æ–¹å¼**

- åŸå‹é“¾ç»§æ‰¿ï¼ˆä¸ä¼šè¢«å•ç‹¬ä½¿ç”¨ï¼‰

  ğŸ¦ˆå®ç°ä¸€ä¸ªåŸå‹é“¾ç»§æ‰¿

  å®šä¹‰çˆ¶ç±»ã€å­ç±»æ„é€ å‡½æ•°ï¼Œè®©å­ç±»æ„é€ å‡½æ•°çš„åŸå‹æ‰§è¡Œçˆ¶çš„å®ä¾‹å¯¹è±¡ï¼Œè¿™æ ·å°±å®ç°ç±»å­ç±»ç»§æ‰¿çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ã€‚

  ```js
  // å®šä¹‰çˆ¶ç±»
  function Parent() {
      this.name = 'Jack';
  }
  // çˆ¶ç±»åŸå‹æ·»åŠ æ–¹æ³•
  Parent.prototype.getName = function () {
      return this.name;
  };
  
  // å­ç±»
  function Child() {}
  // å­ç±»çš„åŸå‹è®¾ç½®ä¸ºçˆ¶ç±»Parentçš„å®ä¾‹
  Child.prototype = new Parent();
  
  // å®ä¾‹åŒ–å­ç±»
  const child = new Child();
  
  console.log(child.getName()); // Jack
  ```

  ![img](é¢è¯•JavaScript.assets/20210802133147.png)

  ä¸¤ä¸ªæ³¨æ„ç‚¹ï¼ˆç¼ºç‚¹ï¼‰ï¼š

  - ç»§æ‰¿ä¹‹åå†æ›´æ”¹åŸå‹å±æ€§ä¸ä¼šå‘ä¸‹ä¼ é€’
  - å®ä¾‹ä¹‹é—´äº’ç›¸å½±å“

  åŸå‹é“¾ç»§æ‰¿ï¼Œåˆ›å»ºå®ä¾‹å¯¹è±¡æ—¶å®ç°ç»§æ‰¿ï¼Œå†æ¬¡å¯¹åŸå‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•è¿›è¡Œæ›´æ”¹æ—¶ï¼Œä¸ä¼šå½±å“åˆ°å®ä¾‹å¯¹è±¡åŸæœ‰çš„ç»§æ‰¿ã€‚

  ```js
  let f = function () {
    this.a = 1;
    this.b = 2;
  }
  let o = new f(); // {a: 1, b: 2}
  // å¯¹åŸå‹çš„å±æ€§è¿›è¡Œäº†æ›´æ”¹
  f.prototype.b = 3;
  f.prototype.c = 4;
  console.log(o.a); // 1
  console.log(o.b); // 2 ==ã€‹ä¸ä¼šå½±å“åˆ°åŸæœ‰ç»§æ‰¿
  console.log(o.c); // 4 ==ã€‹å½“å‰å®ä¾‹ä¸­æ²¡æœ‰è¯¥å±æ€§ï¼Œå–åŸå‹ä¸­æŸ¥æ‰¾
  console.log(o.d); // undefined ==ã€‹ åŸå‹ä¸­ä¹Ÿæ²¡æœ‰ï¼Œè¿”å›undefined
  ```

  ä½†æ˜¯å¤šä¸ªå®ä¾‹å¯¹è±¡å®ç°åŸå‹é“¾ç»§æ‰¿æ—¶ï¼Œéƒ½å…¶ä¸­ä¸€ä¸ªå®ä¾‹æ›´æ”¹å±æ€§ï¼Œä¼šå½±å“åˆ°å…¶ä»–å®ä¾‹ã€‚--ã€‹å³å½“ç»§æ‰¿çš„å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œ[this](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/this) æŒ‡å‘çš„æ˜¯å½“å‰ç»§æ‰¿çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ç»§æ‰¿çš„å‡½æ•°æ‰€åœ¨çš„åŸå‹å¯¹è±¡ã€‚

  ```js
  function Parent() {
    this.name = 'parent1';
    this.play = [1, 2, 3]
  }
  function Child() {
    this.type = 'child2';
  }
  Child1.prototype = new Parent();
  console.log(new Child())
  ```

  ä¸Šé¢ä»£ç çœ‹ä¼¼æ²¡é—®é¢˜ï¼Œå®é™…å­˜åœ¨æ½œåœ¨é—®é¢˜

  ```js
    var s1 = new Child2();
    var s2 = new Child2();
    s1.play.push(4);
    console.log(s1.play, s2.play); // [1,2,3,4]
  ```

  æ”¹å˜`s1`çš„`play`å±æ€§ï¼Œä¼šå‘ç°`s2`ä¹Ÿè·Ÿç€å‘ç”Ÿå˜åŒ–äº†ï¼Œè¿™æ˜¯å› ä¸ºä¸¤ä¸ªå®ä¾‹ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªåŸå‹å¯¹è±¡ï¼Œå†…å­˜ç©ºé—´æ˜¯å…±äº«ã€‚

- æ„é€ å‡½æ•°ç»§æ‰¿ï¼ˆä¸å•ç‹¬ä½¿ç”¨ï¼‰

  åœ¨**å­ç±»æ„é€ å‡½æ•°**ä¸­è°ƒç”¨**çˆ¶ç±»æ„é€ å‡½æ•°**ã€‚ä½¿ç”¨ `apply()`å’Œ`call()`æ–¹æ³•ä»¥**æ–°åˆ›å»ºçš„å¯¹è±¡**ä¸ºä¸Šä¸‹æ–‡æ‰§è¡Œæ„é€ å‡½æ•°ã€‚

  ```js
  function Parent(){
      this.name = 'parent1';
  }
  
  Parent.prototype.getName = function () {
      return this.name;
  }
  
  function Child(){
      Parent1.call(this);
      this.type = 'child'
  }
  
  let child = new Child();
  console.log(child);  // æ²¡é—®é¢˜
  console.log(child.getName());  // ä¼šæŠ¥é”™
  ```

  åªèƒ½ç»§æ‰¿çˆ¶ç±»çš„å®ä¾‹å±æ€§å’Œæ–¹æ³•ï¼Œä¸èƒ½ç»§æ‰¿åŸå‹å±æ€§æˆ–è€…æ–¹æ³•ã€‚

  ```js
  function SuperType() {
      this.colors = ['red', 'blue', 'green'];
  }
  function SubType() {
      // ç»§æ‰¿ SuperType
      SuperType.call(this);
  }
  const instance1 = new SubType();
  instance1.colors.push('black');
  console.log(instance1.colors); // [ 'red', 'blue', 'green', 'black' ]
  
  const instance2 = new SubType();
  console.log(instance2.colors); // [ 'red', 'blue', 'green' ]
  ```

  å®ä¾‹ä¹‹é—´ä¸äº’ç›¸å½±å“ï¼Œå› ä¸º`SubType`å­ç±»è°ƒç”¨callä»…å¯¹çˆ¶å‡½æ•°å¤åˆ¶äº†åˆå§‹åŒ–ä»£ç ï¼Œæ¯ä¸€ä¸ªå®ä¾‹éƒ½æ˜¯ä¸€ä¸ªæ–°çš„ã€‚

  ```js
  function SuperType(name) {
      this.name = name;
  }
  function SubType() {
      // ç»§æ‰¿ SuperType å¹¶ä¼ å‚
      SuperType.call(this, 'Nicholas');
      // å®ä¾‹å±æ€§
      this.age = 29;
  }
  const usr = new SubType();
  console.log(usr.name, usr.age); // Nicholas 29
  ```

  ç›¸æ¯”äºä½¿ç”¨**åŸå‹é“¾**ï¼Œ**æ„é€ å‡½æ•°ç»§æ‰¿**çš„ä¸€ä¸ªä¼˜ç‚¹å°±æ˜¯**å¯ä»¥åœ¨å­ç±»æ„é€ å‡½æ•°ä¸­å‘çˆ¶ç±»æ„é€ å‡½æ•°ä¼ å‚**ã€‚

  å°ç»“ï¼š

  - å¯å‘çˆ¶ç±»æ„é€ å‡½æ•°ä¼ å‚
  - å®ä¾‹ä¹‹é—´ä¸å½±å“
  - ä¸èƒ½è®¿é—®çˆ¶ç±»åŸå‹ä¸Šçš„æ–¹æ³•

- ç»„åˆç»§æ‰¿ 

  **ç»„åˆç»§æ‰¿**ï¼Œæœ‰æ—¶å€™ä¹Ÿå«**ä¼ªç»å…¸ç»§æ‰¿**ï¼Œç»¼åˆäº†**åŸå‹é“¾**å’Œ**ç›—ç”¨æ„é€ å‡½æ•°**ï¼Œå°†ä¸¤è€…çš„ä¼˜ç‚¹é›†ä¸­äº†èµ·æ¥ã€‚ä½¿ç”¨**åŸå‹é“¾ç»§æ‰¿åŸå‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•**ï¼Œè€Œé€šè¿‡**ç›—ç”¨æ„é€ å‡½æ•°ç»§æ‰¿å®ä¾‹å±æ€§**ã€‚è¿™æ ·æ—¢å¯ä»¥æŠŠæ–¹æ³•å®šä¹‰åœ¨åŸå‹ä¸Šä»¥å®ç°é‡ç”¨ï¼Œåˆå¯ä»¥è®©æ¯ä¸ªå®ä¾‹éƒ½æœ‰è‡ªå·±çš„å±æ€§ã€‚

  ```javascript
  function SuperType(name) {
      this.name = name;
      this.colors = ['red', 'blue', 'green'];
  }
  SuperType.prototype.sayName = function () {
      console.log(this.name);
  };
  
  function SubType(name, age) {
      // ç»§æ‰¿å±æ€§
      SuperType.call(this, name);
      this.age = age;
  }
  // ç»§æ‰¿æ–¹æ³•
  SubType.prototype = new SuperType();
  SubType.prototype.sayAge = function () {
      console.log(this.age);
  };
  
  const usr1 = new SubType('Nicholas', 29);
  usr1.colors.push('black');
  console.log(usr1.colors); // [ 'red', 'blue', 'green', 'black' ]
  usr1.sayName(); // Nicholas
  usr1.sayAge(); // 29
  
  const usr2 = new SubType('Greg', 27);
  console.log(usr2.colors); // [ 'red', 'blue', 'green' ]
  usr2.sayName(); // Greg
  usr2.sayAge(); // 27
  ```

  **ç»„åˆç»§æ‰¿**å¼¥è¡¥äº†**åŸå‹é“¾**å’Œ**ç›—ç”¨æ„é€ å‡½æ•°**çš„ä¸è¶³ï¼Œæ˜¯ JavaScript ä¸­ä½¿ç”¨æœ€å¤šçš„ç»§æ‰¿æ¨¡å¼ã€‚è€Œä¸”ç»„åˆç»§æ‰¿ä¹Ÿä¿ç•™äº†`instanceof`æ“ä½œç¬¦å’Œ`isPrototypeOf()`æ–¹æ³•**è¯†åˆ«åˆæˆå¯¹è±¡**çš„èƒ½åŠ›ã€‚

- åŸå‹å¼ç»§æ‰¿

  

**æ€»ç»“**



### é—®é¢˜10ï¼šè°ˆè°ˆthiså¯¹è±¡çš„ç†è§£

- å‡½æ•°çš„è°ƒç”¨æ–¹å¼å†³å®šäº†thisçš„å€¼
- thisä¸å¯ä»¥åœ¨æ‰§è¡ŒæœŸé—´è¢«èµ‹å€¼

**å…¨å±€ä¸Šä¸‹æ–‡**

æ— è®ºæ˜¯å¦åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œåœ¨å…¨å±€æ‰§è¡Œç¯å¢ƒä¸­ï¼ˆåœ¨ä»»ä½•å‡½æ•°ä½“å¤–éƒ¨ï¼‰`this` éƒ½æŒ‡å‘å…¨å±€å¯¹è±¡ã€‚

**å‡½æ•°ä¸Šä¸‹æ–‡**

- åœ¨å‡½æ•°å†…éƒ¨ï¼Œ`this`çš„å€¼å–å†³äºå‡½æ•°è¢«è°ƒç”¨çš„æ–¹å¼ã€‚
- éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œè‹¥å‡½æ•°ä¸­æœªè®¾å®šthisï¼Œåˆ™thisé»˜è®¤ä¸ºå…¨å±€ã€‚
- æŠŠ`this`çš„å€¼ä»ä¸€ä¸ªç¯å¢ƒä¼ åˆ°å¦ä¸€ä¸ªï¼Œå°±è¦ç”¨ `call` æˆ–è€…`apply` æ–¹æ³•

**ç±»ä¸Šä¸‹æ–‡**

- åœ¨ç±»çš„æ„é€ å‡½æ•°ä¸­ï¼Œ`this` æ˜¯ä¸€ä¸ªå¸¸è§„å¯¹è±¡ã€‚ç±»ä¸­æ‰€æœ‰éé™æ€çš„æ–¹æ³•éƒ½ä¼šè¢«æ·»åŠ åˆ° `this` çš„åŸå‹ä¸­ï¼š

**æ´¾ç”Ÿç±»**

- åœ¨æ„é€ å‡½æ•°ä¸­è°ƒç”¨`super()`ä¼šç”Ÿæˆä¸€ä¸ª`this`ç»‘å®š
- æ´¾ç”Ÿç±»ä¸èƒ½åœ¨è°ƒç”¨ `super()` ä¹‹å‰è¿”å›ï¼Œé™¤éå…¶æ„é€ å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ–è€…æ ¹æœ¬æ²¡æœ‰æ„é€ å‡½æ•°ã€‚

**å®ä¾‹**

- å‡½æ•°ä¸Šä¸‹æ–‡çš„this

  ```js
  // å¯¹è±¡å¯ä»¥ä½œä¸º bind æˆ– apply çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ï¼Œå¹¶ä¸”è¯¥å‚æ•°å°†ç»‘å®šåˆ°è¯¥å¯¹è±¡ã€‚---bindæ”¹å˜thisæŒ‡å‘
  var obj = {a: 'Custom'};
  
  // å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œå¹¶å°†è¯¥å˜é‡ä½œä¸ºå…¨å±€å¯¹è±¡ window çš„å±æ€§ã€‚
  var a = 'Global';
  
  function whatsThis() {
    return this.a;  // this çš„å€¼å–å†³äºå‡½æ•°è¢«è°ƒç”¨çš„æ–¹å¼
  }
  
  whatsThis();          // 'Global' å› ä¸ºåœ¨è¿™ä¸ªå‡½æ•°ä¸­ this æ²¡æœ‰è¢«è®¾å®šï¼Œæ‰€ä»¥å®ƒé»˜è®¤ä¸º å…¨å±€/ window å¯¹è±¡
  whatsThis.call(obj);  // 'Custom' å› ä¸ºå‡½æ•°ä¸­çš„ this è¢«è®¾ç½®ä¸º obj
  whatsThis.apply(obj); // 'Custom' å› ä¸ºå‡½æ•°ä¸­çš„ this è¢«è®¾ç½®ä¸º obj
  ```

- thiså’Œå¯¹è±¡è½¬æ¢

  è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªå‡½æ•°addå’Œä¸€ä¸ªå¯¹è±¡oï¼Œæˆ‘ä»¬è°ƒç”¨å‡½æ•°æ—¶ï¼Œé‡‡ç”¨`call`ã€`apply`æ–¹æ³•ç»‘å®šthisä¸ºå¯¹è±¡oï¼Œå³ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯ç»‘å®šçš„åœ°æ–¹ã€‚

  ```js
  function add(c, d) {
    return this.a + this.b + c + d;
  }
  
  var o = {a: 1, b: 3};
  
  // ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç”¨ä½œâ€œthisâ€çš„å¯¹è±¡
  // å…¶ä½™å‚æ•°ç”¨ä½œå‡½æ•°çš„å‚æ•°
  add.call(o, 5, 7); // 16
  
  // ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç”¨ä½œâ€œthisâ€çš„å¯¹è±¡
  // ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„ä¸¤ä¸ªæˆå‘˜ç”¨ä½œå‡½æ•°å‚æ•°
  add.apply(o, [10, 20]); // 34
  ```

  åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ä½¿ç”¨ `call` å’Œ `apply` æ—¶ï¼Œå¦‚æœç”¨ä½œ `this` çš„å€¼ä¸æ˜¯å¯¹è±¡ï¼Œåˆ™ä¼šè¢«å°è¯•è½¬æ¢ä¸ºå¯¹è±¡ã€‚ä¸æ˜¯å¯¹è±¡çš„å€¼ä¼šè‡ªåŠ¨è½¬æˆå¯¹è±¡ã€‚åŸå§‹å€¼`7 str true`ä¹Ÿä¼šè¢«è½¬æˆåŸå§‹å€¼åŒ…è£…ç±»å‹ã€‚

  ```js
  function bar() {
    console.log(Object.prototype.toString.call(this));
  }
  
  bar.call(7);     // [object Number]
  bar.call('foo'); // [object String]
  bar.call(undefined); // [object global]
  ```

- bindæ–¹æ³•

  è°ƒç”¨`f.bind(someObject)`ä¼šåˆ›å»ºä¸€ä¸ªä¸`f`å…·æœ‰ç›¸åŒå‡½æ•°ä½“å’Œä½œç”¨åŸŸçš„å‡½æ•°ï¼Œä½†æ˜¯åœ¨è¿™ä¸ªæ–°å‡½æ•°ä¸­ï¼Œ`this`å°†æ°¸ä¹…åœ°è¢«ç»‘å®šåˆ°äº†`bind`çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ— è®ºè¿™ä¸ªå‡½æ•°æ˜¯å¦‚ä½•è¢«è°ƒç”¨çš„ã€‚

  ğŸ¦ˆ`bind()`æ–¹æ³•ï¼Œä¼šç”Ÿæˆä¸€ä¸ªå’Œè°ƒç”¨è¯¥æ–¹æ³•çš„å‡½æ•°ä¸€æ ·çš„å‡½æ•°ï¼Œåªæ˜¯æŠŠthisç»‘å®šåˆ°äº†ç¬¬ä¸€ä¸ªå‚æ•°ä¸Šã€‚

  ```js
  function f(){
    return this.a;
  }
  
  var g = f.bind({a:"azerty"});
  console.log(g()); // azerty
  
  var h = g.bind({a:'yoo'}); // bind åªç”Ÿæ•ˆä¸€æ¬¡ï¼
  console.log(h()); // azerty
  
  var o = {a:37, f:f, g:g, h:h};
  console.log(o.a, o.f(), o.g(), o.h()); // 37, 37, azerty, azerty
  // o.aè°ƒç”¨å¯¹è±¡çš„å±æ€§ï¼Œç›´æ¥è¾“å‡º
  // o.f()ï¼Œå¯¹è±¡oè°ƒç”¨äº†å‡½æ•°f()ï¼Œæ‰€ä»¥è¿™é‡Œçš„thisæŒ‡å‘å¯¹è±¡oï¼Œaä¸ºå¯¹è±¡oçš„å±æ€§å€¼37
  // o.g(), o.h(),é‡‡ç”¨bindæ–¹æ³•ç»‘å®šäº†thisï¼Œæ‰€ä»¥è¿™é‡Œçš„thisæŒ‡å‘{a:"azerty"}ï¼Œå¹¶ä¸”åªå¯¹ç¬¬ä¸€æ¬¡ç»‘å®šæœ‰æ•ˆ
  ```

- ç®­å¤´å‡½æ•°

  åœ¨[ç®­å¤´å‡½æ•°](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Arrow_functions)ä¸­ï¼Œ`this`ä¸å°é—­è¯æ³•ç¯å¢ƒçš„`this`ä¿æŒä¸€è‡´ã€‚åœ¨å…¨å±€ä»£ç ä¸­ï¼Œå®ƒå°†è¢«è®¾ç½®ä¸ºå…¨å±€å¯¹è±¡ï¼š

  ```js
  var globalObject = this;
  var foo = (() => this);
  console.log(foo() === globalObject); // true
  ```

  æ³¨æ„ï¼šå¦‚æœå°†`this`ä¼ é€’ç»™`call`ã€`bind`ã€æˆ–è€…`apply`æ¥è°ƒç”¨ç®­å¤´å‡½æ•°ï¼Œå®ƒå°†è¢«å¿½ç•¥ã€‚

  åœ¨ç®­å¤´å‡½æ•°ä¸­ï¼Œthisçš„æŒ‡å‘ä¸ºå®ƒè¢«åˆ›å»ºæ—¶çš„ç¯å¢ƒã€‚

  ```js
  // åˆ›å»ºä¸€ä¸ªå«æœ‰ bar æ–¹æ³•çš„ obj å¯¹è±¡ï¼Œ
  // bar è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œ
  // è¿™ä¸ªå‡½æ•°è¿”å› thisï¼Œ
  // è¿™ä¸ªè¿”å›çš„å‡½æ•°æ˜¯ä»¥ç®­å¤´å‡½æ•°åˆ›å»ºçš„ï¼Œ
  // æ‰€ä»¥å®ƒçš„ this è¢«æ°¸ä¹…ç»‘å®šåˆ°äº†å®ƒå¤–å±‚å‡½æ•°çš„ thisã€‚
  // bar çš„å€¼å¯ä»¥åœ¨è°ƒç”¨ä¸­è®¾ç½®ï¼Œè¿™åè¿‡æ¥åˆè®¾ç½®äº†è¿”å›å‡½æ•°çš„å€¼ã€‚
  var obj = {
    bar: function() {
      var x = (() => this);
      return x;
    }
  };
  
  // ä½œä¸º obj å¯¹è±¡çš„ä¸€ä¸ªæ–¹æ³•æ¥è°ƒç”¨ barï¼ŒæŠŠå®ƒçš„ this ç»‘å®šåˆ° objã€‚
  // å°†è¿”å›çš„å‡½æ•°çš„å¼•ç”¨èµ‹å€¼ç»™ fnã€‚
  var fn = obj.bar();
  
  // ç›´æ¥è°ƒç”¨ fn è€Œä¸è®¾ç½® thisï¼Œ
  // é€šå¸¸ (å³ä¸ä½¿ç”¨ç®­å¤´å‡½æ•°çš„æƒ…å†µ) é»˜è®¤ä¸ºå…¨å±€å¯¹è±¡
  // è‹¥åœ¨ä¸¥æ ¼æ¨¡å¼åˆ™ä¸º undefined
  console.log(fn() === obj); // true
  
  // ä½†æ˜¯æ³¨æ„ï¼Œå¦‚æœä½ åªæ˜¯å¼•ç”¨ obj çš„æ–¹æ³•ï¼Œ
  // è€Œæ²¡æœ‰è°ƒç”¨å®ƒ
  var fn2 = obj.bar;
  // é‚£ä¹ˆè°ƒç”¨ç®­å¤´å‡½æ•°åï¼Œthis æŒ‡å‘ windowï¼Œå› ä¸ºå®ƒä» bar ç»§æ‰¿äº† thisã€‚
  console.log(fn2()() == window); // true
  ```

  ğŸ¦ˆåœ¨è¿™é‡Œï¼Œåˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡å†…çš„å±æ€§barè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°é‡Œçš„å†…å®¹ç”±ç®­å¤´å‡½æ•°å†³å®šï¼Œæ­¤æ—¶ç®­å¤´å‡½æ•°çš„thiså³å·²ç»ç»‘å®šä¸ºobjï¼Œåé¢å†æ¬¡ä½¿ç”¨thisæ—¶ï¼ŒthisæŒ‡å‘çš„å†…å®¹å°±ç”±objæ‰€å†³å®šã€‚---è¿™é‡Œæ²¡ææ˜ç™½ï¼Œobj.bar()æ—¶thisæŒ‡å‘äº†objï¼Œé‚£thisæ˜¯è¢«barå†³å®šçš„è¿˜æ˜¯objå†³å®šçš„ï¼Œobj.baræ—¶ï¼ŒthisæŒ‡å‘äº†windowï¼Œé‚£æ˜¯ä¸æ˜¯thiså°±æ˜¯ç”±baræ‰€å†³å®šã€‚ä¹Ÿå°±æ˜¯åœ¨å®šä¹‰ç®­å¤´å‡½æ•°åï¼Œå…¶thisçš„æŒ‡å‘æ˜¯ç”±baræ‰€å†³å®šã€‚

- ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•

  å½“å‡½æ•°ä½œä¸ºå¯¹è±¡é‡Œçš„æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œ`this` è¢«è®¾ç½®ä¸ºè°ƒç”¨è¯¥å‡½æ•°çš„å¯¹è±¡ã€‚

  ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œå½“ `o.f()` è¢«è°ƒç”¨æ—¶ï¼Œå‡½æ•°å†…çš„ `this` å°†ç»‘å®šåˆ° `o` å¯¹è±¡ã€‚

  ```js
  var o = {
    prop: 37,
    f: function() {
      return this.prop;
    }
  };
  
  console.log(o.f()); // 37
  
  // this çš„ç»‘å®šåªå—æœ€æ¥è¿‘çš„æˆå‘˜å¼•ç”¨çš„å½±å“
  o.b = {g: independent, prop: 42};
  console.log(o.b.g()); // 42
  // æŠŠä¸€ä¸ªæ–¹æ³•gå½“ä½œå¯¹è±¡o.bçš„å‡½æ•°è°ƒç”¨ã€‚åœ¨è¿™æ¬¡æ‰§è¡ŒæœŸé—´ï¼Œå‡½æ•°ä¸­çš„thiså°†æŒ‡å‘o.bã€‚
  // ğŸ¦ˆthisæŒ‡å‘æœ€è¿‘çš„å¼•ç”¨
  ```

- åŸå‹ä¸­çš„this

  å¦‚æœè¯¥æ–¹æ³•å­˜åœ¨äºä¸€ä¸ªå¯¹è±¡çš„åŸå‹é“¾ä¸Šï¼Œé‚£ä¹ˆ `this` æŒ‡å‘çš„æ˜¯è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„å¯¹è±¡ï¼Œå°±åƒè¯¥æ–¹æ³•å°±åœ¨è¿™ä¸ªå¯¹è±¡ä¸Šä¸€æ ·ã€‚

  ```js
  var o = {
    f: function() {
      return this.a + this.b;
    }
  };
  var p = Object.create(o);
  p.a = 1;
  p.b = 4;
  
  console.log(p.f()); // 5
  ```

  ğŸ¦ˆpä¸­æ²¡æœ‰å±æ€§fï¼Œå‘åŸå‹ä¸­æŸ¥æ‰¾ï¼ŒæŸ¥æ‰¾å¼€å§‹çš„ä½ç½®å°±æ˜¯pï¼Œæ‰€ä»¥å‡½æ•°ä¸­çš„ `this` æŒ‡å‘`p`ï¼Œå› ä¸º`f`æ˜¯ä½œä¸º`p`çš„æ–¹æ³•è°ƒç”¨çš„ï¼Œæ‰€ä»¥å®ƒçš„`this`æŒ‡å‘äº†`p`ã€‚---ã€‹this çš„æŒ‡å‘æ˜¯pï¼Œå±æ€§å‡½æ•°ä»åŸå‹ä¸­è·å¾—çš„ã€‚

- getter ä¸ setter ä¸­çš„ `this`

- ä½œä¸ºæ„é€ å‡½æ•°

  å½“ä¸€ä¸ªå‡½æ•°ç”¨ä½œæ„é€ å‡½æ•°æ—¶ï¼ˆä½¿ç”¨[new](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/new)å…³é”®å­—ï¼‰ï¼Œå®ƒçš„`this`è¢«ç»‘å®šåˆ°æ­£åœ¨æ„é€ çš„æ–°å¯¹è±¡ã€‚

  ```js
  /*
   * æ„é€ å‡½æ•°è¿™æ ·å·¥ä½œï¼š
   *
   * function MyConstructor(){
   *   // å‡½æ•°å®ä½“å†™åœ¨è¿™é‡Œ
   *   // æ ¹æ®éœ€è¦åœ¨ this ä¸Šåˆ›å»ºå±æ€§ï¼Œç„¶åèµ‹å€¼ç»™å®ƒä»¬ï¼Œæ¯”å¦‚ï¼š
   *   this.fum = "nom";
   *   // ç­‰ç­‰...
   *
   *   // å¦‚æœå‡½æ•°å…·æœ‰è¿”å›å¯¹è±¡çš„ return è¯­å¥ï¼Œ
   *   // åˆ™è¯¥å¯¹è±¡å°†æ˜¯ new è¡¨è¾¾å¼çš„ç»“æœã€‚
   *   // å¦åˆ™ï¼Œè¡¨è¾¾å¼çš„ç»“æœæ˜¯å½“å‰ç»‘å®šåˆ° this çš„å¯¹è±¡ã€‚
   *   //ï¼ˆå³é€šå¸¸çœ‹åˆ°çš„å¸¸è§æƒ…å†µï¼‰ã€‚
   * }
   */
  
  function C(){
    this.a = 37;
  }
  
  var o = new C();
  console.log(o.a); // logs 37
  
  
  function C2(){
    this.a = 37;
    return {a:38};
  }
  
  o = new C2();
  console.log(o.a); // logs 38
  
  ```

  ğŸ¦ˆåˆ›å»ºå‡½æ•°Cï¼Œå…¶æ²¡æœ‰è¿”å›å€¼ï¼Œåœ¨thisä¸Šåˆ›å»ºå±æ€§aå¹¶èµ‹å€¼ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºCçš„å®ä¾‹æ—¶ï¼Œè¾“å‡ºçš„å±æ€§aå°±å°±æ˜¯å‡½æ•°Cçš„å±æ€§ã€‚C2å‡½æ•°ç”±è¿”å›å€¼ï¼Œåˆ™è¿”å›ç»™åˆ›å»ºçš„å®ä¾‹ï¼Œthisç»‘å®šåˆ°è¯¥è¿”å›å€¼ä¸Š

- ä½œä¸ºä¸€ä¸ªDOMäº‹ä»¶å¤„ç†å‡½æ•°

  å½“å‡½æ•°è¢«ç”¨ä½œäº‹ä»¶å¤„ç†å‡½æ•°æ—¶ï¼Œå®ƒçš„ `this` æŒ‡å‘è§¦å‘äº‹ä»¶çš„å…ƒç´ 

- ä½œä¸ºå†…è”äº‹ä»¶å¤„ç†å‡½æ•°

  å½“ä»£ç è¢«å†…è” [on-event å¤„ç†å‡½æ•° (en-US)](https://developer.mozilla.org/en-US/docs/Web/Events/Event_handlers) è°ƒç”¨æ—¶ï¼Œå®ƒçš„`this`æŒ‡å‘ç›‘å¬å™¨æ‰€åœ¨çš„ DOM å…ƒç´ ï¼š

- ç±»ä¸­çš„this

  è®©ç±»ä¸­çš„ `this` å€¼æ€»æ˜¯æŒ‡å‘è¿™ä¸ªç±»å®ä¾‹ã€‚

  ```js
  
  class Car {
    constructor() {
      // Bind sayBye but not sayHi to show the difference
      this.sayBye = this.sayBye.bind(this);
    }
    sayHi() {
      console.log(`Hello from ${this.name}`);
    }
    sayBye() {
      console.log(`Bye from ${this.name}`);
    }
    get name() {
      return 'Ferrari';
    }
  }
  
  class Bird {
    get name() {
      return 'Tweety';
    }
  }
  
  const car = new Car();
  const bird = new Bird();
  
  // The value of 'this' in methods depends on their caller
  car.sayHi(); // Hello from Ferrari
  bird.sayHi = car.sayHi;
  bird.sayHi(); // Hello from Tweety
  
  // For bound methods, 'this' doesn't depend on the caller
  bird.sayBye = car.sayBye;
  bird.sayBye();  // Bye from Ferrari
  ```

**é¢è¯•å®˜ç³»åˆ—**

![img](é¢è¯•JavaScript.assets/46c820d0-74b7-11eb-85f6-6fac77c0c9b3.png)

### é—®é¢˜11ï¼šJavaScriptä¸­æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œæ ˆæ˜¯ä»€ä¹ˆï¼Ÿ

ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸé“¾å¢å¼ºï¼Ÿï¼Ÿï¼Ÿ

**æ‰§è¡Œä¸Šä¸‹æ–‡**

æ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯ä¸€ç§å¯¹`Javascript`ä»£ç æ‰§è¡Œç¯å¢ƒçš„æŠ½è±¡æ¦‚å¿µï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦æœ‰`Javascript`ä»£ç è¿è¡Œï¼Œé‚£ä¹ˆå®ƒå°±ä¸€å®šæ˜¯è¿è¡Œåœ¨æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ã€‚

- å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼šåªæœ‰ä¸€ä¸ªï¼Œæµè§ˆå™¨ä¸­çš„å…¨å±€å¯¹è±¡å°±æ˜¯ `window`å¯¹è±¡ï¼Œ`this` æŒ‡å‘è¿™ä¸ªå…¨å±€å¯¹è±¡
- å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼šå­˜åœ¨æ— æ•°ä¸ªï¼Œåªæœ‰åœ¨å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™æ‰ä¼šè¢«åˆ›å»ºï¼Œæ¯æ¬¡è°ƒç”¨å‡½æ•°éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡
  - æ¯æ¬¡è°ƒç”¨å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„ä¸Šä¸‹æ–‡ï¼Œä¼šåˆ›å»ºä¸€ä¸ªç§æœ‰ä½œç”¨åŸŸï¼Œå‡½æ•°å†…éƒ¨å£°æ˜çš„ä»»ä½•å˜é‡éƒ½ä¸èƒ½åœ¨å½“å‰å‡½æ•°ä½œç”¨åŸŸå¤–éƒ¨ç›´æ¥è®¿é—®ã€‚ï¼ˆé™¤äº†é—­åŒ…ï¼‰

**ç”Ÿå‘½å‘¨æœŸ**



- **åˆ›å»ºé˜¶æ®µ**

  è¿™å‡ ä¸ªç¯å¢ƒæ²¡ææ¸…

- **æ‰§è¡Œé˜¶æ®µ**

  åœ¨è¿™é˜¶æ®µï¼Œæ‰§è¡Œå˜é‡èµ‹å€¼ã€ä»£ç æ‰§è¡Œ

  å¦‚æœ `Javascript` å¼•æ“åœ¨æºä»£ç ä¸­å£°æ˜çš„å®é™…ä½ç½®æ‰¾ä¸åˆ°å˜é‡çš„å€¼ï¼Œé‚£ä¹ˆå°†ä¸ºå…¶åˆ†é… `undefined` å€¼ã€‚

- **å›æ”¶é˜¶æ®µ**

  - ä¸Šä¸‹æ–‡åœ¨å…¶æ‰€æœ‰ä»£ç éƒ½æ‰§è¡Œå®Œæ¯•åè¢«é”€æ¯ï¼ˆé™¤äº†å…¨å±€ä¸Šä¸‹æ–‡ï¼‰
  - å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡åœ¨åº”ç”¨ç¨‹åºé€€å‡ºå‰æ‰ä¼šè¢«é”€æ¯ã€‚

**æ‰§è¡Œæ ˆ**

æ‰§è¡Œæ ˆï¼Œä¹Ÿå«è°ƒç”¨æ ˆï¼Œå…·æœ‰ LIFOï¼ˆåè¿›å…ˆå‡ºï¼‰ç»“æ„ï¼Œç”¨äºå­˜å‚¨åœ¨ä»£ç æ‰§è¡ŒæœŸé—´åˆ›å»ºçš„æ‰€æœ‰æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚

![img](é¢è¯•JavaScript.assets/9eda0310-74c1-11eb-ab90-d9ae814b240d.png)

å½“`Javascript`å¼•æ“å¼€å§‹æ‰§è¡Œä½ ç¬¬ä¸€è¡Œè„šæœ¬ä»£ç çš„æ—¶å€™ï¼Œå®ƒå°±ä¼šåˆ›å»ºä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ç„¶åå°†å®ƒå‹åˆ°æ‰§è¡Œæ ˆä¸­

æ¯å½“å¼•æ“ç¢°åˆ°ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå®ƒå°±ä¼šåˆ›å»ºä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œç„¶åå°†è¿™ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡å‹åˆ°æ‰§è¡Œæ ˆä¸­

å¼•æ“ä¼šæ‰§è¡Œä½äºæ‰§è¡Œæ ˆæ ˆé¡¶çš„æ‰§è¡Œä¸Šä¸‹æ–‡(ä¸€èˆ¬æ˜¯å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡)ï¼Œå½“è¯¥å‡½æ•°æ‰§è¡Œç»“æŸåï¼Œå¯¹åº”çš„æ‰§è¡Œä¸Šä¸‹æ–‡å°±ä¼šè¢«å¼¹å‡ºï¼Œç„¶åæ§åˆ¶æµç¨‹åˆ°è¾¾æ‰§è¡Œæ ˆçš„ä¸‹ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡

ä¸¾ä¸ªä¾‹å­ï¼š

```js
let a = 'Hello World!';
function first() {
  console.log('Inside first function');
  second();
  console.log('Again inside first function');
}
function second() {
  console.log('Inside second function');
}
first();
console.log('Inside Global Execution Context');
```

è½¬åŒ–æˆå›¾çš„å½¢å¼

![img](é¢è¯•JavaScript.assets/ac11a600-74c1-11eb-ab90-d9ae814b240d.png)

ç®€å•åˆ†æä¸€ä¸‹æµç¨‹ï¼š

- åˆ›å»ºå…¨å±€ä¸Šä¸‹æ–‡è¯·å‹å…¥æ‰§è¡Œæ ˆ
- `first`å‡½æ•°è¢«è°ƒç”¨ï¼Œåˆ›å»ºå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶å‹å…¥æ ˆ
- æ‰§è¡Œ`first`å‡½æ•°è¿‡ç¨‹é‡åˆ°`second`å‡½æ•°ï¼Œå†åˆ›å»ºä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶å‹å…¥æ ˆ
- `second`å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œå¯¹åº”çš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡è¢«æ¨å‡ºæ‰§è¡Œæ ˆï¼Œæ‰§è¡Œä¸‹ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡`first`å‡½æ•°ã€‚---ã€‹ğŸ¦ˆå°†æ§åˆ¶æƒè¿”è¿˜ç»™ä¹‹å‰çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚
- `first`å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œå¯¹åº”çš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¹Ÿè¢«æ¨å‡ºæ ˆä¸­ï¼Œç„¶åæ‰§è¡Œå…¨å±€ä¸Šä¸‹æ–‡
- æ‰€æœ‰ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå…¨å±€ä¸Šä¸‹æ–‡ä¹Ÿä¼šè¢«æ¨å‡ºæ ˆä¸­ï¼Œç¨‹åºç»“

### é—®é¢˜12ï¼šè¯´è¯´JavaScriptä¸­çš„äº‹ä»¶æ¨¡å‹

![img](é¢è¯•JavaScript.assets/32a182f0-74cf-11eb-85f6-6fac77c0c9b3.png)

**äº‹ä»¶æµ**

äº‹ä»¶æµæè¿°äº†é¡µé¢æ¥æ”¶äº‹ä»¶çš„é¡ºåºã€‚

äº‹ä»¶æµéƒ½ä¼šç»å†ä¸‰ä¸ªé˜¶æ®µï¼š

- äº‹ä»¶æ•è·é˜¶æ®µ(capture phase)
- å¤„äºç›®æ ‡é˜¶æ®µ(target phase)
- äº‹ä»¶å†’æ³¡é˜¶æ®µ(bubbling phase)

![img](é¢è¯•JavaScript.assets/3e9a6450-74cf-11eb-85f6-6fac77c0c9b3.png)

äº‹ä»¶å†’æ³¡æ˜¯ä¸€ç§ä»ä¸‹å¾€ä¸Šçš„ä¼ æ’­æ–¹å¼ï¼Œç”±æœ€å…·ä½“çš„å…ƒç´ ï¼ˆè§¦å‘èŠ‚ç‚¹ï¼‰ç„¶åé€æ¸å‘ä¸Šä¼ æ’­åˆ°æœ€ä¸å…·ä½“çš„é‚£ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯`DOM`ä¸­æœ€é«˜å±‚çš„çˆ¶èŠ‚ç‚¹

**äº‹ä»¶æ¨¡å‹**

- åŸå§‹äº‹ä»¶æ¨¡å‹ï¼ˆDOM0çº§ï¼‰
- æ ‡å‡†äº‹ä»¶æ¨¡å‹ï¼ˆDOM2çº§ï¼‰



- **åŸå§‹äº‹ä»¶æ¨¡å‹**

  äº‹ä»¶ç»‘å®šç›‘å¬å‡½æ•°æ¯”è¾ƒç®€å•, æœ‰ä¸¤ç§æ–¹å¼ï¼š

  - HTMLä»£ç ä¸­ç›´æ¥ç»‘å®š

  ```js
  <input type="button" onclick="fun()">
  ```

  - é€šè¿‡`JS`ä»£ç ç»‘å®š

  ```js
  var btn = document.getElementById('.btn');
  btn.onclick = fun;
  ```

  **ç‰¹æ€§**

  - ç»‘å®šé€Ÿåº¦å¿«

  `DOM0`çº§äº‹ä»¶å…·æœ‰å¾ˆå¥½çš„è·¨æµè§ˆå™¨ä¼˜åŠ¿ï¼Œä¼šä»¥æœ€å¿«çš„é€Ÿåº¦ç»‘å®šï¼Œä½†ç”±äºç»‘å®šé€Ÿåº¦å¤ªå¿«ï¼Œå¯èƒ½é¡µé¢è¿˜æœªå®Œå…¨åŠ è½½å‡ºæ¥ï¼Œä»¥è‡³äºäº‹ä»¶å¯èƒ½æ— æ³•æ­£å¸¸è¿è¡Œ

  - åªæ”¯æŒå†’æ³¡ï¼Œä¸æ”¯æŒæ•è·
  - åŒä¸€ä¸ªç±»å‹çš„äº‹ä»¶åªèƒ½ç»‘å®šä¸€æ¬¡

  ```js
  <input type="button" id="btn" onclick="fun1()">
  
  var btn = document.getElementById('.btn');
  btn.onclick = fun2;
  ```

  å¦‚ä¸Šï¼Œå½“å¸Œæœ›ä¸ºåŒä¸€ä¸ªå…ƒç´ ç»‘å®šå¤šä¸ªåŒç±»å‹äº‹ä»¶çš„æ—¶å€™ï¼ˆä¸Šé¢çš„è¿™ä¸ª`btn`å…ƒç´ ç»‘å®š2ä¸ªç‚¹å‡»äº‹ä»¶ï¼‰ï¼Œæ˜¯ä¸è¢«å…è®¸çš„ï¼Œåç»‘å®šçš„äº‹ä»¶ä¼šè¦†ç›–ä¹‹å‰çš„äº‹ä»¶

  åˆ é™¤ `DOM0` çº§äº‹ä»¶å¤„ç†ç¨‹åºåªè¦å°†å¯¹åº”äº‹ä»¶å±æ€§ç½®ä¸º`null`å³å¯

  ```js
  btn.onclick = null;
  ```

**æ ‡å‡†äº‹ä»¶æ¨¡å‹**

åœ¨è¯¥äº‹ä»¶æ¨¡å‹ä¸­ï¼Œä¸€æ¬¡äº‹ä»¶å…±æœ‰ä¸‰ä¸ªè¿‡ç¨‹:

- äº‹ä»¶æ•è·é˜¶æ®µï¼šäº‹ä»¶ä»`document`ä¸€ç›´å‘ä¸‹ä¼ æ’­åˆ°ç›®æ ‡å…ƒç´ , ä¾æ¬¡æ£€æŸ¥ç»è¿‡çš„èŠ‚ç‚¹æ˜¯å¦ç»‘å®šäº†äº‹ä»¶ç›‘å¬å‡½æ•°ï¼Œå¦‚æœæœ‰åˆ™æ‰§è¡Œ
- äº‹ä»¶å¤„ç†é˜¶æ®µï¼šäº‹ä»¶åˆ°è¾¾ç›®æ ‡å…ƒç´ , è§¦å‘ç›®æ ‡å…ƒç´ çš„ç›‘å¬å‡½æ•°
- äº‹ä»¶å†’æ³¡é˜¶æ®µï¼šäº‹ä»¶ä»ç›®æ ‡å…ƒç´ å†’æ³¡åˆ°`document`, ä¾æ¬¡æ£€æŸ¥ç»è¿‡çš„èŠ‚ç‚¹æ˜¯å¦ç»‘å®šäº†äº‹ä»¶ç›‘å¬å‡½æ•°ï¼Œå¦‚æœæœ‰åˆ™æ‰§è¡Œ

äº‹ä»¶ç»‘å®šç›‘å¬å‡½æ•°çš„æ–¹å¼å¦‚ä¸‹:

```text
addEventListener(eventType, handler, useCapture)
```

äº‹ä»¶ç§»é™¤ç›‘å¬å‡½æ•°çš„æ–¹å¼å¦‚ä¸‹:

```text
removeEventListener(eventType, handler, useCapture)
```

å‚æ•°å¦‚ä¸‹ï¼š

- `eventType`æŒ‡å®šäº‹ä»¶ç±»å‹(ä¸è¦åŠ on)
- `handler`æ˜¯äº‹ä»¶å¤„ç†å‡½æ•°
- `useCapture`æ˜¯ä¸€ä¸ª`boolean`ç”¨äºæŒ‡å®šæ˜¯å¦åœ¨æ•è·é˜¶æ®µè¿›è¡Œå¤„ç†ï¼Œä¸€èˆ¬è®¾ç½®ä¸º`false`ä¸IEæµè§ˆå™¨ä¿æŒä¸€è‡´

ä¸¾ä¸ªä¾‹å­ï¼š

```js
var btn = document.getElementById('.btn');
btn.addEventListener(â€˜clickâ€™, showMessage, false);
btn.removeEventListener(â€˜clickâ€™, showMessage, false);
```

ç‰¹æ€§

- å¯ä»¥åœ¨ä¸€ä¸ª`DOM`å…ƒç´ ä¸Šç»‘å®šå¤šä¸ªäº‹ä»¶å¤„ç†å™¨ï¼Œå„è‡ªå¹¶ä¸ä¼šå†²çª

```js
btn.addEventListener(â€˜clickâ€™, showMessage1, false);
btn.addEventListener(â€˜clickâ€™, showMessage2, false);
btn.addEventListener(â€˜clickâ€™, showMessage3, false);
```

- æ‰§è¡Œæ—¶æœº

å½“ç¬¬ä¸‰ä¸ªå‚æ•°(`useCapture`)è®¾ç½®ä¸º`true`å°±åœ¨æ•è·è¿‡ç¨‹ä¸­æ‰§è¡Œï¼Œåä¹‹åœ¨å†’æ³¡è¿‡ç¨‹ä¸­æ‰§è¡Œå¤„ç†å‡½æ•°

ä¸‹é¢ä¸¾ä¸ªä¾‹å­ï¼š

```js
<div id='div'>
    <p id='p'>
        <span id='span'>Click Me!</span>
    </p >
</div>
```

è®¾ç½®ç‚¹å‡»äº‹ä»¶

```js
var div = document.getElementById('div');
var p = document.getElementById('p');

function onClickFn (event) {
    var tagName = event.currentTarget.tagName;
    var phase = event.eventPhase;
    console.log(tagName, phase);
}

div.addEventListener('click', onClickFn, false);
p.addEventListener('click', onClickFn, false);
```

ä¸Šè¿°ä½¿ç”¨äº†`eventPhase`ï¼Œè¿”å›ä¸€ä¸ªä»£è¡¨å½“å‰æ‰§è¡Œé˜¶æ®µçš„æ•´æ•°å€¼ã€‚1ä¸ºæ•è·é˜¶æ®µã€2ä¸ºäº‹ä»¶å¯¹è±¡è§¦å‘é˜¶æ®µã€3ä¸ºå†’æ³¡é˜¶æ®µ

ç‚¹å‡»`Click Me!`ï¼Œè¾“å‡ºå¦‚ä¸‹

```js
P 3
DIV 3
```

å¯ä»¥çœ‹åˆ°ï¼Œ`p`å’Œ`div`éƒ½æ˜¯åœ¨å†’æ³¡é˜¶æ®µå“åº”äº†äº‹ä»¶ï¼Œç”±äºå†’æ³¡çš„ç‰¹æ€§ï¼Œè£¹åœ¨é‡Œå±‚çš„`p`ç‡å…ˆåšå‡ºå“åº”

å¦‚æœæŠŠç¬¬ä¸‰ä¸ªå‚æ•°éƒ½æ”¹ä¸º`true`

```js
div.addEventListener('click', onClickFn, true);
p.addEventListener('click', onClickFn, true);
```

è¾“å‡ºå¦‚ä¸‹

```js
DIV 1
P 1
```

ä¸¤è€…éƒ½æ˜¯åœ¨æ•è·é˜¶æ®µå“åº”äº‹ä»¶ï¼Œæ‰€ä»¥`div`æ¯”`p`æ ‡ç­¾å…ˆåšå‡ºå“åº”

### é—®é¢˜13ï¼štypeof ä¸ instanceof åŒºåˆ«

![img](é¢è¯•JavaScript.assets/3fc158f0-7710-11eb-ab90-d9ae814b240d.png)

ğŸ¦ˆè¦æ±‚ï¼šæ‰‹å†™æ•°æ®ç±»å‹åˆ¤æ–­ï¼ŒåŒ…æ‹¬`instanceofåŸç†`å’Œé€šç”¨çš„æ•°æ®ç±»å‹åˆ¤æ–­æ–¹æ³•`Object.prototype.toString`ã€‚

- `typeof`ç”¨äºåˆ¤æ–­åŸå§‹æ•°æ®ç±»å‹ï¼ˆæˆ–è€…å¯¹è±¡ï¼‰
- `instanceof`ç”¨äºåˆ¤æ–­å¼•ç”¨æ•°æ®ç±»å‹

**typeof**

**instancof**

`instanceof` è¿ç®—ç¬¦ç”¨äºæ£€æµ‹æ„é€ å‡½æ•°çš„ `prototype` å±æ€§æ˜¯å¦å‡ºç°åœ¨æŸä¸ªå®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ä¸Šã€‚

ğŸ¦ˆ

ä½¿ç”¨å¦‚ä¸‹ï¼š

```js
object instanceof constructor
```

`object`ä¸ºå®ä¾‹å¯¹è±¡ï¼Œ`constructor`ä¸ºæ„é€ å‡½æ•°

æ„é€ å‡½æ•°é€šè¿‡`new`å¯ä»¥å®ä¾‹å¯¹è±¡ï¼Œ`instanceof`èƒ½åˆ¤æ–­è¿™ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ä¹‹å‰é‚£ä¸ªæ„é€ å‡½æ•°ç”Ÿæˆçš„å¯¹è±¡

```js
// å®šä¹‰æ„å»ºå‡½æ•°
let Car = function() {}
let benz = new Car()
benz instanceof Car // true
let car = new String('xxx')
car instanceof String // true
let str = 'xxx'
str instanceof String // false
```

å…³äº`instanceof`çš„å®ç°åŸç†ï¼Œå¯ä»¥å‚è€ƒä¸‹é¢ï¼š

```js
function myInstanceof(left, right) {
    // è¿™é‡Œå…ˆç”¨typeofæ¥åˆ¤æ–­åŸºç¡€æ•°æ®ç±»å‹ï¼Œå¦‚æœæ˜¯ï¼Œç›´æ¥è¿”å›false
    if(typeof left !== 'object' || left === null) return false;
    // getProtypeOfæ˜¯Objectå¯¹è±¡è‡ªå¸¦çš„APIï¼Œèƒ½å¤Ÿæ‹¿åˆ°å‚æ•°çš„åŸå‹å¯¹è±¡
    let proto = Object.getPrototypeOf(left);
    while(true) {                  
        if(proto === null) return false;
        if(proto === right.prototype) return true;//æ‰¾åˆ°ç›¸åŒåŸå‹å¯¹è±¡ï¼Œè¿”å›true
        proto = Object.getPrototypeof(proto);
    }
}
```

ä¹Ÿå°±æ˜¯é¡ºç€åŸå‹é“¾å»æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ç›¸åŒçš„åŸå‹å¯¹è±¡ï¼Œè¿”å›`true`ï¼Œå¦åˆ™ä¸º`false`ã€‚

**åŒºåˆ«**

`typeof`ä¸`instanceof`éƒ½æ˜¯åˆ¤æ–­æ•°æ®ç±»å‹çš„æ–¹æ³•ï¼ŒåŒºåˆ«å¦‚ä¸‹ï¼š

- `typeof`ä¼šè¿”å›ä¸€ä¸ªå˜é‡çš„åŸºæœ¬ç±»å‹ï¼Œ`instanceof`è¿”å›çš„æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼
- `instanceof` å¯ä»¥å‡†ç¡®åœ°åˆ¤æ–­å¤æ‚å¼•ç”¨æ•°æ®ç±»å‹ï¼Œä½†æ˜¯ä¸èƒ½æ­£ç¡®åˆ¤æ–­åŸºç¡€æ•°æ®ç±»å‹
- è€Œ`typeof` ä¹Ÿå­˜åœ¨å¼Šç«¯ï¼Œå®ƒè™½ç„¶å¯ä»¥åˆ¤æ–­åŸºç¡€æ•°æ®ç±»å‹ï¼ˆ`null` é™¤å¤–ï¼‰ï¼Œä½†æ˜¯å¼•ç”¨æ•°æ®ç±»å‹ä¸­ï¼Œé™¤äº†`function` ç±»å‹ä»¥å¤–ï¼Œå…¶ä»–çš„ä¹Ÿæ— æ³•åˆ¤æ–­

å¯ä»¥çœ‹åˆ°ï¼Œä¸Šè¿°ä¸¤ç§æ–¹æ³•éƒ½æœ‰å¼Šç«¯ï¼Œå¹¶ä¸èƒ½æ»¡è¶³æ‰€æœ‰åœºæ™¯çš„éœ€æ±‚

å¦‚æœéœ€è¦é€šç”¨æ£€æµ‹æ•°æ®ç±»å‹ï¼Œå¯ä»¥é‡‡ç”¨`Object.prototype.toString`ï¼Œè°ƒç”¨è¯¥æ–¹æ³•ï¼Œç»Ÿä¸€è¿”å›æ ¼å¼`â€œ[object Xxx]â€`çš„å­—ç¬¦ä¸²

å¦‚ä¸‹

```js
Object.prototype.toString({})       // "[object Object]"
Object.prototype.toString.call({})  // åŒä¸Šç»“æœï¼ŒåŠ ä¸Šcallä¹Ÿok
Object.prototype.toString.call(1)    // "[object Number]"
Object.prototype.toString.call('1')  // "[object String]"
Object.prototype.toString.call(true)  // "[object Boolean]"
Object.prototype.toString.call(function(){})  // "[object Function]"
Object.prototype.toString.call(null)   //"[object Null]"
Object.prototype.toString.call(undefined) //"[object Undefined]"
Object.prototype.toString.call(/123/g)    //"[object RegExp]"
Object.prototype.toString.call(new Date()) //"[object Date]"
Object.prototype.toString.call([])       //"[object Array]"
Object.prototype.toString.call(document)  //"[object HTMLDocument]"
Object.prototype.toString.call(window)   //"[object Window]"
```

äº†è§£äº†`toString`çš„åŸºæœ¬ç”¨æ³•ï¼Œä¸‹é¢å°±å®ç°ä¸€ä¸ªå…¨å±€é€šç”¨çš„æ•°æ®ç±»å‹åˆ¤æ–­æ–¹æ³•

```js

// æŠŠtypeofå’ŒObject.prototype.toString.call()ç»“åˆèµ·æ¥
// ä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨Object.prototype.toString.call()ï¼Œä»¥é˜²toStringè¢«é‡å†™function getType(obj){
let type  = typeof obj;
if (type !== "object") {    // å…ˆè¿›è¡Œtypeofåˆ¤æ–­ï¼Œå¦‚æœæ˜¯åŸºç¡€æ•°æ®ç±»å‹ï¼Œç›´æ¥è¿”å›
  return type;
}
// å¯¹äºtypeofè¿”å›ç»“æœæ˜¯objectçš„ï¼Œå†è¿›è¡Œå¦‚ä¸‹çš„åˆ¤æ–­ï¼Œæ­£åˆ™è¿”å›ç»“æœ
return Object.prototype.toString.call(obj).replace(/^\[object (\S+)\]$/, '$1'); 
}
```

ä½¿ç”¨å¦‚ä¸‹

```js
getType([])     // "Array" typeof []æ˜¯objectï¼Œå› æ­¤toStringè¿”å›
getType('123')  // "string" typeof ç›´æ¥è¿”å›
getType(window) // "Window" toStringè¿”å›
getType(null)   // "Null"é¦–å­—æ¯å¤§å†™ï¼Œtypeof nullæ˜¯objectï¼Œéœ€toStringæ¥åˆ¤æ–­
getType(undefined)   // "undefined" typeof ç›´æ¥è¿”å›
getType()            // "undefined" typeof ç›´æ¥è¿”å›
getType(function(){}) // "function" typeofèƒ½åˆ¤æ–­ï¼Œå› æ­¤é¦–å­—æ¯å°å†™
getType(/123/g)      //"RegExp" toStringè¿”å›
```

### é—®é¢˜14ï¼šè§£é‡Šä¸‹ä»€ä¹ˆæ˜¯äº‹ä»¶ä»£ç†ï¼Ÿåº”ç”¨åœºæ™¯ï¼Ÿ

![img](é¢è¯•JavaScript.assets/a33f0ab0-797e-11eb-ab90-d9ae814b240d.png)

ğŸ¦ˆæ€è€ƒï¼šè‡ªå·±é¡¹ç›®ä¸­çš„äº‹ä»¶å¤„ç†å‡½æ•°èƒ½ä¸èƒ½é‡‡ç”¨äº‹ä»¶ä»£ç†çš„æ–¹å¼ç»Ÿä¸€å»å¤„ç†ã€‚

**æ˜¯ä»€ä¹ˆ**

äº‹ä»¶ä»£ç†ï¼Œä¿—åœ°æ¥è®²ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªå…ƒç´ å“åº”äº‹ä»¶ï¼ˆ`click`ã€`keydown`......ï¼‰çš„å‡½æ•°å§”æ‰˜åˆ°å¦ä¸€ä¸ªå…ƒç´ 

å‰é¢è®²åˆ°ï¼Œäº‹ä»¶æµçš„éƒ½ä¼šç»è¿‡ä¸‰ä¸ªé˜¶æ®µï¼š æ•è·é˜¶æ®µ -> ç›®æ ‡é˜¶æ®µ -> å†’æ³¡é˜¶æ®µï¼Œè€Œäº‹ä»¶å§”æ‰˜å°±æ˜¯åœ¨å†’æ³¡é˜¶æ®µå®Œæˆ

äº‹ä»¶å§”æ‰˜ï¼Œä¼šæŠŠä¸€ä¸ªæˆ–è€…ä¸€ç»„å…ƒç´ çš„äº‹ä»¶å§”æ‰˜åˆ°å®ƒçš„çˆ¶å±‚æˆ–è€…æ›´å¤–å±‚å…ƒç´ ä¸Šï¼ŒçœŸæ­£ç»‘å®šäº‹ä»¶çš„æ˜¯å¤–å±‚å…ƒç´ ï¼Œè€Œä¸æ˜¯ç›®æ ‡å…ƒç´ 

å½“äº‹ä»¶å“åº”åˆ°ç›®æ ‡å…ƒç´ ä¸Šæ—¶ï¼Œä¼šé€šè¿‡äº‹ä»¶å†’æ³¡æœºåˆ¶ä»è€Œè§¦å‘å®ƒçš„å¤–å±‚å…ƒç´ çš„ç»‘å®šäº‹ä»¶ä¸Šï¼Œç„¶ååœ¨å¤–å±‚å…ƒç´ ä¸Šå»æ‰§è¡Œå‡½æ•°

ä¸‹é¢ä¸¾ä¸ªä¾‹å­ï¼š

æ¯”å¦‚ä¸€ä¸ªå®¿èˆçš„åŒå­¦åŒæ—¶å¿«é€’åˆ°äº†ï¼Œä¸€ç§ç¬¨æ–¹æ³•å°±æ˜¯ä»–ä»¬ä¸€ä¸ªä¸ªå»é¢†å–

è¾ƒä¼˜æ–¹æ³•å°±æ˜¯æŠŠè¿™ä»¶äº‹æƒ…å§”æ‰˜ç»™å®¿èˆé•¿ï¼Œè®©ä¸€ä¸ªäººå‡ºå»æ‹¿å¥½æ‰€æœ‰å¿«é€’ï¼Œç„¶åå†æ ¹æ®æ”¶ä»¶äººä¸€ä¸€åˆ†å‘ç»™æ¯ä¸ªåŒå­¦

åœ¨è¿™é‡Œï¼Œå–å¿«é€’å°±æ˜¯ä¸€ä¸ªäº‹ä»¶ï¼Œæ¯ä¸ªåŒå­¦æŒ‡çš„æ˜¯éœ€è¦å“åº”äº‹ä»¶çš„ `DOM`å…ƒç´ ï¼Œè€Œå‡ºå»ç»Ÿä¸€é¢†å–å¿«é€’çš„å®¿èˆé•¿å°±æ˜¯ä»£ç†çš„å…ƒç´ 

æ‰€ä»¥çœŸæ­£ç»‘å®šäº‹ä»¶çš„æ˜¯è¿™ä¸ªå…ƒç´ ï¼ŒæŒ‰ç…§æ”¶ä»¶äººåˆ†å‘å¿«é€’çš„è¿‡ç¨‹å°±æ˜¯åœ¨äº‹ä»¶æ‰§è¡Œä¸­ï¼Œéœ€è¦åˆ¤æ–­å½“å‰å“åº”çš„äº‹ä»¶åº”è¯¥åŒ¹é…åˆ°è¢«ä»£ç†å…ƒç´ ä¸­çš„å“ªä¸€ä¸ªæˆ–è€…å“ªå‡ ä¸ª

**åº”ç”¨åœºæ™¯**

åˆ—è¡¨é¡¹ä¸¾ä¾‹

- æ¯ä¸ªåˆ—è¡¨é¡¹éƒ½ç»‘å®šä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œå†…å­˜æ¶ˆè€—è¾ƒå¤§
- åŠ¨æ€å¢åŠ æˆ–è§£ç»‘äº‹ä»¶æ—¶ï¼Œæ“ä½œç¹çç›æ³•ã€‚

å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªåˆ—è¡¨ï¼Œåˆ—è¡¨ä¹‹ä¸­æœ‰å¤§é‡çš„åˆ—è¡¨é¡¹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç‚¹å‡»åˆ—è¡¨é¡¹çš„æ—¶å€™å“åº”ä¸€ä¸ªäº‹ä»¶

```js
<ul id="list">
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
  ......
  <li>item n</li>
</ul>
```

å¦‚æœç»™æ¯ä¸ªåˆ—è¡¨é¡¹ä¸€ä¸€éƒ½ç»‘å®šä¸€ä¸ªå‡½æ•°ï¼Œé‚£å¯¹äºå†…å­˜æ¶ˆè€—æ˜¯éå¸¸å¤§çš„

```js
// è·å–ç›®æ ‡å…ƒç´ 
const lis = document.getElementsByTagName("li")
// å¾ªç¯éå†ç»‘å®šäº‹ä»¶
for (let i = 0; i < lis.length; i++) {
    lis[i].onclick = function(e){
        console.log(e.target.innerHTML)
    }
}
```

è¿™æ—¶å€™å°±å¯ä»¥äº‹ä»¶å§”æ‰˜ï¼ŒæŠŠç‚¹å‡»äº‹ä»¶ç»‘å®šåœ¨çˆ¶çº§å…ƒç´ `ul`ä¸Šé¢ï¼Œç„¶åæ‰§è¡Œäº‹ä»¶çš„æ—¶å€™å†å»åŒ¹é…ç›®æ ‡å…ƒç´ 

```js
// ç»™çˆ¶å±‚å…ƒç´ ç»‘å®šäº‹ä»¶
document.getElementById('list').addEventListener('click', function (e) {
    // å…¼å®¹æ€§å¤„ç†
    var event = e || window.event;
    var target = event.target || event.srcElement;
    // åˆ¤æ–­æ˜¯å¦åŒ¹é…ç›®æ ‡å…ƒç´ 
    if (target.nodeName.toLocaleLowerCase === 'li') {
        console.log('the content is: ', target.innerHTML);
    }
});
```

è¿˜æœ‰ä¸€ç§åœºæ™¯æ˜¯ä¸Šè¿°åˆ—è¡¨é¡¹å¹¶ä¸å¤šï¼Œæˆ‘ä»¬ç»™æ¯ä¸ªåˆ—è¡¨é¡¹éƒ½ç»‘å®šäº†äº‹ä»¶

ä½†æ˜¯å¦‚æœç”¨æˆ·èƒ½å¤Ÿéšæ—¶åŠ¨æ€çš„å¢åŠ æˆ–è€…å»é™¤åˆ—è¡¨é¡¹å…ƒç´ ï¼Œé‚£ä¹ˆåœ¨æ¯ä¸€æ¬¡æ”¹å˜çš„æ—¶å€™éƒ½éœ€è¦é‡æ–°ç»™æ–°å¢çš„å…ƒç´ ç»‘å®šäº‹ä»¶ï¼Œç»™å³å°†åˆ å»çš„å…ƒç´ è§£ç»‘äº‹ä»¶

å¦‚æœç”¨äº†äº‹ä»¶å§”æ‰˜å°±æ²¡æœ‰è¿™ç§éº»çƒ¦äº†ï¼Œå› ä¸ºäº‹ä»¶æ˜¯ç»‘å®šåœ¨çˆ¶å±‚çš„ï¼Œå’Œç›®æ ‡å…ƒç´ çš„å¢å‡æ˜¯æ²¡æœ‰å…³ç³»çš„ï¼Œæ‰§è¡Œåˆ°ç›®æ ‡å…ƒç´ æ˜¯åœ¨çœŸæ­£å“åº”æ‰§è¡Œäº‹ä»¶å‡½æ•°çš„è¿‡ç¨‹ä¸­å»åŒ¹é…çš„

ä¸¾ä¸ªä¾‹å­ï¼š

ä¸‹é¢`html`ç»“æ„ä¸­ï¼Œç‚¹å‡»`input`å¯ä»¥åŠ¨æ€æ·»åŠ å…ƒç´ 

```html
<input type="button" name="" id="btn" value="æ·»åŠ " />
<ul id="ul1">
    <li>item 1</li>
    <li>item 2</li>
    <li>item 3</li>
    <li>item 4</li>
</ul>
```

ä½¿ç”¨äº‹ä»¶å§”æ‰˜

```js
const oBtn = document.getElementById("btn");
const oUl = document.getElementById("ul1");
const num = 4;

//äº‹ä»¶å§”æ‰˜ï¼Œæ·»åŠ çš„å­å…ƒç´ ä¹Ÿæœ‰äº‹ä»¶
oUl.onclick = function (ev) {
    ev = ev || window.event;
    const target = ev.target || ev.srcElement;
    if (target.nodeName.toLowerCase() == 'li') {
        console.log('the content is: ', target.innerHTML);
    }

};

//æ·»åŠ æ–°èŠ‚ç‚¹
oBtn.onclick = function () {
    num++;
    const oLi = document.createElement('li');
    oLi.innerHTML = `item ${num}`;
    oUl.appendChild(oLi);
};
```

å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨äº‹ä»¶å§”æ‰˜ï¼Œåœ¨åŠ¨æ€ç»‘å®šäº‹ä»¶çš„æƒ…å†µä¸‹æ˜¯å¯ä»¥å‡å°‘å¾ˆå¤šé‡å¤å·¥ä½œçš„

**æ€»ç»“**

é€‚åˆäº‹ä»¶å§”æ‰˜çš„äº‹ä»¶æœ‰ï¼š`click`ï¼Œ`mousedown`ï¼Œ`mouseup`ï¼Œ`keydown`ï¼Œ`keyup`ï¼Œ`keypress`

ä»ä¸Šé¢åº”ç”¨åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°ä½¿ç”¨äº‹ä»¶å§”æ‰˜å­˜åœ¨ä¸¤å¤§ä¼˜ç‚¹ï¼š

- å‡å°‘æ•´ä¸ªé¡µé¢æ‰€éœ€çš„å†…å­˜ï¼Œæå‡æ•´ä½“æ€§èƒ½
- åŠ¨æ€ç»‘å®šï¼Œå‡å°‘é‡å¤å·¥ä½œ

ä½†æ˜¯ä½¿ç”¨äº‹ä»¶å§”æ‰˜ä¹Ÿæ˜¯å­˜åœ¨å±€é™æ€§ï¼š

- `focus`ã€`blur`è¿™äº›äº‹ä»¶æ²¡æœ‰äº‹ä»¶å†’æ³¡æœºåˆ¶ï¼Œæ‰€ä»¥æ— æ³•è¿›è¡Œå§”æ‰˜ç»‘å®šäº‹ä»¶
- `mousemove`ã€`mouseout`è¿™æ ·çš„äº‹ä»¶ï¼Œè™½ç„¶æœ‰äº‹ä»¶å†’æ³¡ï¼Œä½†æ˜¯åªèƒ½ä¸æ–­é€šè¿‡ä½ç½®å»è®¡ç®—å®šä½ï¼Œå¯¹æ€§èƒ½æ¶ˆè€—é«˜ï¼Œå› æ­¤ä¹Ÿæ˜¯ä¸é€‚åˆäºäº‹ä»¶å§”æ‰˜çš„

å¦‚æœæŠŠæ‰€æœ‰äº‹ä»¶éƒ½ç”¨äº‹ä»¶ä»£ç†ï¼Œå¯èƒ½ä¼šå‡ºç°äº‹ä»¶è¯¯åˆ¤ï¼Œå³æœ¬ä¸è¯¥è¢«è§¦å‘çš„äº‹ä»¶è¢«ç»‘å®šä¸Šäº†äº‹ä»¶

### é—®é¢˜15ï¼šè¯´è¯´newæ“ä½œç¬¦å…·ä½“å¹²äº†ä»€ä¹ˆï¼Ÿ

**ä¸€ã€æ˜¯ä»€ä¹ˆ**

åœ¨`JavaScript`ä¸­ï¼Œ`new`æ“ä½œç¬¦ç”¨äºåˆ›å»ºä¸€ä¸ªç»™å®šæ„é€ å‡½æ•°çš„å®ä¾‹å¯¹è±¡

ä¾‹å­

```js
function Person(name, age){
    this.name = name;
    this.age = age;
}
Person.prototype.sayName = function () {
    console.log(this.name)
}
const person1 = new Person('Tom', 20)
console.log(person1)  // Person {name: "Tom", age: 20}
t.sayName() // 'Tom'
```

ä»ä¸Šé¢å¯ä»¥çœ‹åˆ°ï¼š

- `new` é€šè¿‡æ„é€ å‡½æ•° `Person` åˆ›å»ºå‡ºæ¥çš„å®ä¾‹å¯ä»¥è®¿é—®åˆ°æ„é€ å‡½æ•°ä¸­çš„å±æ€§
- `new` é€šè¿‡æ„é€ å‡½æ•° `Person` åˆ›å»ºå‡ºæ¥çš„å®ä¾‹å¯ä»¥è®¿é—®åˆ°æ„é€ å‡½æ•°åŸå‹é“¾ä¸­çš„å±æ€§ï¼ˆå³å®ä¾‹ä¸æ„é€ å‡½æ•°é€šè¿‡åŸå‹é“¾è¿æ¥äº†èµ·æ¥ï¼‰

ç°åœ¨åœ¨æ„å»ºå‡½æ•°ä¸­æ˜¾å¼åŠ ä¸Šè¿”å›å€¼ï¼Œå¹¶ä¸”è¿™ä¸ªè¿”å›å€¼æ˜¯ä¸€ä¸ªåŸå§‹ç±»å‹

```js
function Test(name) {
  this.name = name
  return 1
}
const t = new Test('xxx')
console.log(t.name) // 'xxx'
```



å¯ä»¥å‘ç°ï¼Œæ„é€ å‡½æ•°ä¸­è¿”å›ä¸€ä¸ªåŸå§‹å€¼ï¼Œç„¶è€Œè¿™ä¸ªè¿”å›å€¼å¹¶æ²¡æœ‰ä½œç”¨

ä¸‹é¢åœ¨æ„é€ å‡½æ•°ä¸­è¿”å›ä¸€ä¸ªå¯¹è±¡

```js
function Test(name) {
  this.name = name
  console.log(this) // Test { name: 'xxx' }
  return { age: 26 }
}
const t = new Test('xxx')
console.log(t) // { age: 26 }
console.log(t.name) // 'undefined'
```



ä»ä¸Šé¢å¯ä»¥å‘ç°ï¼Œæ„é€ å‡½æ•°å¦‚æœè¿”å›å€¼ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆè¿™ä¸ªè¿”å›å€¼ä¼šè¢«æ­£å¸¸ä½¿ç”¨

**äºŒã€æµç¨‹**

ä»ä¸Šé¢ä»‹ç»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°`new`å…³é”®å­—ä¸»è¦åšäº†ä»¥ä¸‹çš„å·¥ä½œï¼š

- åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡`obj`
- å°†å¯¹è±¡ä¸æ„å»ºå‡½æ•°é€šè¿‡åŸå‹é“¾è¿æ¥èµ·æ¥
- å°†æ„å»ºå‡½æ•°ä¸­çš„`this`ç»‘å®šåˆ°æ–°å»ºçš„å¯¹è±¡`obj`ä¸Š
- æ ¹æ®æ„å»ºå‡½æ•°è¿”å›ç±»å‹ä½œåˆ¤æ–­ï¼Œå¦‚æœæ˜¯åŸå§‹å€¼åˆ™è¢«å¿½ç•¥ï¼Œå¦‚æœæ˜¯è¿”å›å¯¹è±¡ï¼Œéœ€è¦æ­£å¸¸å¤„ç†

ä¸¾ä¸ªä¾‹å­ï¼š

```js
function Person(name, age){
    this.name = name;
    this.age = age;
}
const person1 = new Person('Tom', 20)
console.log(person1)  // Person {name: "Tom", age: 20}
t.sayName() // 'Tom'
```

æµç¨‹å›¾å¦‚ä¸‹ï¼š

![img](é¢è¯•JavaScript.assets/b429b990-7a39-11eb-85f6-6fac77c0c9b3.png)

**ä¸‰ã€æ‰‹å†™newæ“ä½œç¬¦**

ç°åœ¨æˆ‘ä»¬å·²ç»æ¸…æ¥šåœ°æŒæ¡äº†`new`çš„æ‰§è¡Œè¿‡ç¨‹

é‚£ä¹ˆæˆ‘ä»¬å°±åŠ¨æ‰‹æ¥å®ç°ä¸€ä¸‹`new`

```js
function mynew(Func, ...args) {
    // 1.åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡
    const obj = {}
    // 2.æ–°å¯¹è±¡åŸå‹æŒ‡å‘æ„é€ å‡½æ•°åŸå‹å¯¹è±¡
    obj.__proto__ = Func.prototype
    // 3.å°†æ„å»ºå‡½æ•°çš„thisæŒ‡å‘æ–°å¯¹è±¡
    let result = Func.apply(obj, args)
    // 4.æ ¹æ®è¿”å›å€¼åˆ¤æ–­
    return result instanceof Object ? result : obj
}
```

æµ‹è¯•ä¸€ä¸‹

```js
function mynew(func, ...args) {
    const obj = {}
    obj.__proto__ = func.prototype
    let result = func.apply(obj, args)
    return result instanceof Object ? result : obj
}
function Person(name, age) {
    this.name = name;
    this.age = age;
}
Person.prototype.say = function () {
    console.log(this.name)
}

let p = mynew(Person, "huihui", 123)
console.log(p) // Person {name: "huihui", age: 123}
p.say() // huihui
```

å¯ä»¥å‘ç°ï¼Œä»£ç è™½ç„¶å¾ˆçŸ­ï¼Œä½†æ˜¯èƒ½å¤Ÿæ¨¡æ‹Ÿå®ç°`new`

### é—®é¢˜16ï¼šbindã€callã€apply åŒºåˆ«ï¼Ÿå¦‚ä½•å®ç°ä¸€ä¸ªbind?

![img](é¢è¯•JavaScript.assets/a900e460-7be4-11eb-ab90-d9ae814b240d.png)

**apply()ã€call()ã€bind()è¯¦è§£**

- **apply()**

  è¯­æ³•

  ```js
  apply(thisArg)
  apply(thisArg, argsArray)
  // thisArgï¼šthisçš„æŒ‡å‘ï¼›argsArrayï¼šæ•°ç»„æˆ–ç±»æ•°ç»„
  // å«ä¹‰ï¼šå³æŠŠä¸€ä¸ªç±»æ•°ç»„å‚æ•°argsArrayçš„thisç»‘å®šåˆ°thisArgä¸Š
  ```

  thisArgï¼šthisçš„æŒ‡å‘ï¼›æŒ‡å®šä¸º `null` æˆ– `undefined` æ—¶ä¼šè‡ªåŠ¨æ›¿æ¢ä¸ºæŒ‡å‘å…¨å±€å¯¹è±¡ï¼ŒåŸå§‹å€¼ä¼šè¢«åŒ…è£…ã€‚
  argsArrayï¼šæ•°ç»„æˆ–ç±»æ•°ç»„ï¼›å¦‚æœè¯¥å‚æ•°çš„å€¼ä¸º [`null`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/null) æˆ–  [`undefined`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/undefined)ï¼Œåˆ™è¡¨ç¤ºä¸éœ€è¦ä¼ å…¥ä»»ä½•å‚æ•°ã€‚

  å®ä¾‹

  - å®ä¾‹ä¸€ï¼š[ç”¨ `apply` å°†æ•°ç»„å„é¡¹æ·»åŠ åˆ°å¦ä¸€ä¸ªæ•°ç»„](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/apply#%E7%94%A8_apply_%E5%B0%86%E6%95%B0%E7%BB%84%E5%90%84%E9%A1%B9%E6%B7%BB%E5%8A%A0%E5%88%B0%E5%8F%A6%E4%B8%80%E4%B8%AA%E6%95%B0%E7%BB%84)

    å‘ä¸€ä¸ªæ•°ç»„ä¸­æ·»åŠ å…ƒç´ æ—¶ï¼Œè¯¥å…ƒç´ æ˜¯æ•°ç»„ï¼Œå¦‚æœä½¿ç”¨`push()`ä¼šå°†æ•´ä¸ªæ•°ç»„æ·»åŠ è¿›å»ï¼Œå¦‚æœæƒ³æŠŠè¢«æ·»åŠ æ•°ç»„ä¸­çš„å…ƒç´ é€ä¸ªæ·»åŠ åˆ°æ•°ç»„ï¼Œå¯ä»¥é‡‡ç”¨`concat()`ï¼Œä½†æ˜¯`cncat()`ä¸æ˜¯å°†å…ƒç´ æ·»åŠ åˆ°ç°æœ‰æ•°ç»„ï¼Œè€Œæ˜¯åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ã€‚æ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨`apply()`ã€‚

    ```js
    const array = ['a', 'b'];
    const elements = [0, 1, 2];
    array.push.apply(array, elements);
    console.info(array); // ["a", "b", 0, 1, 2]
    ```

  - å®ä¾‹äºŒï¼š[ä½¿ç”¨ `apply` å’Œå†…ç½®å‡½æ•°](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/apply#%E4%BD%BF%E7%94%A8_apply_%E5%92%8C%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0)--ã€‹é¿å…å¾ªç¯

    ```js
    // æ‰¾å‡ºæ•°ç»„ä¸­æœ€å¤§/å°çš„æ•°å­—
    const numbers = [5, 6, 2, 3, 7];
    
    // ä½¿ç”¨ Math.min/Math.max ä»¥åŠ apply å‡½æ•°æ—¶çš„ä»£ç 
    let max = Math.max.apply(null, numbers); // åŸºæœ¬ç­‰åŒäº Math.max(numbers[0], ...) æˆ– Math.max(5, 6, ..)
    let min = Math.min.apply(null, numbers);
    ```

- **call**

  è¯­æ³•ï¼š

  ```js
  function.call(thisArg, arg1, arg2, ...)
  ```

  å‚æ•°ï¼š

  thisArgï¼šåœ¨ *function* å‡½æ•°è¿è¡Œæ—¶ä½¿ç”¨çš„ `this` å€¼ã€‚æŒ‡å®šä¸º `null` æˆ– `undefined` æ—¶ä¼šè‡ªåŠ¨æ›¿æ¢ä¸ºæŒ‡å‘å…¨å±€å¯¹è±¡ï¼ŒåŸå§‹å€¼ä¼šè¢«åŒ…è£…ã€‚--ã€‹ğŸ¦ˆå‡½æ•°è°ƒç”¨è€…çš„thisæŒ‡å‘ç¬¬ä¸€ä¸ªå‚æ•°ã€‚

  arg1, arg2, ...ï¼šå‚æ•°åˆ—è¡¨ã€‚

  - å®ä¾‹ä¸€ï¼š[ä½¿ç”¨ `call` æ–¹æ³•è°ƒç”¨çˆ¶æ„é€ å‡½æ•°](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/call#%E4%BD%BF%E7%94%A8_call_%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8%E7%88%B6%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0)

    å¯ä»¥é€šè¿‡è°ƒç”¨çˆ¶æ„é€ å‡½æ•°çš„ `call` æ–¹æ³•æ¥å®ç°ç»§æ‰¿ã€‚

    ```js
    function Product(name, price) {
      this.name = name;
      this.price = price;
    }
    
    function Food(name, price) {
      Product.call(this, name, price);
      this.category = 'food';
    }
    
    function Toy(name, price) {
      Product.call(this, name, price);
      this.category = 'toy';
    }
    
    var cheese = new Food('feta', 5);
    var fun = new Toy('robot', 40);
    ```

  - å®ä¾‹äºŒï¼šä½¿ç”¨`call`æ–¹æ³•è°ƒç”¨å‡½æ•°å¹¶ä¸”æŒ‡å®šä¸Šä¸‹æ–‡çš„`this`

    åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œå½“è°ƒç”¨ `greet` æ–¹æ³•çš„æ—¶å€™ï¼Œè¯¥æ–¹æ³•çš„`this`å€¼ä¼šç»‘å®šåˆ° `obj` å¯¹è±¡ã€‚

    ```js
    function greet() {
      var reply = [this.animal, 'typically sleep between', this.sleepDuration].join(' ');
      console.log(reply);
    }
    
    var obj = {
      animal: 'cats', sleepDuration: '12 and 16 hours'
    };
    
    greet.call(obj);  // cats typically sleep between 12 and 16 hours
    ```

  - å®ä¾‹ä¸‰ï¼š[ä½¿ç”¨ `**call**` æ–¹æ³•è°ƒç”¨å‡½æ•°å¹¶ä¸”ä¸æŒ‡å®šç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆ`argumentï¼‰`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/call#%E4%BD%BF%E7%94%A8_call_%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8%E5%87%BD%E6%95%B0%E5%B9%B6%E4%B8%94%E4%B8%8D%E6%8C%87%E5%AE%9A%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%88argument%EF%BC%89)

    åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨äº† `display` æ–¹æ³•ï¼Œä½†å¹¶æ²¡æœ‰ä¼ é€’å®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚å¦‚æœæ²¡æœ‰ä¼ é€’ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ`this` çš„å€¼å°†ä¼šè¢«ç»‘å®šä¸ºå…¨å±€å¯¹è±¡ã€‚--ã€‹ğŸ¦ˆcallä¸­ä¸ç»™å®šå‚æ•°ï¼Œåˆ™thisæŒ‡å‘å…¨å±€å¯¹è±¡ã€‚

    ```js
    var sData = 'Wisen';
    
    function display() {
      console.log('sData value is %s ', this.sData);
    }
    
    display.call();  // sData value is Wisen
    ```

- **bind**

  å®šä¹‰ï¼š`**bind()**` æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œåœ¨ `bind()` è¢«è°ƒç”¨æ—¶ï¼Œè¿™ä¸ªæ–°å‡½æ•°çš„ `this` è¢«æŒ‡å®šä¸º `bind()` çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè€Œå…¶ä½™å‚æ•°å°†ä½œä¸ºæ–°å‡½æ•°çš„å‚æ•°ï¼Œä¾›è°ƒç”¨æ—¶ä½¿ç”¨ã€‚

  è¯­æ³•

  ```
  function.bind(thisArg[, arg1[, arg2[, ...]]])
  ```

  å®ä¾‹ï¼š

  1. åˆ›å»ºç»‘å®šå‡½æ•°

     ```js
     this.x = 9;    // åœ¨æµè§ˆå™¨ä¸­ï¼Œthis æŒ‡å‘å…¨å±€çš„ "window" å¯¹è±¡
     var module = {
       x: 81,
       getX: function() { return this.x; }
     };
     
     module.getX(); // 81
     
     var retrieveX = module.getX;
     retrieveX();
     // è¿”å› 9 - å› ä¸ºå‡½æ•°æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸä¸­è°ƒç”¨çš„
     
     // åˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ï¼ŒæŠŠ 'this' ç»‘å®šåˆ° module å¯¹è±¡
     // æ–°æ‰‹å¯èƒ½ä¼šå°†å…¨å±€å˜é‡ x ä¸ module çš„å±æ€§ x æ··æ·†
     var boundGetX = retrieveX.bind(module);
     boundGetX(); // 81
     ```

  2. åå‡½æ•°

  3. ä¸setTimeoutä¸€èµ·ä½¿ç”¨

     åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨ [`window.setTimeout()`](https://developer.mozilla.org/zh-CN/docs/Web/API/setTimeout) æ—¶ï¼Œ`this` å…³é”®å­—ä¼šæŒ‡å‘ [`window`](https://developer.mozilla.org/zh-CN/docs/Web/API/Window)ï¼ˆæˆ– `global`ï¼‰å¯¹è±¡ã€‚

     å½“ç±»çš„æ–¹æ³•ä¸­éœ€è¦ `this` æŒ‡å‘ç±»çš„å®ä¾‹æ—¶ï¼Œä½ å¯èƒ½éœ€è¦æ˜¾å¼åœ°æŠŠ `this` ç»‘å®šåˆ°å›è°ƒå‡½æ•°ï¼Œå°±ä¸ä¼šä¸¢å¤±è¯¥å®ä¾‹çš„å¼•ç”¨ã€‚

     ```js
     function LateBloomer() {
       this.petalCount = Math.ceil(Math.random() * 12) + 1;
     }
     
     // åœ¨ 1 ç§’é’Ÿåå£°æ˜ bloom
     LateBloomer.prototype.bloom = function() {
       window.setTimeout(this.declare.bind(this), 1000);
     };
     
     LateBloomer.prototype.declare = function() {
       console.log('I am a beautiful flower with ' +
         this.petalCount + ' petals!');
     };
     
     var flower = new LateBloomer();
     flower.bloom();  // ä¸€ç§’é’Ÿåï¼Œè°ƒç”¨ 'declare' æ–¹æ³•
     ```

     è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªå‡½æ•°`LateBloomer`ï¼Œç„¶å¹´æ·»åŠ æ–¹æ³•`bloom`å¹¶ä¸”æŠŠ`declare`çš„thisç»‘å®šåˆ°å›è°ƒå‡½æ•°ä¸Šï¼Œæ­¤æ—¶ä¸ä¼šä¸¢å¤±è¯¥å®ä¾‹çš„å¼•ç”¨ã€‚

**ä½œç”¨**

`call`ã€`apply`ã€`bind`ä½œç”¨æ˜¯æ”¹å˜å‡½æ•°æ‰§è¡Œæ—¶çš„ä¸Šä¸‹æ–‡ï¼Œç®€è€Œè¨€ä¹‹å°±æ˜¯æ”¹å˜å‡½æ•°è¿è¡Œæ—¶çš„`this`æŒ‡å‘ã€‚

**åŒºåˆ«**

**apply**

`apply`æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯`this`çš„æŒ‡å‘ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å‡½æ•°æ¥å—çš„å‚æ•°ï¼Œä»¥æ•°ç»„çš„å½¢å¼ä¼ å…¥

æ”¹å˜`this`æŒ‡å‘ååŸå‡½æ•°ä¼šç«‹å³æ‰§è¡Œï¼Œä¸”æ­¤æ–¹æ³•åªæ˜¯ä¸´æ—¶æ”¹å˜`this`æŒ‡å‘ä¸€æ¬¡

```js
function fn(...args){
    console.log(this,args);
}
let obj = {
    myname:"å¼ ä¸‰"
}

fn.apply(obj,[1,2]); // thisä¼šå˜æˆä¼ å…¥çš„objï¼Œä¼ å…¥çš„å‚æ•°å¿…é¡»æ˜¯ä¸€ä¸ªæ•°ç»„ï¼›
fn(1,2) // thisæŒ‡å‘window
```

å½“ç¬¬ä¸€ä¸ªå‚æ•°ä¸º`null`ã€`undefined`çš„æ—¶å€™ï¼Œé»˜è®¤æŒ‡å‘`window`(åœ¨æµè§ˆå™¨ä¸­)

```js
fn.apply(null,[1,2]); // thisæŒ‡å‘window
fn.apply(undefined,[1,2]); // thisæŒ‡å‘window
```

**call**

`call`æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¹Ÿæ˜¯`this`çš„æŒ‡å‘ï¼Œåé¢ä¼ å…¥çš„æ˜¯ä¸€ä¸ªå‚æ•°åˆ—è¡¨

è·Ÿ`apply`ä¸€æ ·ï¼Œæ”¹å˜`this`æŒ‡å‘ååŸå‡½æ•°ä¼šç«‹å³æ‰§è¡Œï¼Œä¸”æ­¤æ–¹æ³•åªæ˜¯ä¸´æ—¶æ”¹å˜`this`æŒ‡å‘ä¸€æ¬¡

```js
function fn(...args){
    console.log(this,args);
}
let obj = {
    myname:"å¼ ä¸‰"
}

fn.call(obj,1,2); // thisä¼šå˜æˆä¼ å…¥çš„objï¼Œä¼ å…¥çš„å‚æ•°å¿…é¡»æ˜¯ä¸€ä¸ªæ•°ç»„ï¼›
fn(1,2) // thisæŒ‡å‘window
```

åŒæ ·çš„ï¼Œå½“ç¬¬ä¸€ä¸ªå‚æ•°ä¸º`null`ã€`undefined`çš„æ—¶å€™ï¼Œé»˜è®¤æŒ‡å‘`window`(åœ¨æµè§ˆå™¨ä¸­)

```js
fn.call(null,[1,2]); // thisæŒ‡å‘window
fn.call(undefined,[1,2]); // thisæŒ‡å‘window
```

**bind**

bindæ–¹æ³•å’Œcallå¾ˆç›¸ä¼¼ï¼Œç¬¬ä¸€å‚æ•°ä¹Ÿæ˜¯`this`çš„æŒ‡å‘ï¼Œåé¢ä¼ å…¥çš„ä¹Ÿæ˜¯ä¸€ä¸ªå‚æ•°åˆ—è¡¨(ä½†æ˜¯è¿™ä¸ªå‚æ•°åˆ—è¡¨å¯ä»¥åˆ†å¤šæ¬¡ä¼ å…¥)

æ”¹å˜`this`æŒ‡å‘åä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ°¸ä¹…æ”¹å˜`this`æŒ‡å‘çš„æ–°å‡½æ•°ã€‚

```js
function fn(...args){
    console.log(this,args);
}
let obj = {
    myname:"å¼ ä¸‰"
}

const bindFn = fn.bind(obj); // this ä¹Ÿä¼šå˜æˆä¼ å…¥çš„obj ï¼Œbindä¸æ˜¯ç«‹å³æ‰§è¡Œéœ€è¦æ‰§è¡Œä¸€æ¬¡
bindFn(1,2) // thisæŒ‡å‘obj
fn(1,2) // thisæŒ‡å‘window
```

**å°ç»“**

ä»ä¸Šé¢å¯ä»¥çœ‹åˆ°ï¼Œ`apply`ã€`call`ã€`bind`ä¸‰è€…çš„åŒºåˆ«åœ¨äºï¼š

- ä¸‰è€…éƒ½å¯ä»¥æ”¹å˜å‡½æ•°çš„`this`å¯¹è±¡æŒ‡å‘
- ä¸‰è€…ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯`this`è¦æŒ‡å‘çš„å¯¹è±¡ï¼Œå¦‚æœå¦‚æœæ²¡æœ‰è¿™ä¸ªå‚æ•°æˆ–å‚æ•°ä¸º`undefined`æˆ–`null`ï¼Œåˆ™é»˜è®¤æŒ‡å‘å…¨å±€`window`
- ä¸‰è€…éƒ½å¯ä»¥ä¼ å‚ï¼Œä½†æ˜¯`apply`æ˜¯æ•°ç»„ï¼Œè€Œ`call`æ˜¯å‚æ•°åˆ—è¡¨ï¼Œä¸”`apply`å’Œ`call`æ˜¯ä¸€æ¬¡æ€§ä¼ å…¥å‚æ•°ï¼Œè€Œ`bind`å¯ä»¥åˆ†ä¸ºå¤šæ¬¡ä¼ å…¥
- `bind`æ˜¯è¿”å›ç»‘å®šthisä¹‹åçš„å‡½æ•°ï¼Œ`apply`ã€`call` åˆ™æ˜¯ç«‹å³æ‰§è¡Œ
- åº”ç”¨åœºæ™¯ï¼š`call()`ç”¨äºç»§æ‰¿ï¼Œ`apply()`ç”¨äºå’Œæ•°ç»„æœ‰å…³çš„æƒ…å†µï¼Œ`bind()`

`apply`æ ¹æœ¬åŒºåˆ«åœ¨äºï¼Œ`call()` æ¥å—ä¸€ä¸ª**å‚æ•°åˆ—è¡¨**ï¼Œè€Œ `apply()` æ¥å—ä¸€ä¸ª**å‚æ•°çš„å•æ•°ç»„**ã€‚

ğŸ¦ˆ[å‚è€ƒé£é¸Ÿ](https://lzxjack.top/post?title=call-apply-bind)

**å®ç°**ï¼ˆä¸ç†è§£è¿™ä¸ªæ˜¯æ€ä¹ˆå®ç°çš„ï¼‰

- **call()**

  `call()`æ–¹æ³•è°ƒç”¨ä¸€ä¸ªå¯¹è±¡ã€‚ç®€å•ç†è§£ä¸º**è°ƒç”¨å‡½æ•°**çš„æ–¹å¼ï¼Œä½†æ˜¯å®ƒå¯ä»¥æ”¹å˜å‡½æ•°çš„`this`æŒ‡å‘ã€‚

  - å°†ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸º`call`å‡½æ•°å†…éƒ¨ä¸´æ—¶å¯¹è±¡`obj`
  - ç»™`obj`ä¸€ä¸ªå±æ€§`fn`ï¼Œæˆä¸ºå®é™…æ‰§è¡Œå‡½æ•°ï¼Œå¹¶å°†`this`å…³é”®å­—æŒ‡å‘è¿™ä¸ªå±æ€§
  - æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œå¹¶æ‹¿åˆ°è¿”å›å€¼
  - åˆ é™¤å‡½æ•°å±æ€§
  - è¿”å›å‡½æ•°æ‰§è¡Œçš„ç»“æœ

  ```javascript
  // å®ç°call
  Function.prototype.myCall = function (obj, ...args) {
      // åˆ¤æ–­ä¸Šä¸‹æ–‡
      const newObj = obj ? Object(obj) : global;
      // å°†å‡½æ•°è®¾ç½®ä¸ºå¯¹è±¡çš„å±æ€§
      newObj.fn = this;
      // æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œå¹¶æ‹¿åˆ°è¿”å›å€¼
      const res = newObj.fn(...args);
      // åˆ é™¤è¿™ä¸ªå‡½æ•°å±æ€§
      delete newObj.fn;
      // è¿”å›å€¼
      return res;
  };
  ```

- **apply()**

  å®šä¹‰å’Œcall()ä¸€æ ·ï¼Œåªæ˜¯ä¼ å…¥çš„å‚æ•°ä¸åŒï¼Œ

  `apply`ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä»¥æ•°ç»„å½¢å¼ä¼ é€’çš„ï¼Œæ‰€ä»¥åŸºæœ¬æ­¥éª¤ä¸`call`ä¸€è‡´ï¼Œä¸åŒçš„æ˜¯å‡½æ•°æ‰§è¡Œçš„æ—¶å€™éœ€è¦è¿›è¡Œåˆ¤æ–­æ˜¯å¦ä¼ å…¥äº†ç¬¬äºŒä¸ªå‚æ•°ã€‚å¦‚æœæœ‰ï¼Œå°†å…¶ä¼ å…¥å¹¶æ‰§è¡Œï¼›è‹¥æ²¡æœ‰ï¼Œç›´æ¥æ‰§è¡Œã€‚

  ```javascript
  // å®ç°apply
  Function.prototype.myApply = function (obj, arr) {
      // åˆ¤æ–­ä¸Šä¸‹æ–‡
      const newObj = obj ? Object(obj) : global;
      // å°†å‡½æ•°è®¾ç½®ä¸ºå¯¹è±¡çš„å±æ€§
      newObj.fn = this;
      // æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œå¹¶æ‹¿åˆ°è¿”å›å€¼
      let res;
      if (arr) {
          res = newObj.fn(...arr);
      } else {
          res = newObj.fn();
      }
      // åˆ é™¤è¿™ä¸ªå‡½æ•°å±æ€§
      delete newObj.fn;
      // è¿”å›å€¼
      return res;
  };
  ```

- **bind()**

  `bind()`æ–¹æ³•**ä¸ä¼šè°ƒç”¨å‡½æ•°**ã€‚ä½†æ˜¯èƒ½æ”¹å˜å‡½æ•°å†…éƒ¨`this`æŒ‡å‘ã€‚

  å½“æˆ‘ä»¬åªæ˜¯æƒ³æ”¹å˜`this`æŒ‡å‘ï¼Œå¹¶ä¸”**ä¸æƒ³è°ƒç”¨**è¿™ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨`bind()`ã€‚

  ```javascript
  // å®ç°bind
  Function.prototype.MyBind = function (context) {
      // è°ƒç”¨çš„æ–¹æ³•æœ¬èº«
      const self = this;
      // ç±»æ•°ç»„->çœŸæ•°ç»„
      const args = Array.prototype.slice.call(arguments, 1);
      // ä¸­è½¬å‡½æ•°
      const temp = function () {};
      const fn = function () {
          // å°†æ–°å‡½æ•°æ‰§è¡Œæ—¶çš„å‚æ•°argumentsæ•°ç»„åŒ–ï¼Œç„¶åä¸ç»‘å®šæ—¶çš„å‚æ•°åˆå¹¶
          const newArgs = Array.prototype.slice.call(arguments);
          // å¦‚æœè¢«newè°ƒç”¨ï¼Œthisåº”è¯¥æ˜¯fnçš„å®ä¾‹
          return self.apply(this instanceof fn ? this : context || global, args.concat(newArgs));
      };
      // ä¸­è½¬åŸå‹é“¾
      temp.prototype = self.prototype;
      fn.prototype = new temp();
      return fn;
  };
  ```

### é—®é¢˜16ï¼šè¯´è¯´ä½ å¯¹æ­£åˆ™è¡¨è¾¾å¼çš„ç†è§£ï¼Ÿåº”ç”¨åœºæ™¯ï¼Ÿ

 **ä¸€ã€æ˜¯ä»€ä¹ˆ**

ç”¨åŠ›å•ŠåŒ¹é…å­—ç¬¦ä¸²

åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼çš„ä¸¤ç§æ–¹å¼ï¼š

1. åˆ©ç”¨å­—é¢é‡åˆ›å»ºæ­£åˆ™

   ```js
   // è¯­æ³•ï¼šlet å˜é‡ = /æ¨¡å¼å­—ç¬¦ä¸²/æ ‡è®°å­—ç¬¦ä¸²
   let patter1 = /at/g
   ```

2. æ„é€ å‡½æ•°`RegExp`

   ```js
   const pattern1 = new RegExp('at', 'gi')//å…¨å±€åŒ¹é…atå¹¶å¿½ç•¥å¤§å°å†™
   ```

æ³¨æ„ï¼šé‡åˆ°å…ƒå­—ç¬¦éœ€è¦è½¬ä¹‰ï¼Œé‡‡ç”¨åæ–œæ `\`

**äºŒã€åŒ¹é…è§„åˆ™**

 **match()** æ–¹æ³•æ£€ç´¢è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„ç»“æœã€‚

å¸¸è§çš„æ ¡éªŒè§„åˆ™å¦‚ä¸‹ï¼š

| è§„åˆ™        | æè¿°                                                  |
| ----------- | ----------------------------------------------------- |
| \           | è½¬ä¹‰                                                  |
| ^           | åŒ¹é…è¾“å…¥çš„å¼€å§‹                                        |
| $           | åŒ¹é…è¾“å…¥çš„ç»“æŸ                                        |
| *           | åŒ¹é…å‰ä¸€ä¸ªè¡¨è¾¾å¼ 0 æ¬¡æˆ–å¤šæ¬¡                           |
| +           | åŒ¹é…å‰é¢ä¸€ä¸ªè¡¨è¾¾å¼ 1 æ¬¡æˆ–è€…å¤šæ¬¡ã€‚ç­‰ä»·äº `{1,}`        |
| ?           | åŒ¹é…å‰é¢ä¸€ä¸ªè¡¨è¾¾å¼ 0 æ¬¡æˆ–è€… 1 æ¬¡ã€‚ç­‰ä»·äº`{0,1}`       |
| .           | é»˜è®¤åŒ¹é…é™¤æ¢è¡Œç¬¦ä¹‹å¤–çš„ä»»ä½•å•ä¸ªå­—ç¬¦                    |
| x(?=y)      | åŒ¹é…'x'ä»…ä»…å½“'x'åé¢è·Ÿç€'y'ã€‚è¿™ç§å«åšå…ˆè¡Œæ–­è¨€         |
| (?<=y)x     | åŒ¹é…'x'ä»…å½“'x'å‰é¢æ˜¯'y'.è¿™ç§å«åšåè¡Œæ–­è¨€              |
| x(?!y)      | ä»…ä»…å½“'x'åé¢ä¸è·Ÿç€'y'æ—¶åŒ¹é…'x'ï¼Œè¿™è¢«ç§°ä¸ºæ­£å‘å¦å®šæŸ¥æ‰¾ |
| (?<!*y*)*x* | ä»…ä»…å½“'x'å‰é¢ä¸æ˜¯'y'æ—¶åŒ¹é…'x'ï¼Œè¿™è¢«ç§°ä¸ºåå‘å¦å®šæŸ¥æ‰¾   |
| x\|y        | åŒ¹é…â€˜xâ€™æˆ–è€…â€˜yâ€™                                        |
| {n}         | n æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼ŒåŒ¹é…äº†å‰é¢ä¸€ä¸ªå­—ç¬¦åˆšå¥½å‡ºç°äº† n æ¬¡     |
| {n,}        | næ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼ŒåŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦è‡³å°‘å‡ºç°äº†næ¬¡            |
| {n,m}       | n å’Œ m éƒ½æ˜¯æ•´æ•°ã€‚åŒ¹é…å‰é¢çš„å­—ç¬¦è‡³å°‘næ¬¡ï¼Œæœ€å¤šmæ¬¡       |
| [xyz]       | ä¸€ä¸ªå­—ç¬¦é›†åˆã€‚åŒ¹é…æ–¹æ‹¬å·ä¸­çš„ä»»æ„å­—ç¬¦                  |
| [^xyz]      | åŒ¹é…ä»»ä½•æ²¡æœ‰åŒ…å«åœ¨æ–¹æ‹¬å·ä¸­çš„å­—ç¬¦                      |
| \b          | åŒ¹é…ä¸€ä¸ªè¯çš„è¾¹ç•Œï¼Œä¾‹å¦‚åœ¨å­—æ¯å’Œç©ºæ ¼ä¹‹é—´                |
| \B          | åŒ¹é…ä¸€ä¸ªéå•è¯è¾¹ç•Œ                                    |
| \d          | åŒ¹é…ä¸€ä¸ªæ•°å­—                                          |
| \D          | åŒ¹é…ä¸€ä¸ªéæ•°å­—å­—ç¬¦                                    |
| \f          | åŒ¹é…ä¸€ä¸ªæ¢é¡µç¬¦                                        |
| \n          | åŒ¹é…ä¸€ä¸ªæ¢è¡Œç¬¦                                        |
| \r          | åŒ¹é…ä¸€ä¸ªå›è½¦ç¬¦                                        |
| \s          | åŒ¹é…ä¸€ä¸ªç©ºç™½å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦å’Œæ¢è¡Œç¬¦    |
| \S          | åŒ¹é…ä¸€ä¸ªéç©ºç™½å­—ç¬¦                                    |
| \w          | åŒ¹é…ä¸€ä¸ªå•å­—å­—ç¬¦ï¼ˆå­—æ¯ã€æ•°å­—æˆ–è€…ä¸‹åˆ’çº¿ï¼‰              |
| \W          | åŒ¹é…ä¸€ä¸ªéå•å­—å­—ç¬¦                                    |

**æ­£åˆ™è¡¨è¾¾å¼æ ‡è®°**

| æ ‡å¿— | æè¿°                                                      |
| :--- | :-------------------------------------------------------- |
| `g`  | å…¨å±€æœç´¢ã€‚                                                |
| `i`  | ä¸åŒºåˆ†å¤§å°å†™æœç´¢ã€‚                                        |
| `m`  | å¤šè¡Œæœç´¢ã€‚                                                |
| `s`  | å…è®¸ `.` åŒ¹é…æ¢è¡Œç¬¦ã€‚                                     |
| `u`  | ä½¿ç”¨`unicode`ç çš„æ¨¡å¼è¿›è¡ŒåŒ¹é…ã€‚                           |
| `y`  | æ‰§è¡Œâ€œç²˜æ€§(`sticky`)â€æœç´¢,åŒ¹é…ä»ç›®æ ‡å­—ç¬¦ä¸²çš„å½“å‰ä½ç½®å¼€å§‹ã€‚ |

ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š

```js
var re = /pattern/flags;
var re = new RegExp("pattern", "flags");
```

åœ¨äº†è§£ä¸‹æ­£åˆ™è¡¨è¾¾å¼åŸºæœ¬çš„ä¹‹å¤–ï¼Œè¿˜å¯ä»¥æŒæ¡å‡ ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„ç‰¹æ€§ï¼š

- è´ªå©ªæ¨¡å¼

  åœ¨äº†è§£è´ªå©ªæ¨¡å¼å‰ï¼Œé¦–å…ˆä¸¾ä¸ªä¾‹å­ï¼š

  ```js
  const reg = /ab{1,3}c/
  ```

  åœ¨åŒ¹é…è¿‡ç¨‹ä¸­ï¼Œå°è¯•å¯èƒ½çš„é¡ºåºæ˜¯ä»å¤šå¾€å°‘çš„æ–¹å‘å»å°è¯•ã€‚é¦–å…ˆä¼šå°è¯•`bbb`ï¼Œç„¶åå†çœ‹æ•´ä¸ªæ­£åˆ™æ˜¯å¦èƒ½åŒ¹é…ã€‚ä¸èƒ½åŒ¹é…æ—¶ï¼Œåå‡ºä¸€ä¸ª`b`ï¼Œå³åœ¨`bb`çš„åŸºç¡€ä¸Šï¼Œå†ç»§ç»­å°è¯•ï¼Œä»¥æ­¤é‡å¤

  å¦‚æœå¤šä¸ªè´ªå©ªé‡è¯æŒ¨ç€ï¼Œåˆ™æ·±åº¦ä¼˜å…ˆæœç´¢

  ```js
  const string = "12345";
  const regx = /(\d{1,3})(\d{1,3})/;// \dè¡¨ç¤ºåŒ¹é…ä¸€ä¸ªæ•°å­—
  console.log( string.match(reg) );
  // => ["12345", "123", "45", index: 0, input: "12345"]
  ```

  å…¶ä¸­ï¼Œå‰é¢çš„`\d{1,3}`åŒ¹é…çš„æ˜¯"123"ï¼Œåé¢çš„`\d{1,3}`åŒ¹é…çš„æ˜¯"45"

- æ‡’æƒ°æ¨¡å¼

  æƒ°æ€§é‡è¯å°±æ˜¯åœ¨è´ªå©ªé‡è¯åé¢åŠ ä¸ªé—®å·ã€‚è¡¨ç¤º==å°½å¯èƒ½å°‘çš„åŒ¹é…==

  ```js
  var string = "12345";
  var regex = /(\d{1,3}?)(\d{1,3})/;
  console.log( string.match(regex) );
  // => ["1234", "1", "234", index: 0, input: "12345"]
  ```

  å…¶ä¸­`\d{1,3}?`åªåŒ¹é…åˆ°ä¸€ä¸ªå­—ç¬¦"1"ï¼Œè€Œåé¢çš„`\d{1,3}`åŒ¹é…äº†"234"ã€‚

- åˆ†ç»„

  åˆ†ç»„ä¸»è¦æ˜¯ç”¨è¿‡`()`è¿›è¡Œå®ç°ï¼Œæ¯”å¦‚`beyond{3}`ï¼Œæ˜¯åŒ¹é…`d`å­—æ¯3æ¬¡ã€‚è€Œ`(beyond){3}`æ˜¯åŒ¹é…`beyond`ä¸‰æ¬¡

  åœ¨`()`å†…ä½¿ç”¨`|`è¾¾åˆ°æˆ–çš„æ•ˆæœï¼Œå¦‚`(abc | xxx)`å¯ä»¥åŒ¹é…`abc`æˆ–è€…`xxx`

  åå‘å¼•ç”¨ï¼Œå·§ç”¨`$`åˆ†ç»„æ•è·--ã€‹ğŸ¦ˆæœ‰æ„æ€ï¼Œå¯ä»¥ç”¨äºç®—æ³•

  ```js
  let str = "John Smith";
  
  // äº¤æ¢åå­—å’Œå§“æ°
  console.log(str.replace(/(john) (smith)/i, '$2, $1')) // Smith, John
  ```

**ä¸‰ã€åŒ¹é…æ–¹æ³•**

æ­£åˆ™è¡¨è¾¾å¼å¸¸è¢«ç”¨äºæŸäº›æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†æˆä¸¤ç±»ï¼š

- å­—ç¬¦ä¸²ï¼ˆstrï¼‰æ–¹æ³•ï¼š`match`ã€`matchAll`ã€`search`ã€`replace`ã€`split`
- æ­£åˆ™å¯¹è±¡ä¸‹ï¼ˆregexpï¼‰çš„æ–¹æ³•ï¼š`test`ã€`exec`

| æ–¹æ³•     | æè¿°                                                         |
| :------- | :----------------------------------------------------------- |
| exec     | ä¸€ä¸ªåœ¨å­—ç¬¦ä¸²ä¸­æ‰§è¡ŒæŸ¥æ‰¾åŒ¹é…çš„RegExpæ–¹æ³•ï¼Œå®ƒè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ˆæœªåŒ¹é…åˆ°åˆ™è¿”å› nullï¼‰ã€‚ |
| test     | ä¸€ä¸ªåœ¨å­—ç¬¦ä¸²ä¸­æµ‹è¯•æ˜¯å¦åŒ¹é…çš„RegExpæ–¹æ³•ï¼Œå®ƒè¿”å› true æˆ– falseã€‚ |
| match    | ä¸€ä¸ªåœ¨å­—ç¬¦ä¸²ä¸­æ‰§è¡ŒæŸ¥æ‰¾åŒ¹é…çš„Stringæ–¹æ³•ï¼Œå®ƒè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œåœ¨æœªåŒ¹é…åˆ°æ—¶ä¼šè¿”å› nullã€‚ |
| matchAll | ä¸€ä¸ªåœ¨å­—ç¬¦ä¸²ä¸­æ‰§è¡ŒæŸ¥æ‰¾æ‰€æœ‰åŒ¹é…çš„Stringæ–¹æ³•ï¼Œå®ƒè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼ˆiteratorï¼‰ã€‚ |
| search   | ä¸€ä¸ªåœ¨å­—ç¬¦ä¸²ä¸­æµ‹è¯•åŒ¹é…çš„Stringæ–¹æ³•ï¼Œå®ƒè¿”å›åŒ¹é…åˆ°çš„ä½ç½®ç´¢å¼•ï¼Œæˆ–è€…åœ¨å¤±è´¥æ—¶è¿”å›-1ã€‚ |
| replace  | ä¸€ä¸ªåœ¨å­—ç¬¦ä¸²ä¸­æ‰§è¡ŒæŸ¥æ‰¾åŒ¹é…çš„Stringæ–¹æ³•ï¼Œå¹¶ä¸”ä½¿ç”¨æ›¿æ¢å­—ç¬¦ä¸²æ›¿æ¢æ‰åŒ¹é…åˆ°çš„å­å­—ç¬¦ä¸²ã€‚ |
| split    | ä¸€ä¸ªä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æˆ–è€…ä¸€ä¸ªå›ºå®šå­—ç¬¦ä¸²åˆ†éš”ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶å°†åˆ†éš”åçš„å­å­—ç¬¦ä¸²å­˜å‚¨åˆ°æ•°ç»„ä¸­çš„ `String` æ–¹æ³•ã€‚ |

**str.match(regexp)**

`str.match(regexp)` æ–¹æ³•åœ¨å­—ç¬¦ä¸² `str` ä¸­æ‰¾åˆ°åŒ¹é… `regexp` çš„å­—ç¬¦

å¦‚æœ `regexp` ä¸å¸¦æœ‰ `g` æ ‡è®°ï¼Œåˆ™å®ƒä»¥æ•°ç»„çš„å½¢å¼è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ï¼Œå…¶ä¸­åŒ…å«åˆ†ç»„å’Œå±æ€§ `index`ï¼ˆåŒ¹é…é¡¹çš„ä½ç½®ï¼‰ã€`input`ï¼ˆè¾“å…¥å­—ç¬¦ä¸²ï¼Œç­‰äº `str`ï¼‰

```js
let str = "I love JavaScript";

let result = str.match(/Java(Script)/);

console.log( result[0] );     // JavaScriptï¼ˆå®Œå…¨åŒ¹é…ï¼‰
console.log( result[1] );     // Scriptï¼ˆç¬¬ä¸€ä¸ªåˆ†ç»„ï¼‰
console.log( result.length ); // 2

// å…¶ä»–ä¿¡æ¯ï¼š
console.log( result.index );  // 7ï¼ˆåŒ¹é…ä½ç½®ï¼‰
console.log( result.input );  // I love JavaScriptï¼ˆæºå­—ç¬¦ä¸²ï¼‰
```

å¦‚æœ `regexp` å¸¦æœ‰ `g` æ ‡è®°ï¼Œåˆ™å®ƒå°†æ‰€æœ‰åŒ¹é…é¡¹çš„æ•°ç»„ä½œä¸ºå­—ç¬¦ä¸²è¿”å›ï¼Œè€Œä¸åŒ…å«åˆ†ç»„å’Œå…¶ä»–è¯¦ç»†ä¿¡æ¯

```js
let str = "I love JavaScript";

let result = str.match(/Java(Script)/g);

console.log( result[0] ); // JavaScript
console.log( result.length ); // 1
```

å¦‚æœæ²¡æœ‰åŒ¹é…é¡¹ï¼Œåˆ™æ— è®ºæ˜¯å¦å¸¦æœ‰æ ‡è®° `g` ï¼Œéƒ½å°†è¿”å› `null`

```js
let str = "I love JavaScript";

let result = str.match(/HTML/);

console.log(result); // null
```

**str.matchAll(regexp)**

è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„ç»“æœåŠåˆ†ç»„æ•è·ç»„çš„è¿­ä»£å™¨

```js
const regexp = /t(e)(st(\d?))/g;
const str = 'test1test2';

const array = [...str.matchAll(regexp)];

console.log(array[0]);
// expected output: Array ["test1", "e", "st1", "1"]

console.log(array[1]);
// expected output: Array ["test2", "e", "st2", "2"]
```

**str.search(regexp)**

è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä½ç½®ï¼Œå¦‚æœæœªæ‰¾åˆ°ï¼Œåˆ™è¿”å› `-1`

```js
let str = "A drop of ink may make a million think";

console.log( str.search( /ink/i ) ); // 10ï¼ˆç¬¬ä¸€ä¸ªåŒ¹é…ä½ç½®ï¼‰
```

è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ`search` ä»…æŸ¥æ‰¾ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹

**str.replace(regexp)**

æ›¿æ¢ä¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å­ä¸²ï¼Œå¹¶è¿”å›æ›¿æ¢åçš„å­—ç¬¦ä¸²ã€‚åœ¨ä¸è®¾ç½®å…¨å±€åŒ¹é…`g`çš„æ—¶å€™ï¼Œåªæ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…æˆåŠŸçš„å­—ç¬¦ä¸²ç‰‡æ®µ

```js
const reg1=/javascript/i;
const reg2=/javascript/ig;
console.log('hello Javascript Javascript Javascript'.replace(reg1,'js'));
//hello js Javascript Javascript
console.log('hello Javascript Javascript Javascript'.replace(reg2,'js'));
//hello js js js
```

**str.split(regexp)**

ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼ˆæˆ–å­å­—ç¬¦ä¸²ï¼‰ä½œä¸ºåˆ†éš”ç¬¦æ¥åˆ†å‰²å­—ç¬¦ä¸²

```js
console.log('12, 34, 56'.split(/,\s*/)) // æ•°ç»„ ['12', '34', '56']
```

**regexp.exec(str)**

`regexp.exec(str)` æ–¹æ³•è¿”å›å­—ç¬¦ä¸² `str` ä¸­çš„ `regexp` åŒ¹é…é¡¹ï¼Œä¸ä»¥å‰çš„æ–¹æ³•ä¸åŒï¼Œå®ƒæ˜¯åœ¨æ­£åˆ™è¡¨è¾¾å¼è€Œä¸æ˜¯å­—ç¬¦ä¸²ä¸Šè°ƒç”¨çš„

æ ¹æ®æ­£åˆ™è¡¨è¾¾å¼æ˜¯å¦å¸¦æœ‰æ ‡å¿— `g`ï¼Œå®ƒçš„è¡Œä¸ºæœ‰æ‰€ä¸åŒ

å¦‚æœæ²¡æœ‰ `g`ï¼Œé‚£ä¹ˆ `regexp.exec(str)` è¿”å›çš„ç¬¬ä¸€ä¸ªåŒ¹é…ä¸ `str.match(regexp)` å®Œå…¨ç›¸åŒ

å¦‚æœæœ‰æ ‡è®° `g`ï¼Œè°ƒç”¨ `regexp.exec(str)` ä¼šè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ï¼Œå¹¶å°†ç´§éšå…¶åçš„ä½ç½®ä¿å­˜åœ¨å±æ€§`regexp.lastIndex` ä¸­ã€‚ ä¸‹ä¸€æ¬¡åŒæ ·çš„è°ƒç”¨ä¼šä»ä½ç½® `regexp.lastIndex` å¼€å§‹æœç´¢ï¼Œè¿”å›ä¸‹ä¸€ä¸ªåŒ¹é…é¡¹ï¼Œå¹¶å°†å…¶åçš„ä½ç½®ä¿å­˜åœ¨ `regexp.lastIndex` ä¸­

```js
let str = 'More about JavaScript at https://javascript.info';
let regexp = /javascript/ig;

let result;

while (result = regexp.exec(str)) {
  console.log( `Found ${result[0]} at position ${result.index}` );
  // Found JavaScript at position 11
  // Found javascript at position 33
}
```

**regexp.test(str)**

æŸ¥æ‰¾åŒ¹é…é¡¹ï¼Œç„¶åè¿”å› `true/false` è¡¨ç¤ºæ˜¯å¦å­˜åœ¨

```js
let str = "I love JavaScript";

// è¿™ä¸¤ä¸ªæµ‹è¯•ç›¸åŒ
console.log( /love/i.test(str) ); // true
```

**å››ã€[åº”ç”¨åœºæ™¯](https://vue3js.cn/interview/JavaScript/regexp.html#%E5%9B%9B%E3%80%81%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF)**

### é—®é¢˜17ï¼šè¯´è¯´ä½ å¯¹äº‹ä»¶å¾ªç¯çš„ç†è§£

äº‹ä»¶å¾ªç¯é¡ºåºï¼Œå…ˆæ‰§è¡ŒåŒæ­¥ä»»åŠ¡å†æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼Œå¼‚æ­¥ä»»åŠ¡åˆåˆ†ä¸ºå®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ï¼Œå…ˆæ‰§è¡Œå¾®ä»»åŠ¡å†æ‰§è¡Œå®ä»»åŠ¡ï¼Œæ‰€ä»¥æ‰§è¡Œé¡ºåºä¸ºï¼šåŒæ­¥ä»»åŠ¡ --ã€‹ å¾®ä»»åŠ¡ --ã€‹ å®ä»»åŠ¡

**ä¸€ã€æ˜¯ä»€ä¹ˆ**

é¦–å…ˆï¼Œ`JavaScript`æ˜¯ä¸€é—¨å•çº¿ç¨‹çš„è¯­è¨€ï¼Œæ„å‘³ç€åŒä¸€æ—¶é—´å†…åªèƒ½åšä¸€ä»¶äº‹ï¼Œä½†æ˜¯è¿™å¹¶ä¸æ„å‘³ç€å•çº¿ç¨‹å°±æ˜¯é˜»å¡ï¼Œè€Œå®ç°å•çº¿ç¨‹éé˜»å¡çš„æ–¹æ³•å°±æ˜¯äº‹ä»¶å¾ªç¯

åœ¨`JavaScript`ä¸­ï¼Œæ‰€æœ‰çš„ä»»åŠ¡éƒ½å¯ä»¥åˆ†ä¸º

- åŒæ­¥ä»»åŠ¡ï¼šç«‹å³æ‰§è¡Œçš„ä»»åŠ¡ï¼ŒåŒæ­¥ä»»åŠ¡ä¸€èˆ¬ä¼šç›´æ¥è¿›å…¥åˆ°ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œ
- å¼‚æ­¥ä»»åŠ¡ï¼šå¼‚æ­¥æ‰§è¡Œçš„ä»»åŠ¡ï¼Œæ¯”å¦‚`ajax`ç½‘ç»œè¯·æ±‚ï¼Œ`setTimeout`å®šæ—¶å‡½æ•°ç­‰

åŒæ­¥ä»»åŠ¡ä¸å¼‚æ­¥ä»»åŠ¡çš„è¿è¡Œæµç¨‹å›¾å¦‚ä¸‹ï¼š

![img](é¢è¯•JavaScript.assets/61efbc20-7cb8-11eb-85f6-6fac77c0c9b3.png)

ä»ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒåŒæ­¥ä»»åŠ¡è¿›å…¥ä¸»çº¿ç¨‹ï¼Œå³ä¸»æ‰§è¡Œæ ˆï¼Œå¼‚æ­¥ä»»åŠ¡è¿›å…¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸»çº¿ç¨‹å†…çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä¸ºç©ºï¼Œä¼šå»ä»»åŠ¡é˜Ÿåˆ—è¯»å–å¯¹åº”çš„ä»»åŠ¡ï¼Œæ¨å…¥ä¸»çº¿ç¨‹æ‰§è¡Œã€‚ä¸Šè¿°è¿‡ç¨‹çš„ä¸æ–­é‡å¤å°±äº‹ä»¶å¾ªç¯

**äºŒã€å®ä»»åŠ¡ä¸å¾®ä»»åŠ¡**

å¦‚æœå°†ä»»åŠ¡åˆ’åˆ†ä¸ºåŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡å¹¶ä¸æ˜¯é‚£ä¹ˆçš„å‡†ç¡®ï¼Œä¸¾ä¸ªä¾‹å­ï¼š

```js
console.log(1)

setTimeout(()=>{
    console.log(2)
}, 0)

new Promise((resolve, reject)=>{
    console.log('new Promise')
    resolve()
}).then(()=>{
    console.log('then')
})

console.log(3)
```

å¦‚æœæŒ‰ç…§ä¸Šé¢æµç¨‹å›¾æ¥åˆ†æä»£ç ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸‹é¢çš„æ‰§è¡Œæ­¥éª¤ï¼š

- `console.log(1)`ï¼ŒåŒæ­¥ä»»åŠ¡ï¼Œä¸»çº¿ç¨‹ä¸­æ‰§è¡Œ
- `setTimeout()` ï¼Œå¼‚æ­¥ä»»åŠ¡ï¼Œæ”¾åˆ° `Event Table`ï¼Œ0 æ¯«ç§’å`console.log(2)`å›è°ƒæ¨å…¥ `Event Queue` ä¸­
- `new Promise` ï¼ŒåŒæ­¥ä»»åŠ¡ï¼Œä¸»çº¿ç¨‹ç›´æ¥æ‰§è¡Œ
- `.then` ï¼Œå¼‚æ­¥ä»»åŠ¡ï¼Œæ”¾åˆ° `Event Table`
- `console.log(3)`ï¼ŒåŒæ­¥ä»»åŠ¡ï¼Œä¸»çº¿ç¨‹æ‰§è¡Œ

æ‰€ä»¥æŒ‰ç…§åˆ†æï¼Œå®ƒçš„ç»“æœåº”è¯¥æ˜¯ `1` => `'new Promise'` => `3` => `2` => `'then'`

ä½†æ˜¯å®é™…ç»“æœæ˜¯ï¼š`1`=>`'new Promise'`=> `3` => `'then'` => `2`

å‡ºç°åˆ†æ­§çš„åŸå› åœ¨äºå¼‚æ­¥ä»»åŠ¡æ‰§è¡Œé¡ºåºï¼Œäº‹ä»¶é˜Ÿåˆ—å…¶å®æ˜¯ä¸€ä¸ªâ€œå…ˆè¿›å…ˆå‡ºâ€çš„æ•°æ®ç»“æ„ï¼Œæ’åœ¨å‰é¢çš„äº‹ä»¶ä¼šä¼˜å…ˆè¢«ä¸»çº¿ç¨‹è¯»å–

ä¾‹å­ä¸­ `setTimeout`å›è°ƒäº‹ä»¶æ˜¯å…ˆè¿›å…¥é˜Ÿåˆ—ä¸­çš„ï¼ŒæŒ‰ç†è¯´åº”è¯¥å…ˆäº `.then` ä¸­çš„æ‰§è¡Œï¼Œä½†æ˜¯ç»“æœå´ååç›¸å

åŸå› åœ¨äºå¼‚æ­¥ä»»åŠ¡è¿˜å¯ä»¥ç»†åˆ†ä¸ºå¾®ä»»åŠ¡ä¸å®ä»»åŠ¡

**å¾®ä»»åŠ¡**

ä¸€ä¸ªéœ€è¦å¼‚æ­¥æ‰§è¡Œçš„å‡½æ•°ï¼Œæ‰§è¡Œæ—¶æœºæ˜¯åœ¨ä¸»å‡½æ•°æ‰§è¡Œç»“æŸä¹‹åã€å½“å‰å®ä»»åŠ¡ç»“æŸä¹‹å‰

å¸¸è§çš„å¾®ä»»åŠ¡æœ‰ï¼š

- Promise.then
- MutaionObserver
- Object.observeï¼ˆå·²åºŸå¼ƒï¼›Proxy å¯¹è±¡æ›¿ä»£ï¼‰
- process.nextTickï¼ˆNode.jsï¼‰

**å®ä»»åŠ¡**

å®ä»»åŠ¡çš„æ—¶é—´ç²’åº¦æ¯”è¾ƒå¤§ï¼Œæ‰§è¡Œçš„æ—¶é—´é—´éš”æ˜¯ä¸èƒ½ç²¾ç¡®æ§åˆ¶çš„ï¼Œå¯¹ä¸€äº›é«˜å®æ—¶æ€§çš„éœ€æ±‚å°±ä¸å¤ªç¬¦åˆ

å¸¸è§çš„å®ä»»åŠ¡æœ‰ï¼š

- script (å¯ä»¥ç†è§£ä¸ºå¤–å±‚åŒæ­¥ä»£ç )
- setTimeout/setInterval
- UI rendering/UIäº‹ä»¶
- postMessageã€MessageChannel
- setImmediateã€I/Oï¼ˆNode.jsï¼‰

è¿™æ—¶å€™ï¼Œäº‹ä»¶å¾ªç¯ï¼Œå®ä»»åŠ¡ï¼Œå¾®ä»»åŠ¡çš„å…³ç³»å¦‚å›¾æ‰€ç¤º

![img](é¢è¯•JavaScript.assets/6e80e5e0-7cb8-11eb-85f6-6fac77c0c9b3.png)

æŒ‰ç…§è¿™ä¸ªæµç¨‹ï¼Œå®ƒçš„æ‰§è¡Œæœºåˆ¶æ˜¯ï¼š

- æ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼Œå¦‚æœé‡åˆ°å¾®ä»»åŠ¡å°±å°†å®ƒæ”¾åˆ°å¾®ä»»åŠ¡çš„äº‹ä»¶é˜Ÿåˆ—ä¸­
- å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼Œä¼šæŸ¥çœ‹å¾®ä»»åŠ¡çš„äº‹ä»¶é˜Ÿåˆ—ï¼Œç„¶åå°†é‡Œé¢çš„æ‰€æœ‰å¾®ä»»åŠ¡ä¾æ¬¡æ‰§è¡Œå®Œ

å›åˆ°ä¸Šé¢çš„é¢˜ç›®

```js
console.log(1)
setTimeout(()=>{
    console.log(2)
}, 0)
new Promise((resolve, reject)=>{
    console.log('new Promise')
    resolve()
}).then(()=>{
    console.log('then')
})
console.log(3)
```

æµç¨‹å¦‚ä¸‹

```js
// é‡åˆ° console.log(1) ï¼Œç›´æ¥æ‰“å° 1
// é‡åˆ°å®šæ—¶å™¨ï¼Œå±äºæ–°çš„å®ä»»åŠ¡ï¼Œç•™ç€åé¢æ‰§è¡Œ
// é‡åˆ° new Promiseï¼Œè¿™ä¸ªæ˜¯ç›´æ¥æ‰§è¡Œçš„ï¼Œæ‰“å° 'new Promise'
// .then å±äºå¾®ä»»åŠ¡ï¼Œæ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œåé¢å†æ‰§è¡Œ
// é‡åˆ° console.log(3) ç›´æ¥æ‰“å° 3
// å¥½äº†æœ¬è½®å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç°åœ¨å»å¾®ä»»åŠ¡åˆ—è¡¨æŸ¥çœ‹æ˜¯å¦æœ‰å¾®ä»»åŠ¡ï¼Œå‘ç° .then çš„å›è°ƒï¼Œæ‰§è¡Œå®ƒï¼Œæ‰“å° 'then'
// å½“ä¸€æ¬¡å®ä»»åŠ¡æ‰§è¡Œå®Œï¼Œå†å»æ‰§è¡Œæ–°çš„å®ä»»åŠ¡ï¼Œè¿™é‡Œå°±å‰©ä¸€ä¸ªå®šæ—¶å™¨çš„å®ä»»åŠ¡äº†ï¼Œæ‰§è¡Œå®ƒï¼Œæ‰“å° 2
```

**ä¸‰ã€asyncä¸await**

`async` æ˜¯å¼‚æ­¥çš„æ„æ€ï¼Œ`await`åˆ™å¯ä»¥ç†è§£ä¸º `async wait`ã€‚æ‰€ä»¥å¯ä»¥ç†è§£`async`å°±æ˜¯ç”¨æ¥å£°æ˜ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•ï¼Œè€Œ `await`æ˜¯ç”¨æ¥ç­‰å¾…å¼‚æ­¥æ–¹æ³•æ‰§è¡Œ

**async**

`async`å‡½æ•°è¿”å›ä¸€ä¸ª`promise`å¯¹è±¡ï¼Œä¸‹é¢ä¸¤ç§æ–¹æ³•æ˜¯ç­‰æ•ˆçš„

```js
function f() {
    return Promise.resolve('TEST');
}

// asyncF is equivalent to f!
async function asyncF() {
    return 'TEST';
}
```

**await**

æ­£å¸¸æƒ…å†µä¸‹ï¼Œ`await`å‘½ä»¤åé¢æ˜¯ä¸€ä¸ª `Promise`å¯¹è±¡ï¼Œè¿”å›è¯¥å¯¹è±¡çš„ç»“æœã€‚å¦‚æœä¸æ˜¯ `Promise`å¯¹è±¡ï¼Œå°±ç›´æ¥è¿”å›å¯¹åº”çš„å€¼

```js
async function f(){
    // ç­‰åŒäº
    // return 123
    return await 123
}
f().then(v => console.log(v)) // 123
```

ä¸ç®¡`await`åé¢è·Ÿç€çš„æ˜¯ä»€ä¹ˆï¼Œ`await`éƒ½ä¼šé˜»å¡åé¢çš„ä»£ç 

```js
async function fn1 (){
    console.log(1)
    await fn2()
    console.log(2) // é˜»å¡
}

async function fn2 (){
    console.log('fn2')
}

fn1()
console.log(3)
```

ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ`await` ä¼šé˜»å¡ä¸‹é¢çš„ä»£ç ï¼ˆå³åŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼‰ï¼Œå…ˆæ‰§è¡Œ `async`å¤–é¢çš„åŒæ­¥ä»£ç ï¼ŒåŒæ­¥ä»£ç æ‰§è¡Œå®Œï¼Œå†å›åˆ° `async` å‡½æ•°ä¸­ï¼Œå†æ‰§è¡Œä¹‹å‰é˜»å¡çš„ä»£ç 

æ‰€ä»¥ä¸Šè¿°è¾“å‡ºç»“æœä¸ºï¼š`1`ï¼Œ`fn2`ï¼Œ`3`ï¼Œ`2`

ğŸ¦ˆæ‰§è¡Œæµç¨‹ï¼šè°ƒç”¨å‡½æ•°`fn1()`ç›´æ¥æ‰§è¡ŒåŒæ­¥ä»»åŠ¡è¾“å‡º==1==ï¼Œé‡åˆ°`await`é˜»å¡åé¢çš„ä»£ç åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œ`await`åé¢æ˜¯ä¸€ä¸ªå€¼ä¸æ˜¯`Promise`å¯¹è±¡ç›´æ¥è¿”å›ï¼ˆæ˜¯åŒæ­¥ä»»åŠ¡ç›´æ¥æ‰§è¡Œï¼‰è¾“å‡º==`'fn2'`==ï¼Œç»§ç»­æ‰§è¡ŒåŒæ­¥ä»»åŠ¡è¾“å‡º==3==ï¼ŒåŒæ­¥ä»»åŠ¡æ‰§è¡Œç»“æŸï¼Œæ‰§è¡Œå¾®ä»»åŠ¡ï¼Œè¾“å‡º==2==ã€‚

**å››ã€æµç¨‹åˆ†æ**

```js
async function async1() {
    console.log('async1 start')
    await async2()
    console.log('async1 end')
}
async function async2() {
    console.log('async2')
}
console.log('script start')
setTimeout(function () {
    console.log('settimeout')
})
async1()
//=======================================
new Promise(function (resolve) {
    console.log('promise1')
    resolve()
}).then(function () {
    console.log('promise2')
})
console.log('script end')
```

ğŸ¦ˆæ‰§è¡Œæµç¨‹ï¼š

`'script start'` --ã€‹`'async1 start'` --ã€‹`'async2'` --ã€‹`'promise1'`--ã€‹ `'script end'` --ã€‹ `'async1 end'` --ã€‹`'promise2'` --ã€‹`'settimeout'`ã€‚

è‡ªå·±åŠ¨æ‰‹ç”»ç”»

åˆ†æè¿‡ç¨‹ï¼š

1. æ‰§è¡Œæ•´æ®µä»£ç ï¼Œé‡åˆ° `console.log('script start')` ç›´æ¥æ‰“å°ç»“æœï¼Œè¾“å‡º `script start`
2. é‡åˆ°å®šæ—¶å™¨äº†ï¼Œå®ƒæ˜¯å®ä»»åŠ¡ï¼Œå…ˆæ”¾ç€ä¸æ‰§è¡Œ
3. é‡åˆ° `async1()`ï¼Œæ‰§è¡Œ `async1` å‡½æ•°ï¼Œå…ˆæ‰“å° `async1 start`ï¼Œä¸‹é¢é‡åˆ°`await`æ€ä¹ˆåŠï¼Ÿå…ˆæ‰§è¡Œ `async2`ï¼Œæ‰“å° `async2`ï¼Œç„¶åé˜»å¡ä¸‹é¢ä»£ç ï¼ˆå³åŠ å…¥å¾®ä»»åŠ¡åˆ—è¡¨ï¼‰ï¼Œè·³å‡ºå»æ‰§è¡ŒåŒæ­¥ä»£ç  ğŸ¦ˆ--ã€‹è¿™é‡Œå› ä¸ºasync2()è¿”å›å€¼ä¸æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œæ‰€ä»¥æ˜¯åŒæ­¥ä»»åŠ¡ç›´æ¥æ‰§è¡Œã€‚
4. è·³åˆ° `new Promise` è¿™é‡Œï¼Œç›´æ¥æ‰§è¡Œï¼Œæ‰“å° `promise1`ï¼Œä¸‹é¢é‡åˆ° `.then()`ï¼Œå®ƒæ˜¯å¾®ä»»åŠ¡ï¼Œæ”¾åˆ°å¾®ä»»åŠ¡åˆ—è¡¨ç­‰å¾…æ‰§è¡Œ
5. æœ€åä¸€è¡Œç›´æ¥æ‰“å° `script end`ï¼Œç°åœ¨åŒæ­¥ä»£ç æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡ï¼Œå³ `await`ä¸‹é¢çš„ä»£ç ï¼Œæ‰“å° `async1 end`
6. ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªå¾®ä»»åŠ¡ï¼Œå³æ‰§è¡Œ `then` çš„å›è°ƒï¼Œæ‰“å° `promise2`
7. ä¸Šä¸€ä¸ªå®ä»»åŠ¡æ‰€æœ‰äº‹éƒ½åšå®Œäº†ï¼Œå¼€å§‹ä¸‹ä¸€ä¸ªå®ä»»åŠ¡ï¼Œå°±æ˜¯å®šæ—¶å™¨ï¼Œæ‰“å° `settimeout`

æ‰€ä»¥æœ€åçš„ç»“æœæ˜¯ï¼š`script start`ã€`async1 start`ã€`async2`ã€`promise1`ã€`script end`ã€`async1 end`ã€`promise2`ã€`settimeout`

### é—®é¢˜18ï¼šä¸¾ä¾‹è¯´æ˜ä½ å¯¹å°¾é€’å½’çš„ç†è§£ï¼Œæœ‰å“ªäº›åº”ç”¨åœºæ™¯

[å‚è€ƒ](https://vue3js.cn/interview/JavaScript/tail_recursion.html#%E4%B8%80%E3%80%81%E9%80%92%E5%BD%92)

### é—®é¢˜19ï¼šè¯´è¯´ JavaScript ä¸­å†…å­˜æ³„æ¼çš„å‡ ç§æƒ…å†µï¼Ÿ

çœ‹MDNçš„å†…å­˜ç®¡ç†

**åƒåœ¾å›æ”¶**

åƒåœ¾å›æ”¶æ˜¯åˆ é™¤é‚£äº›ä¸å†è¢«å…¶ä»–å¯¹è±¡å¼•ç”¨çš„å¯¹è±¡ã€‚
åœ¨è¿™é‡Œï¼Œâ€œå¯¹è±¡â€çš„æ¦‚å¿µä¸ä»…ç‰¹æŒ‡ JavaScript å¯¹è±¡ï¼Œè¿˜åŒ…æ‹¬å‡½æ•°ä½œç”¨åŸŸï¼ˆæˆ–è€…å…¨å±€è¯æ³•ä½œç”¨åŸŸï¼‰ã€‚

**å†…å­˜ç®¡ç†**

å†…å­˜ç”Ÿå‘½å‘¨æœŸ

åˆ†é…ã€ä½¿ç”¨ã€é‡Šæ”¾

å›æ”¶

- å¼•ç”¨è®¡æ•°

  å¯¹è±¡æ˜¯å¦ä¸å†éœ€è¦

  é™åˆ¶ï¼šå¾ªç¯å¼•ç”¨

- æ ‡è®°æ¸…ç†ï¼ˆå¸¸ç”¨â­ï¼‰

  å¯¹è±¡æ˜¯å¦å¯ä»¥è·å¾—

  åƒåœ¾å›æ”¶å™¨å°†å®šæœŸä»æ ¹ï¼ˆå…¨å±€å¯¹è±¡ï¼‰å¼€å§‹ï¼Œæ‰¾æ‰€æœ‰ä»æ ¹å¼€å§‹å¼•ç”¨çš„å¯¹è±¡ï¼Œç„¶åæ‰¾è¿™äº›å¯¹è±¡å¼•ç”¨çš„å¯¹è±¡â€¦â€¦ä»æ ¹å¼€å§‹ï¼Œåƒåœ¾å›æ”¶å™¨å°†æ‰¾åˆ°æ‰€æœ‰å¯ä»¥è·å¾—çš„å¯¹è±¡å’Œæ”¶é›†æ‰€æœ‰ä¸èƒ½è·å¾—çš„å¯¹è±¡ã€‚---ã€‹å¯¹ä¸å¯è·å¾—çš„å¯¹è±¡è¿›è¡Œæ¸…é™¤ã€‚

  å¾ªç¯å¼•ç”¨è§£å†³ï¼šå‡½æ•°è°ƒç”¨è¿”å›ä¹‹åï¼Œä¸¤ä¸ªå¯¹è±¡==ä»å…¨å±€å¯¹è±¡å‡ºå‘æ— æ³•è·å–==ã€‚ä¼šè¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ã€‚



**ä¸€ã€æ˜¯ä»€ä¹ˆ**

å†…å­˜æ³„æ¼ï¼ˆMemory leakï¼‰æ˜¯åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œç”±äºç–å¿½æˆ–é”™è¯¯é€ æˆç¨‹åºæœªèƒ½é‡Šæ”¾å·²ç»ä¸å†ä½¿ç”¨çš„å†…å­˜

å¹¶éæŒ‡å†…å­˜åœ¨ç‰©ç†ä¸Šçš„æ¶ˆå¤±ï¼Œè€Œæ˜¯åº”ç”¨ç¨‹åºåˆ†é…æŸæ®µå†…å­˜åï¼Œç”±äºè®¾è®¡é”™è¯¯ï¼Œå¯¼è‡´åœ¨é‡Šæ”¾è¯¥æ®µå†…å­˜ä¹‹å‰å°±å¤±å»äº†å¯¹è¯¥æ®µå†…å­˜çš„æ§åˆ¶ï¼Œä»è€Œé€ æˆäº†å†…å­˜çš„æµªè´¹

ç¨‹åºçš„è¿è¡Œéœ€è¦å†…å­˜ã€‚åªè¦ç¨‹åºæå‡ºè¦æ±‚ï¼Œæ“ä½œç³»ç»Ÿæˆ–è€…è¿è¡Œæ—¶å°±å¿…é¡»ä¾›ç»™å†…å­˜

å¯¹äºæŒç»­è¿è¡Œçš„æœåŠ¡è¿›ç¨‹ï¼Œå¿…é¡»åŠæ—¶é‡Šæ”¾ä¸å†ç”¨åˆ°çš„å†…å­˜ã€‚å¦åˆ™ï¼Œå†…å­˜å ç”¨è¶Šæ¥è¶Šé«˜ï¼Œè½»åˆ™å½±å“ç³»ç»Ÿæ€§èƒ½ï¼Œé‡åˆ™å¯¼è‡´è¿›ç¨‹å´©æºƒã€‚

JSæä¾›è‡ªåŠ¨å†…å­˜ç®¡ç†ï¼Œå‡è½»ç¨‹åºå‘˜çš„è´Ÿæ‹…ï¼Œè¿™è¢«ç§°ä¸º"åƒåœ¾å›æ”¶æœºåˆ¶".ã€‚

**äºŒã€åƒåœ¾å›æ”¶æœºåˆ¶**

**æ ‡è®°æ¸…é™¤**

`JavaScript`æœ€å¸¸ç”¨çš„åƒåœ¾æ”¶å›æœºåˆ¶

å½“å˜é‡è¿›å…¥æ‰§è¡Œç¯å¢ƒæ—¶ï¼Œå°±æ ‡è®°è¿™ä¸ªå˜é‡ä¸ºâ€œè¿›å…¥ç¯å¢ƒâ€œã€‚è¿›å…¥ç¯å¢ƒçš„å˜é‡æ‰€å ç”¨çš„å†…å­˜å°±ä¸èƒ½é‡Šæ”¾ï¼Œå½“å˜é‡ç¦»å¼€ç¯å¢ƒæ—¶ï¼Œåˆ™å°†å…¶æ ‡è®°ä¸ºâ€œç¦»å¼€ç¯å¢ƒâ€œ

åƒåœ¾å›æ”¶ç¨‹åºè¿è¡Œçš„æ—¶å€™ï¼Œä¼šæ ‡è®°å†…å­˜ä¸­å­˜å‚¨çš„æ‰€æœ‰å˜é‡ã€‚ç„¶åï¼Œå®ƒä¼š==å°†æ‰€æœ‰åœ¨ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡ï¼Œä»¥åŠè¢«åœ¨ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡å¼•ç”¨çš„å˜é‡çš„æ ‡è®°å»æ‰==ï¼ˆè¿™ä¸¤ç§æ˜¯ä¸è¿›è¡Œå›æ”¶çš„ï¼‰ã€‚

åœ¨æ­¤ä¹‹åå†è¢«åŠ ä¸Šæ ‡è®°çš„å˜é‡å°±æ˜¯å¾…åˆ é™¤çš„äº†ï¼ŒåŸå› æ˜¯ä»»ä½•åœ¨ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡éƒ½è®¿é—®ä¸åˆ°å®ƒä»¬äº†

éšååƒåœ¾å›æ”¶ç¨‹åºåšä¸€æ¬¡å†…å­˜æ¸…ç†ï¼Œé”€æ¯å¸¦æ ‡è®°çš„æ‰€æœ‰å€¼å¹¶æ”¶å›å®ƒä»¬çš„å†…å­˜

ä¸¾ä¸ªä¾‹å­ï¼š

```js
var m = 0,n = 19 // æŠŠ m,n,add() æ ‡è®°ä¸ºè¿›å…¥ç¯å¢ƒã€‚
add(m, n) // æŠŠ a, b, cæ ‡è®°ä¸ºè¿›å…¥ç¯å¢ƒã€‚
console.log(n) // a,b,cæ ‡è®°ä¸ºç¦»å¼€ç¯å¢ƒï¼Œç­‰å¾…åƒåœ¾å›æ”¶ã€‚
function add(a, b) {
  a++
  var c = a + b
  return c
}
```

**å¼•ç”¨è®¡æ•°**

è¯­è¨€å¼•æ“æœ‰ä¸€å¼ "å¼•ç”¨è¡¨"ï¼Œä¿å­˜äº†å†…å­˜é‡Œé¢æ‰€æœ‰çš„èµ„æºï¼ˆé€šå¸¸æ˜¯å„ç§å€¼ï¼‰çš„å¼•ç”¨æ¬¡æ•°ã€‚å¦‚æœä¸€ä¸ªå€¼çš„å¼•ç”¨æ¬¡æ•°æ˜¯`0`ï¼Œå°±è¡¨ç¤ºè¿™ä¸ªå€¼ä¸å†ç”¨åˆ°äº†ï¼Œå› æ­¤å¯ä»¥å°†è¿™å—å†…å­˜é‡Šæ”¾

å¦‚æœä¸€ä¸ªå€¼ä¸å†éœ€è¦äº†ï¼Œå¼•ç”¨æ•°å´ä¸ä¸º`0`ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶æ— æ³•é‡Šæ”¾è¿™å—å†…å­˜ï¼Œä»è€Œå¯¼è‡´å†…å­˜æ³„æ¼

```javascript
const arr = [1, 2, 3, 4];
console.log('hello world')
```

é¢ä»£ç ä¸­ï¼Œæ•°ç»„`[1, 2, 3, 4]`æ˜¯ä¸€ä¸ªå€¼ï¼Œä¼šå ç”¨å†…å­˜ã€‚å˜é‡`arr`æ˜¯ä»…æœ‰çš„å¯¹è¿™ä¸ªå€¼çš„å¼•ç”¨ï¼Œå› æ­¤å¼•ç”¨æ¬¡æ•°ä¸º`1`ã€‚å°½ç®¡åé¢çš„ä»£ç æ²¡æœ‰ç”¨åˆ°`arr`ï¼Œå®ƒè¿˜æ˜¯ä¼šæŒç»­å ç”¨å†…å­˜

å¦‚æœéœ€è¦è¿™å—å†…å­˜è¢«åƒåœ¾å›æ”¶æœºåˆ¶é‡Šæ”¾ï¼Œåªéœ€è¦è®¾ç½®å¦‚ä¸‹ï¼š

```js
arr = null
```

é€šè¿‡è®¾ç½®`arr`ä¸º`null`ï¼Œå°±è§£é™¤äº†å¯¹æ•°ç»„`[1,2,3,4]`çš„å¼•ç”¨ï¼Œå¼•ç”¨æ¬¡æ•°å˜ä¸º 0ï¼Œå°±è¢«åƒåœ¾å›æ”¶äº†ã€‚

**å°ç»“**

æœ‰äº†åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œä¸ä»£è¡¨ä¸ç”¨å…³æ³¨å†…å­˜æ³„éœ²ã€‚é‚£äº›å¾ˆå ç©ºé—´çš„å€¼ï¼Œä¸€æ—¦ä¸å†ç”¨åˆ°ï¼Œéœ€è¦æ£€æŸ¥æ˜¯å¦è¿˜å­˜åœ¨å¯¹å®ƒä»¬çš„å¼•ç”¨ã€‚å¦‚æœæ˜¯çš„è¯ï¼Œå°±å¿…é¡»æ‰‹åŠ¨è§£é™¤å¼•ç”¨

**ä¸‰ã€å¸¸è§å†…å­˜æ³„éœ²æƒ…å†µ**

- æ„å¤–å£°æ˜å…¨å±€å˜é‡

  ```js
  function foo(arg) {
      bar = "this is a hidden global variable";
  }
  ```

  å¦ä¸€ç§æ„å¤–çš„å…¨å±€å˜é‡å¯èƒ½ç”± `this` åˆ›å»ºï¼š

  ```js
  function foo() {
      this.variable = "potential accidental global";
  }
  // foo è°ƒç”¨è‡ªå·±ï¼Œthis æŒ‡å‘äº†å…¨å±€å¯¹è±¡ï¼ˆwindowï¼‰
  foo();
  ```

  ğŸ¦ˆç›¸å½“äºåœ¨`window`ä¸Šåˆ›å»ºçš„å±æ€§ï¼Œåªè¦`window`æœ¬èº«ä¸è¢«æ¸…ç†å°±ä¸ä¼šæ¶ˆå¤±ã€‚

  ä¸Šè¿°ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œå¯ä»¥é¿å…æ„å¤–çš„å…¨å±€å˜é‡

  è§£å†³æ–¹æ³•ï¼šåœ¨å˜é‡å£°æ˜å‰åŠ ä¸Šå…³é”®å­—`var let const`ï¼Œè¿™æ ·å˜é‡ä¼šåœ¨å‡½æ•°æ‰§è¡Œå®Œç¦»å¼€ä½œç”¨åŸŸã€‚

- å®šæ—¶å™¨ä¹Ÿå¸¸ä¼šé€ æˆå†…å­˜æ³„éœ²

  ```js
  var someResource = getData();
  setInterval(function() {
      var node = document.getElementById('Node');
      if(node) {
          // å¤„ç† node å’Œ someResource
          node.innerHTML = JSON.stringify(someResource));
      }
  }, 1000);
  ```

  å¦‚æœ`id`ä¸ºNodeçš„å…ƒç´ ä»`DOM`ä¸­ç§»é™¤ï¼Œè¯¥å®šæ—¶å™¨ä»ä¼šå­˜åœ¨ï¼ŒåŒæ—¶ï¼Œå› ä¸ºå›è°ƒå‡½æ•°ä¸­åŒ…å«å¯¹`someResource`çš„å¼•ç”¨ï¼Œå®šæ—¶å™¨å¤–é¢çš„`someResource`ä¹Ÿä¸ä¼šè¢«é‡Šæ”¾

  åŒ…æ‹¬æˆ‘ä»¬ä¹‹å‰æ‰€è¯´çš„é—­åŒ…ï¼Œç»´æŒå‡½æ•°å†…å±€éƒ¨å˜é‡ï¼Œä½¿å…¶å¾—ä¸åˆ°é‡Šæ”¾

  ```js
  function bindEvent() {
    var obj = document.createElement('XXX');
    var unused = function () {
      console.log(obj, 'é—­åŒ…å†…å¼•ç”¨obj objä¸ä¼šè¢«é‡Šæ”¾');
    };
    obj = null; // è§£å†³æ–¹æ³•--ã€‹ğŸ¦ˆæŠŠobjé‡Šæ”¾æ‰
  }
  ```

- æ²¡æœ‰æ¸…ç†å¯¹`DOM`å…ƒç´ çš„å¼•ç”¨åŒæ ·é€ æˆå†…å­˜æ³„éœ²

  ```js
  const refA = document.getElementById('refA');
  document.body.removeChild(refA); // domåˆ é™¤äº†
  console.log(refA, 'refA'); // ä½†æ˜¯è¿˜å­˜åœ¨å¼•ç”¨èƒ½consoleå‡ºæ•´ä¸ªdiv æ²¡æœ‰è¢«å›æ”¶
  refA = null;
  console.log(refA, 'refA'); // è§£é™¤å¼•ç”¨
  ```

  åŒ…æ‹¬ä½¿ç”¨äº‹ä»¶ç›‘å¬`addEventListener`ç›‘å¬çš„æ—¶å€™ï¼Œåœ¨ä¸ç›‘å¬çš„æƒ…å†µä¸‹ä½¿ç”¨`removeEventListener`å–æ¶ˆå¯¹äº‹ä»¶ç›‘å¬

### é—®é¢˜20ï¼šJavascriptæœ¬åœ°å­˜å‚¨çš„æ–¹å¼æœ‰å“ªäº›ï¼ŸåŒºåˆ«åŠåº”ç”¨åœºæ™¯ï¼Ÿ

![img](é¢è¯•JavaScript.assets/68dccf20-849f-11eb-ab90-d9ae814b240d.png)

**ä¹¦ç±æ•´ç†**
å­˜å‚¨ç±»å‹æœ‰cookieå’Œweb storageï¼Œå…¶ä¸­web storageåˆåˆ†ä¸ºsessionStorageå’ŒlocalStorageã€‚sessionStorageç”¨äºä¿å­˜æµè§ˆå™¨ä¸€æ¬¡ä¼šè¯æœŸé—´çš„æ•°æ®ï¼Œåœ¨æµè§ˆå™¨å…³é—­æ—¶åˆ é™¤ï¼›localStorageç”¨äºä¼šè¯ä¹‹å¤–æŒä¹…ä¿å­˜æ•°æ®ã€‚IndexDBæ˜¯ç±»ä¼¼äºSQLæ•°æ®åº“çš„ç»“æ„åŒ–æ•°æ®å­˜å‚¨æœºåˆ¶ï¼Œä¿å­˜çš„æ˜¯å¯¹è±¡è€Œä¸æ˜¯æ•°æ®è¡¨ï¼ˆå¯¹è±¡å­˜å‚¨ï¼‰ã€‚

**è§†é¢‘**
HTTPæ˜¯æ— çŠ¶æ€å­˜å‚¨ã€‚
éœ€æ±‚ï¼šå½“ç¬¬ä¸€æ¬¡ç™»å½•åï¼Œå†æ¬¡ç™»å½•ä¸éœ€è¦å†æ¬¡è¾“å…¥å¯†ç ã€‚
è§£å†³ï¼šæµè§ˆå™¨åœ¨æ¯ä¸€æ¬¡è¯·æ±‚é‡ŒåŠ å…¥ç”¨æˆ·åå’Œå¯†ç 

**cookie**

Cookieï¼šæ¯æ¬¡HTTPè¯·æ±‚éƒ½è‡ªåŠ¨å¸¦æ•°æ®ç»™æœåŠ¡å™¨çš„æŠ€æœ¯ã€‚
CookieåŸºæœ¬æµç¨‹ï¼š

1. æµè§ˆå™¨å‘èµ·HTTPè¯·æ±‚
2. æœåŠ¡å™¨ä¼šè¿›è¡ŒCookieè®¾ç½®ï¼ˆå³Set-Cookieï¼‰,Cookieä¸­æœ‰åå’Œå€¼ä¸¤ä¸ªå±æ€§ï¼ŒæœåŠ¡å™¨æŠŠåå’Œå€¼å±æ€§é‡Œçš„å†…å®¹ç»™å¡«å……å®Œæ•´ï¼Œç„¶åå‘é€ç»™æµè§ˆå™¨ï¼Œæµè§ˆå™¨è¿›è¡Œä¿å­˜ã€‚
3. ä¹‹åæµè§ˆå™¨å‘é€çš„æ¯ä¸€ä¸ªè¯·æ±‚éƒ½ä¼šè‡ªåŠ¨é™„ä¸Šè¿™ä¸ªCookie

Cookieæ˜¯å­˜å‚¨åœ¨æµè§ˆå™¨ä¸­çš„æ•°æ®ï¼Œæ‰“å¼€æµè§ˆå™¨æ˜¯å¯ä»¥æŸ¥è¯¢åˆ°çš„ï¼Œå¦‚æœæŠŠç”¨æˆ·åå’Œå¯†ç å­˜å‚¨åˆ°å…¶ä¸­æ˜¯ä¸å®‰å…¨çš„ã€‚æ‰€ä»¥å¼•å…¥äº†Sessionï¼ˆä¼šè¯ï¼‰ã€‚

**Session**

æ³¨æ„ï¼šå½“æµè§ˆå™¨è®¿é—®æœåŠ¡ç«¯æ—¶ä¼šè¯å¼€å§‹ï¼ŒæœåŠ¡ç«¯è®¾ç½®äº†ç»“æŸæ—¶é—´å’Œ Session IDï¼Œä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚

æµç¨‹ï¼š

1. ç”¨æˆ·è¾“å…¥å¯†ç ç¬¬ä¸€æ¬¡ç™»å½•ï¼Œæµè§ˆå™¨æºå¸¦ç€ç”¨æˆ·åå’Œå¯†ç å‘é€è¯·æ±‚åˆ°æœåŠ¡ç«¯ã€‚

2. æœåŠ¡ç«¯è®¾ç½®Session IDå’Œç»“æŸæ—¶é—´ï¼Œç„¶åå‘é€ç»™æµè§ˆå™¨

3. ä¹‹åæµè§ˆå™¨çš„æ¯æ¬¡è¯·æ±‚éƒ½ä¼šæºå¸¦Session IDå’Œç»“æŸæ—¶é—´ï¼Œå¾…åˆ°è¾¾ç»“æŸæ—¶é—´åï¼Œæµè§ˆå™¨è‡ªè¡Œåˆ é™¤è¿™ä¸ªCookieã€‚å†æ¬¡ç™»å½•å°±éœ€è¦å¯†ç ã€‚

   ![1656210699959](é¢è¯•JavaScript.assets/1656210699959.png)

å­˜åœ¨é—®é¢˜ï¼š

ç”¨æˆ·é‡å˜å¤§ï¼Œå½“ç‰¹å®šæ—¶é—´å¤§é‡ç”¨æˆ·è®¿é—®æœåŠ¡å™¨çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨å°±ä¼šé¢ä¸´éœ€è¦å­˜å‚¨å¤§é‡Session IDåœ¨æœåŠ¡å™¨é‡Œï¼Œå½“ä¸€å°æœåŠ¡å™¨å­˜å‚¨è¶…è½½æ—¶ï¼Œå°±éœ€è¦åˆ†äº«Session IDç»™å…¶ä»–æœåŠ¡å™¨ï¼Œä½†æ˜¯åˆ†äº«ä¹Ÿä¸æ–¹ä¾¿ï¼Œå°±é‡‡ç”¨æ•°æ®åº“å­˜å‚¨`Session ID`ï¼Œä½†æ˜¯å½“æ•°æ®åº“å´©æºƒæ—¶å°±ä¼šå½±å“æœåŠ¡å™¨è·å–Session IDã€‚æ‰€ä»¥å‡ºç°äº†JWT ï¼ˆJSON Web Tokenï¼‰

**JWT**

æµç¨‹ï¼š

1. ç”¨æˆ·ç™»å½•ï¼Œå®¢æˆ·ç«¯å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ç”Ÿæˆä¸€ä¸ªJWTï¼Œåªä¿å­˜`JWT`ç­¾åçš„å¯†æ–‡ï¼Œç„¶åå°†JWTå‘é€ç»™å®¢æˆ·ç«¯ã€‚

2. æµè§ˆå™¨ä»¥Cookieæˆ–è€…Storageçš„å½¢å¼å­˜å‚¨ï¼ˆå‡è®¾ä»¥Cookieå½¢å¼å­˜å‚¨ï¼‰

3. å®¢æˆ·ç«¯æ¯æ¬¡å‘é€è¯·æ±‚éƒ½ä¼šæŠŠJWTå‘é€ç»™æœåŠ¡å™¨ï¼Œåˆ™ä¸éœ€è¦è¾“å…¥è´¦æˆ·å¯†ç ã€‚Tokenå­˜å‚¨åœ¨ç”¨æˆ·è¿™é‡Œã€‚

   ![1656249567668](é¢è¯•JavaScript.assets/1656249567668.png)

å®‰å…¨æ€§ï¼š

ç»„æˆï¼š

![1656249636923](é¢è¯•JavaScript.assets/1656249636923.png)

![1656249747800](é¢è¯•JavaScript.assets/1656249747800.png)

ç¼–ç ï¼Œå¾ˆå®¹æ˜“å°±è§£ç ï¼Œæ‰€ä»¥

ä¸¤ç«¯ç¼–ç è¿›è¡Œç®—æ³•è¿ç®—ï¼Œå¾—åˆ°ç­¾åä¿¡æ¯ï¼Œä¿å­˜åœ¨æœåŠ¡ç«¯ä¸­ã€‚

**å°ç»“**

- Sessionä¿å­˜åœ¨æœåŠ¡å™¨ç«¯
- Cookieæ˜¯æ•°æ®è½½ä½“ï¼ŒæŠŠSessionæ”¾å…¥Cookieä¸­é€åˆ°å®¢æˆ·ç«¯ï¼›Cookieè·Ÿç€HTTPçš„æ¯ä¸ªè¯·æ±‚å‘é€åˆ°æœåŠ¡ç«¯
- Tokenåœ¨æœåŠ¡å™¨ä¸­ç”Ÿæˆï¼Œä½†ä¿å­˜åœ¨å®¢æˆ·ç«¯ä¸­ï¼Œå­˜å‚¨åœ¨Cookieæˆ–è€…Storageä¸­

**ä¸€ã€æ–¹å¼**

`javaScript`æœ¬åœ°ç¼“å­˜çš„æ–¹æ³•æˆ‘ä»¬ä¸»è¦è®²è¿°ä»¥ä¸‹å››ç§ï¼š

- cookie
- sessionStorage
- localStorage
- indexedDB

**cookie**

ğŸ¦ˆCookieçš„å·¥ä½œæœºåˆ¶æ˜¯ç”¨æˆ·è¯†åˆ«å’ŒçŠ¶æ€ç®¡ç†ã€‚æœåŠ¡ç«¯ä¸ºäº†ç®¡ç†å®¢æˆ·ç«¯çš„çŠ¶æ€ï¼ŒæŠŠä¸€äº›æ•°æ®ä¸´æ—¶å­˜å‚¨åœ¨ç”¨æˆ·çš„è®¡ç®—æœºå†…

`Cookie`ï¼Œç±»å‹ä¸ºã€Œå°å‹æ–‡æœ¬æ–‡ä»¶ã€ï¼ŒæŒ‡æŸäº›ç½‘ç«™ä¸ºäº†è¾¨åˆ«ç”¨æˆ·èº«ä»½è€Œå‚¨å­˜åœ¨ç”¨æˆ·æœ¬åœ°ç»ˆç«¯ä¸Šçš„æ•°æ®ã€‚æ˜¯ä¸ºäº†è§£å†³ `HTTP`æ— çŠ¶æ€å¯¼è‡´çš„é—®é¢˜

ä½œä¸ºä¸€æ®µä¸€èˆ¬ä¸è¶…è¿‡ 4KB çš„å°å‹æ–‡æœ¬æ•°æ®ï¼Œå®ƒç”±ä¸€ä¸ªåç§°ï¼ˆNameï¼‰ã€ä¸€ä¸ªå€¼ï¼ˆValueï¼‰å’Œå…¶å®ƒå‡ ä¸ªç”¨äºæ§åˆ¶ `cookie`æœ‰æ•ˆæœŸã€å®‰å…¨æ€§ã€ä½¿ç”¨èŒƒå›´çš„å¯é€‰å±æ€§ç»„æˆ

ä½†æ˜¯`cookie`åœ¨æ¯æ¬¡è¯·æ±‚ä¸­éƒ½ä¼šè¢«å‘é€ï¼Œå¦‚æœä¸ä½¿ç”¨ `HTTPS`å¹¶å¯¹å…¶åŠ å¯†ï¼Œå…¶ä¿å­˜çš„ä¿¡æ¯å¾ˆå®¹æ˜“è¢«çªƒå–ï¼Œå¯¼è‡´å®‰å…¨é£é™©ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ä¸€äº›ä½¿ç”¨ `cookie`ä¿æŒç™»å½•æ€çš„ç½‘ç«™ä¸Šï¼Œå¦‚æœ `cookie`è¢«çªƒå–ï¼Œä»–äººå¾ˆå®¹æ˜“åˆ©ç”¨ä½ çš„ `cookie`æ¥å‡æ‰®æˆä½ ç™»å½•ç½‘ç«™

å…³äº`cookie`å¸¸ç”¨çš„å±æ€§å¦‚ä¸‹ï¼š

- Expires ç”¨äºè®¾ç½® Cookie çš„è¿‡æœŸæ—¶é—´

```js
Expires=Wed, 21 Oct 2015 07:28:00 GMT
```

- Max-Age ç”¨äºè®¾ç½®åœ¨ Cookie å¤±æ•ˆä¹‹å‰éœ€è¦ç»è¿‡çš„ç§’æ•°ï¼ˆä¼˜å…ˆçº§æ¯”`Expires`é«˜ï¼‰

```js
Max-Age=604800
```

- `Domain`æŒ‡å®šäº† `Cookie` å¯ä»¥é€è¾¾çš„ä¸»æœºå
- `Path`æŒ‡å®šäº†ä¸€ä¸ª `URL`è·¯å¾„ï¼Œè¿™ä¸ªè·¯å¾„å¿…é¡»å‡ºç°åœ¨è¦è¯·æ±‚çš„èµ„æºçš„è·¯å¾„ä¸­æ‰å¯ä»¥å‘é€ `Cookie` é¦–éƒ¨

```js
Path=/docs   # /docs/Web/ ä¸‹çš„èµ„æºä¼šå¸¦ Cookie é¦–éƒ¨
```

- æ ‡è®°ä¸º `Secure`çš„ `Cookie`åªåº”é€šè¿‡è¢«`HTTPS`åè®®åŠ å¯†è¿‡çš„è¯·æ±‚å‘é€ç»™æœåŠ¡ç«¯

é€šè¿‡ä¸Šè¿°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°`cookie`åˆå¼€å§‹çš„ä½œç”¨å¹¶ä¸æ˜¯ä¸ºäº†ç¼“å­˜è€Œè®¾è®¡å‡ºæ¥ï¼Œåªæ˜¯å€Ÿç”¨äº†`cookie`çš„ç‰¹æ€§å®ç°ç¼“å­˜

å…³äº`cookie`çš„ä½¿ç”¨å¦‚ä¸‹ï¼š

```js
document.cookie = 'åå­—=å€¼';
```

å…³äº`cookie`çš„ä¿®æ”¹ï¼Œé¦–å…ˆè¦ç¡®å®š`domain`å’Œ`path`å±æ€§éƒ½æ˜¯ç›¸åŒçš„æ‰å¯ä»¥ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªä¸åŒå¾—æ—¶å€™éƒ½ä¼šåˆ›å»ºå‡ºä¸€ä¸ªæ–°çš„`cookie`

```js
Set-Cookie:name=aa; domain=aa.net; path=/  # æœåŠ¡ç«¯è®¾ç½®
document.cookie =name=bb; domain=aa.net; path=/  # å®¢æˆ·ç«¯è®¾ç½®
```

æœ€å`cookie`çš„åˆ é™¤ï¼Œæœ€å¸¸ç”¨çš„æ–¹æ³•å°±æ˜¯ç»™`cookie`è®¾ç½®ä¸€ä¸ªè¿‡æœŸçš„äº‹ä»¶ï¼Œè¿™æ ·`cookie`è¿‡æœŸåä¼šè¢«æµè§ˆå™¨åˆ é™¤ã€‚

**localStorage**

`HTML5`æ–°æ–¹æ³•ï¼ŒIE8åŠä»¥ä¸Šæµè§ˆå™¨éƒ½å…¼å®¹;--ã€‹ğŸ¦ˆæŒä¹…åŒ–å­˜å‚¨æ•°æ®

- ç”Ÿå‘½å‘¨æœŸï¼šæŒä¹…åŒ–çš„æœ¬åœ°å­˜å‚¨ï¼Œé™¤éä¸»åŠ¨åˆ é™¤æ•°æ®ï¼Œå¦åˆ™æ•°æ®æ˜¯æ°¸è¿œä¸ä¼šè¿‡æœŸçš„
- å­˜å‚¨çš„ä¿¡æ¯åœ¨åŒä¸€åŸŸä¸­æ˜¯å…±äº«çš„
- å½“æœ¬é¡µæ“ä½œï¼ˆæ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤ï¼‰äº†`localStorage`çš„æ—¶å€™ï¼Œæœ¬é¡µé¢ä¸ä¼šè§¦å‘`storage`äº‹ä»¶,ä½†æ˜¯åˆ«çš„é¡µé¢ä¼šè§¦å‘`storage`äº‹ä»¶ã€‚
- å¤§å°ï¼š5Mï¼ˆè·Ÿæµè§ˆå™¨å‚å•†æœ‰å…³ç³»ï¼‰
- `localStorage`æœ¬è´¨ä¸Šæ˜¯å¯¹å­—ç¬¦ä¸²çš„è¯»å–ï¼Œå¦‚æœå­˜å‚¨å†…å®¹å¤šçš„è¯ä¼šæ¶ˆè€—å†…å­˜ç©ºé—´ï¼Œä¼šå¯¼è‡´é¡µé¢å˜å¡
- å—åŒæºç­–ç•¥çš„é™åˆ¶

`localStorage`çš„ä½¿ç”¨

- å­˜å‚¨æ•°æ®

  ```js
  // ä½¿ç”¨æ–¹æ³•
  localStorage.setItem('name','bobo')
  // ä½¿ç”¨å±æ€§
  localStorage.name = 'bobo'
  ```

- è·å–æ•°æ®

  ```js
  // ä½¿ç”¨æ–¹æ³•
  localStorage.getItem('name','bobo')
  // ä½¿ç”¨å±æ€§
  let name = localStorage.name
  ```

- è·å–é”®å

  ```js
  localStorage.key(0) //è·å–ç¬¬ä¸€ä¸ªé”®å
  ```

- åˆ é™¤

  ```js
  localStorage.removeItem('username')
  ```

- ä¸€æ¬¡æ€§æ¸…é™¤æ‰€æœ‰å­˜å‚¨

  ```js
  localStorage.clear()
  ```

ç¼ºç‚¹

- æ— æ³•åƒ`Cookie`ä¸€æ ·è®¾ç½®è¿‡æœŸæ—¶é—´
- åªèƒ½å­˜å…¥å­—ç¬¦ä¸²ï¼Œæ— æ³•ç›´æ¥å­˜å¯¹è±¡

```js
localStorage.setItem('key', {name: 'value'});
console.log(localStorage.getItem('key')); // '[object, Object]'
```

**sessionStorage**

å­˜å‚¨ä¼šè¯æ•°æ®

`sessionStorage`å’Œ `localStorage`ä½¿ç”¨æ–¹æ³•åŸºæœ¬ä¸€è‡´ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ç”Ÿå‘½å‘¨æœŸï¼Œä¸€æ—¦é¡µé¢ï¼ˆä¼šè¯ï¼‰å…³é—­ï¼Œ`sessionStorage` å°†ä¼šåˆ é™¤æ•°æ®ã€‚

**indexedDB**

ğŸ¦ˆå­˜å‚¨ç»“æ„åŒ–æ•°æ®

è™½ç„¶ `Web Storage`å¯¹äºå­˜å‚¨è¾ƒå°‘é‡çš„æ•°æ®å¾ˆæœ‰ç”¨ï¼Œä½†å¯¹äºå­˜å‚¨æ›´å¤§é‡çš„ç»“æ„åŒ–æ•°æ®æ¥è¯´ï¼Œè¿™ç§æ–¹æ³•ä¸å¤ªæœ‰ç”¨ã€‚`IndexedDB`æä¾›äº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆã€‚

ä½¿ç”¨æ–¹æ³•

1. åˆ›å»ºå¯¹è±¡å­˜å‚¨
2. åˆ›å»ºäº‹ç‰©æ“ä½œæ•°æ®

```js
// ç»™å®šä¸€å®šæ•°æ®
let user = {
  username:'bobo', //ä½œä¸ºé”®ï¼Œå¿…é¡»å”¯ä¸€ï¼Œè®¿é—®æ•°æ®çš„å‡­è¯
  password:'2525'
}
// 1.åˆ›å»ºå¯¹è±¡å­˜å‚¨
let request = indexedDB.open('admin', version)
request.onupgradeneeded = (event) => {
	
}...
```

æ‰©å±•ï¼š

äº‹ç‰©ï¼šæ ¹æ®é”®å–å¾—ä¸€æ¡æ•°æ®

æ¸¸æ ‡ï¼šæŒ‡å‘ç»“æœé›†çš„æŒ‡é’ˆï¼Œè·å–å¤šæ¡æ•°æ®ã€‚

é”®èŒƒå›´ï¼šç®¡ç†æ¸¸æ ‡ï¼ŒæŒ‡å®šæ¸¸æ ‡ç´¢å¼•çš„ä½ç½®ï¼Œæ ¹æ®æ–¹æ³•ç¼ºç‚¹èŒƒå›´ï¼Œè·å–è¯¥èŒƒå›´å†…çš„æ•°æ®ã€‚

**äºŒã€åŒºåˆ«**

å…³äº`cookie`ã€`sessionStorage`ã€`localStorage`ä¸‰è€…çš„åŒºåˆ«ä¸»è¦å¦‚ä¸‹ï¼š

- å­˜å‚¨å¤§å°ï¼š`cookie`æ•°æ®å¤§å°ä¸èƒ½è¶…è¿‡`4k`ï¼Œ`sessionStorage`å’Œ`localStorage`è™½ç„¶ä¹Ÿæœ‰å­˜å‚¨å¤§å°çš„é™åˆ¶ï¼Œä½†æ¯”`cookie`å¤§å¾—å¤šï¼Œå¯ä»¥è¾¾åˆ°5Mæˆ–æ›´å¤§
- æœ‰æ•ˆæ—¶é—´ï¼š`localStorage`å­˜å‚¨æŒä¹…æ•°æ®ï¼Œæµè§ˆå™¨å…³é—­åæ•°æ®ä¸ä¸¢å¤±é™¤éä¸»åŠ¨åˆ é™¤æ•°æ®ï¼› `sessionStorage`æ•°æ®åœ¨å½“å‰æµè§ˆå™¨çª—å£å…³é—­åè‡ªåŠ¨åˆ é™¤ï¼›`cookie`è®¾ç½®çš„`cookie`è¿‡æœŸæ—¶é—´ä¹‹å‰ä¸€ç›´æœ‰æ•ˆï¼Œå³ä½¿çª—å£æˆ–æµè§ˆå™¨å…³é—­
- æ•°æ®ä¸æœåŠ¡å™¨ä¹‹é—´çš„äº¤äº’æ–¹å¼ï¼Œ`cookie`çš„æ•°æ®ä¼šè‡ªåŠ¨çš„ä¼ é€’åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ç«¯ä¹Ÿå¯ä»¥å†™`cookie`åˆ°å®¢æˆ·ç«¯ï¼› `sessionStorage`å’Œ`localStorage`ä¸ä¼šè‡ªåŠ¨æŠŠæ•°æ®å‘ç»™æœåŠ¡å™¨ï¼Œä»…åœ¨æœ¬åœ°ä¿å­˜

**ä¸‰ã€åº”ç”¨åœºæ™¯**

åœ¨äº†è§£äº†ä¸Šè¿°çš„å‰ç«¯çš„ç¼“å­˜æ–¹å¼åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹çœ‹é’ˆå¯¹ä¸å¯¹åœºæ™¯çš„ä½¿ç”¨é€‰æ‹©ï¼š

- æ ‡è®°ç”¨æˆ·ä¸è·Ÿè¸ªç”¨æˆ·è¡Œä¸ºçš„æƒ…å†µï¼Œæ¨èä½¿ç”¨`cookie`
- é€‚åˆé•¿æœŸä¿å­˜åœ¨æœ¬åœ°çš„æ•°æ®ï¼ˆä»¤ç‰Œï¼‰ï¼Œæ¨èä½¿ç”¨`localStorage`
- æ•æ„Ÿè´¦å·ä¸€æ¬¡æ€§ç™»å½•ï¼Œæ¨èä½¿ç”¨`sessionStorage`
- å­˜å‚¨å¤§é‡æ•°æ®çš„æƒ…å†µã€åœ¨çº¿æ–‡æ¡£ï¼ˆå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼‰ä¿å­˜ç¼–è¾‘å†å²çš„æƒ…å†µï¼Œæ¨èä½¿ç”¨`indexedDB`

### é—®é¢˜21ï¼šè¯´è¯´ä½ å¯¹å‡½æ•°å¼ç¼–ç¨‹çš„ç†è§£ï¼Ÿä¼˜ç¼ºç‚¹ï¼Ÿ

![img](é¢è¯•JavaScript.assets/ec0f6e80-8534-11eb-85f6-6fac77c0c9b3.png)

**æŸ¯é‡ŒåŒ–**

æŸ¯é‡ŒåŒ–æ˜¯æŠŠä¸€ä¸ªå¤šå‚æ•°å‡½æ•°è½¬åŒ–æˆä¸€ä¸ªåµŒå¥—çš„ä¸€å…ƒå‡½æ•°çš„è¿‡ç¨‹ã€‚

ä¸€ä¸ªäºŒå…ƒå‡½æ•°å¦‚ä¸‹ï¼š

```js
let fn = (x,y)=>x+y;
```

è½¬åŒ–æˆæŸ¯é‡ŒåŒ–å‡½æ•°å¦‚ä¸‹ï¼š

```js
const curry = function(fn){
    return function(x){
        return function(y){
            return fn(x,y);
        }
    }
}
let myfn = curry(fn);
console.log( myfn(1)(2) );
```

ä»£ç æ€è·¯ï¼šé¦–å…ˆæˆ‘ä»¬è°ƒç”¨äº†`curry()`å‡½æ•°å¹¶ä¸”ä¼ å…¥å‚æ•°fnï¼Œå°±é¢„å¤„ç†äº†x+yï¼Œç„¶åè¿”å›çš„æ˜¯ä¸€ä¸ªå‡½æ•°`function(x)`éƒ¨åˆ†ï¼Œç„¶åå†è°ƒç”¨`myfn(1)`ä¼ å…¥å‚æ•°1ï¼Œè¿”å›`function(y)`éƒ¨åˆ†ï¼Œå†æ¬¡è°ƒç”¨`myfn(1)(2)`ä¼ å…¥å‚æ•°2ï¼Œè¿”å› `fn(x,y)`æ‰§è¡Œx+yï¼Œè¾“å‡º3ã€‚

ä¸Šé¢çš„`curry`å‡½æ•°åªèƒ½å¤„ç†äºŒå…ƒæƒ…å†µï¼Œä¸‹é¢å†æ¥å®ç°ä¸€ä¸ªå®ç°å¤šå‚æ•°çš„æƒ…å†µ

```js
// å¤šå‚æ•°æŸ¯é‡ŒåŒ–ï¼›
const curry = function(fn){
    return function curriedFn(...args){
        if(args.length<fn.length){
            return function(){
                return curriedFn(...args.concat([...arguments]));
            }
        }
        return fn(...args);
    }
}
const fn = (x,y,z,a)=>x+y+z+a;
const myfn = curry(fn);
console.log(myfn(1)(2)(3)(1));
```

å…³äºæŸ¯é‡ŒåŒ–å‡½æ•°çš„æ„ä¹‰å¦‚ä¸‹ï¼š

- è®©çº¯å‡½æ•°æ›´çº¯ï¼Œæ¯æ¬¡æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œæ¾æ•£è§£è€¦
- æƒ°æ€§æ‰§è¡Œ

æŸ¯é‡ŒåŒ–å‡½æ•°é¢è¯•é¢˜ï¼ˆä¸Šé¢çš„å¤šå‚æ•°æŸ¯é‡ŒåŒ–å°±æ˜¯ç­”æ¡ˆï¼‰

add(1)(2)(3)(4)(5)(6); // => 21
add(1, 2)(3, 4)(5, 6); // => 21
add(1, 2, 3, 4, 5, 6); // => 21

**ç»„åˆä¸ç®¡é“**

ç»„åˆå‡½æ•°ï¼Œç›®çš„æ˜¯å°†å¤šä¸ªå‡½æ•°ç»„åˆæˆä¸€ä¸ªå‡½æ•°

ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼š

```js
function afn(a){
    return a*2;
}
function bfn(b){
    return b*3;
}
const compose = (a,b)=>c=>a(b(c));
let myfn =  compose(afn,bfn);
console.log( myfn(2));
```

å¯ä»¥çœ‹åˆ°`compose`å®ç°ä¸€ä¸ªç®€å•çš„åŠŸèƒ½ï¼šå½¢æˆäº†ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè€Œè¿™ä¸ªå‡½æ•°å°±æ˜¯ä¸€æ¡ä» `bfn -> afn` çš„æµæ°´çº¿

ä¸‹é¢å†æ¥çœ‹çœ‹å¦‚ä½•å®ç°ä¸€ä¸ªå¤šå‡½æ•°ç»„åˆï¼š

```js
const compose = (...fns)=>val=>fns.reverse().reduce((acc,fn)=>fn(acc),val);

// ğŸ¦ˆå®ç°ä¸‹é€»è¾‘
const compose = (...fns) => {
	val => {
		fns.reverse().reduce((acc, fn) => fn(acc),val)
  }
}
```

`compose`æ‰§è¡Œæ˜¯ä»å³åˆ°å·¦çš„ã€‚è€Œç®¡é“å‡½æ•°ï¼Œæ‰§è¡Œé¡ºåºæ˜¯ä»å·¦åˆ°å³æ‰§è¡Œçš„

```js
const pipe = (...fns)=>val=>fns.reduce((acc,fn)=>fn(acc),val);
```

ç»„åˆå‡½æ•°ä¸ç®¡é“å‡½æ•°çš„æ„ä¹‰åœ¨äºï¼šå¯ä»¥æŠŠå¾ˆå¤šå°å‡½æ•°ç»„åˆèµ·æ¥å®Œæˆæ›´å¤æ‚çš„é€»è¾‘

**ä¸‰ã€ä¼˜ç¼ºç‚¹**

ä¼˜ç‚¹

- æ›´å¥½çš„ç®¡ç†çŠ¶æ€ï¼šå› ä¸ºå®ƒçš„å®—æ—¨æ˜¯æ— çŠ¶æ€ï¼Œæˆ–è€…è¯´æ›´å°‘çš„çŠ¶æ€ï¼Œèƒ½æœ€å¤§åŒ–çš„å‡å°‘è¿™äº›æœªçŸ¥ã€ä¼˜åŒ–ä»£ç ã€å‡å°‘å‡ºé”™æƒ…å†µ
- æ›´ç®€å•çš„å¤ç”¨ï¼šå›ºå®šè¾“å…¥->å›ºå®šè¾“å‡ºï¼Œæ²¡æœ‰å…¶ä»–å¤–éƒ¨å˜é‡å½±å“ï¼Œå¹¶ä¸”æ— å‰¯ä½œç”¨ã€‚è¿™æ ·ä»£ç å¤ç”¨æ—¶ï¼Œå®Œå…¨ä¸éœ€è¦è€ƒè™‘å®ƒçš„å†…éƒ¨å®ç°å’Œå¤–éƒ¨å½±å“
- æ›´ä¼˜é›…çš„ç»„åˆï¼šå¾€å¤§çš„è¯´ï¼Œç½‘é¡µæ˜¯ç”±å„ä¸ªç»„ä»¶ç»„æˆçš„ã€‚å¾€å°çš„è¯´ï¼Œä¸€ä¸ªå‡½æ•°ä¹Ÿå¯èƒ½æ˜¯ç”±å¤šä¸ªå°å‡½æ•°ç»„æˆçš„ã€‚æ›´å¼ºçš„å¤ç”¨æ€§ï¼Œå¸¦æ¥æ›´å¼ºå¤§çš„ç»„åˆæ€§
- éšæ€§å¥½å¤„ã€‚å‡å°‘ä»£ç é‡ï¼Œæé«˜ç»´æŠ¤æ€§

ç¼ºç‚¹ï¼š

- æ€§èƒ½ï¼šå‡½æ•°å¼ç¼–ç¨‹ç›¸å¯¹äºæŒ‡ä»¤å¼ç¼–ç¨‹ï¼Œæ€§èƒ½ç»å¯¹æ˜¯ä¸€ä¸ªçŸ­æ¿ï¼Œå› ä¸ºå®ƒå¾€å¾€ä¼š==å¯¹ä¸€ä¸ªæ–¹æ³•è¿›è¡Œè¿‡åº¦åŒ…è£…==ï¼Œä»è€Œäº§ç”Ÿä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ€§èƒ½å¼€é”€
- èµ„æºå ç”¨ï¼šåœ¨ JS ä¸­ä¸ºäº†å®ç°å¯¹è±¡çŠ¶æ€çš„ä¸å¯å˜ï¼Œå¾€å¾€ä¼šåˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œå› æ­¤ï¼Œå®ƒå¯¹åƒåœ¾å›æ”¶æ‰€äº§ç”Ÿçš„å‹åŠ›è¿œè¿œè¶…è¿‡å…¶ä»–ç¼–ç¨‹æ–¹å¼
- é€’å½’é™·é˜±ï¼šåœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œä¸ºäº†å®ç°è¿­ä»£ï¼Œé€šå¸¸ä¼šé‡‡ç”¨é€’å½’æ“ä½œ

### é—®é¢˜22ï¼šJavascriptä¸­å¦‚ä½•å®ç°å‡½æ•°ç¼“å­˜ï¼Ÿå‡½æ•°ç¼“å­˜æœ‰å“ªäº›åº”ç”¨åœºæ™¯ï¼Ÿ

