<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    // è‡ªå®šä¹‰é“¾è¡¨
    /* 
    åŒ…å«ä¸¤ä¸ªç±»ï¼ŒNode ç±»ç”¨æ¥è¡¨ç¤ºèŠ‚ ç‚¹ï¼ŒLinkedList ç±»æä¾›äº†æ’å…¥èŠ‚ç‚¹ã€åˆ é™¤èŠ‚ç‚¹ã€æ˜¾ ç¤ºåˆ—è¡¨å…ƒç´ çš„æ–¹æ³•

    */
    // Nodeç±»
    function Node(element) {
      this.element = element //ä¿å­˜èŠ‚ç‚¹ä¸Šçš„æ•°æ®
      this.next = null // ä¿å­˜æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„é“¾æ¥;åˆå§‹åŒ–ä¸ºnullï¼Œå½“æœ‰æ–°å…ƒç´ æ’å…¥æ—¶ï¼ŒæŒ‡å‘æ–°å…ƒç´ 
    }
    // LListç±»ï¼šå¯¹é“¾è¡¨çš„æ“ä½œæ–¹æ³•
    function LList() {
      this.head = new Node('head')
      this.find = find; // æŸ¥æ‰¾èŠ‚ç‚¹
      this.insert = insert;
      this.findPrevious = findPrevious;
      this.remove = remove;
      this.display = display;
    }
    // findæ–¹æ³•ï¼Œ
    function find(item) {
      let curNode = this.head
      while (curNode.element !== item) {
        curNode = curNode.next
      }
      return curNode
    }
    // insertæ–¹æ³•,æ’å…¥èŠ‚ç‚¹ï¼Œï¼ˆè¿™é‡Œæ˜¯åœ¨ä¸€ä¸ªå·²çŸ¥èŠ‚ç‚¹åé¢æ’å…¥å…ƒç´ ï¼‰
    function insert(newElement, item) {
      let newNode = new Node(newElement)
      let current = this.find(item)
      current.next = newNode
      newNode.next = current.next.next
    }
    // displayæ˜¾ç¤ºé“¾è¡¨å…ƒç´ ---æ‰“å°è¾“å‡º
    function display() {
      // å½“å‰èŠ‚ç‚¹ä¸ä¸ºnullå°±æ‰“å°è¾“å‡º
      let curNode = this.head
      while (curNode.next !== null) {
        console.log(curNode.next.element);
        curNode = curNode.next
      }
    }
    // removeåˆ é™¤èŠ‚ç‚¹:å…ˆæ‰¾åˆ°å¾…åˆ é™¤èŠ‚ç‚¹çš„å‰ä¸€èŠ‚ç‚¹ï¼Œç„¶åå†å¯¹èŠ‚ç‚¹è¿›è¡Œåˆ é™¤
    function findPrevious(item) {
      // åˆ¤æ–­ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸æ˜¯å¾…åˆ é™¤å…ƒç´ ï¼Œå°±æ‰¾åˆ°äº†å¾…åˆ é™¤å…ƒç´ çš„å‰ä¸€èŠ‚ç‚¹
      let curNode = this.head
      while (curNode !== null && curNode.next.element !== item) {
        curNode = curNode.next
      }
      return curNode
    }
    function remove(item) {
      let prevNode = this.findPrevious(item)
      if (prevNode.next !== null) {
        prevNode.next = prevNode.next.next
      }
    }

    // æµ‹è¯•ä»£ç 
    let cities = new LList()
    // æ’å…¥å…ƒç´ 
    cities.insert("Beijing", "head")
    cities.insert("Tianjin", "Beijing")
    cities.insert("Yantai", "Tianjin")
    cities.insert("Xian", "Yantai")
    cities.display()
    console.log('==========');
    cities.remove("Xian")
    cities.display()

    // instanceofåŸç†å®ç°
    function myInstanceof(left, right) {
      // åˆ¤æ–­æ˜¯ä¸æ˜¯åŸºç¡€æ•°æ®ç±»å‹
      if (typeof (left) !== 'object' || typeof (left) !== null) return false
      // è·å–å®ä¾‹å¯¹è±¡çš„åŸå‹
      let proto = Object.getPrototypeOf(left)
      // æ²¿ç€åŸå‹é“¾ä¸€ç›´æŸ¥æ‰¾
      while (true) {
        if (proto === null) return false
        if (proto = right.prototype) return true //rightæ„é€ å‡½æ•°çš„prototypeå±æ€§åœ¨leftå®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ä¸Š
        proto = Object.getPrototypeOf(proto)
      }
    }

    // å®ç°ä¸€ä¸ªé€šç”¨çš„æ•°æ®ç±»å‹åˆ¤æ–­æ–¹æ³•
    // æŠŠtypeofå’ŒObject.prototype.toString.call()ç»“åˆèµ·æ¥
    // ä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨Object.prototype.toString.call()ï¼Œä»¥é˜²toStringè¢«é‡å†™
    function getType(obj) {
      // åŸå§‹æ•°æ®ç±»å‹
      let type = typeof (obj)
      if (type !== 'object') return type
      // å¼•ç”¨æ•°æ®ç±»å‹
      return Object.prototype.toString.call(obj).replace(/^\[object (\S+)\]$/, '$1')
    }

    // æ‰‹å†™é˜²æŠ–èŠ‚æµ
    // é˜²æŠ–ï¼šnç§’åæ‰§è¡Œäº‹ä»¶ï¼Œå¦‚æœnç§’å†…è¢«é‡å¤è§¦å‘ï¼Œåˆ™é‡æ–°è®¡æ—¶
    // å‚æ•°funæ˜¯éœ€è¦é˜²æŠ–çš„å‡½æ•°ï¼Œwaitæ˜¯ç­‰å¾…æ—¶é—´
    function debounce(fun, wait = 50) {
      let timer = null;
      // è¿”å›çš„å‡½æ•°æ˜¯ç”¨æˆ·å®šä¹‰çš„å®é™…çš„é˜²æŠ–å‡½æ•°
      return (...arg) => {
        // å¦‚æœå·²ç»å®šä¹‰å®šæ—¶å™¨
        if (timer) clearTimeout(timer)
        // å¼€å¯å®šæ—¶å™¨ï¼Œå»¶è¿Ÿç”¨æˆ·ä¼ å…¥çš„æ–¹æ³•
        timer = setTimeout(() => {
          fun.apply(this, arg)
        }, wait)
      }
    }

    // é˜²æŠ–ç«‹å³æ‰§è¡Œ
    function debounce(fun, wait) {
      let timeout = null;
      let isFirst = true;
      return (...arg) => {
        if (timeout) clearTimeout(timeout)
        if (isFirst) {
          // å…³é—­ç«‹å³æ‰§è¡Œï¼Œå½“ç­‰å¾…æ—¶é—´å†…ä¸ä¼šæ‰§è¡Œè¯¥ä½œç”¨åŸŸ
          isFirst = false
          timeout = setTimeout(() => {
            // è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œåœ¨ç­‰å¾…ä¸€å®šæ—¶é—´åï¼Œé‡æ–°è®¾ç½®ä½é˜²æŠ–ç«‹å³æ‰§è¡Œ
            isFirst = true
          }, wait)
          return fun.apply(this, args)
        } else {
          timeout = setTimeout(() => {
            fun.apply(this, arg)
          }, wait)
        }
      }
    }

    // èŠ‚æµå‡½æ•°
    // èŠ‚æµï¼šå•ä½æ—¶é—´å†…åªèƒ½è§¦å‘ä¸€ä¸ªï¼Œå¦‚æœé‡å¤è§¦å‘äº‹ä»¶ï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡
    // funcæ˜¯ç”¨æˆ·éœ€è¦èŠ‚æµçš„å‡½æ•°
    function throttle(func, wait) {
      // å®šä¹‰flagé˜€é—¨ï¼Œç”¨æ¥æ§åˆ¶äº‹ä»¶çš„æ‰§è¡Œ
      let flag = true;
      // è¿”å›èŠ‚æµå‡½æ•°
      return (...args) => {
        if (flag) {
          // å¼€å¯å®šæ—¶å™¨ï¼Œä¸€æ®µæ—¶é—´åæ‰§è¡Œäº‹ä»¶ï¼Œå¹¶ä¸”æ‰“å¼€é˜€é—¨
          setTimeout(() => {
            func.apply(this, args)
            flag = true;
          }, wait)
        }
        // å¼€å¯é˜€é—¨ï¼Œæ‰“å¼€å®šæ—¶å™¨åï¼Œå…³é—­é˜€é—¨ï¼Œè¿™æ—¶å€™å†æ¬¡è°ƒç”¨ä¹Ÿä¸ä¼šæ‰§è¡Œå‡½æ•°
        flag = false;
      }
    }

    // ğŸ¦ˆğŸ¦ˆğŸ¦ˆğŸ¦ˆğŸ¦ˆğŸ¦ˆğŸ¦ˆğŸ¦ˆğŸ¦ˆğŸ¦ˆğŸ¦ˆğŸ¦ˆğŸ¦ˆğŸ¦ˆğŸ¦ˆğŸ¦ˆğŸ¦ˆğŸ¦ˆğŸ¦ˆ
    console.log('============================');

    const children = [
      'hello world',
      {
        type: 'p',
        props: {
          id: 2,
          name: 'pç»„ä»¶',
          style: {
            color: 'black'
          }
        },
        children: [
          'ä½ å¥½1'
        ]
      }, {
        type: 'p',
        props: {
          id: 3,
          name: 'pç»„ä»¶',
          style: {
            color: 'black'
          }
        },
        children: [
          'ä½ å¥½2'
        ]
      }, {
        type: 'div',
        props: {
          id: 4,
          name: 'div1',
          style: {
            // border: '2px solid black',
            // height: '40px',

          }
        },
        children: [

        ]
      }, {
        type: 'div',
        props: {
          id: 5,
          name: 'div2',
          style: {
            // border: '2px solid black',
            // height: '40px',
          }
        },
        children: [
          'é€’å½’å‹å…¥'
        ]
      }
    ]

    console.log(children);

    const childrens = []
    const getCom = (arr) => {
      // æ˜¯å°±åŠ å…¥æ•°ç»„ï¼Œä¸æ˜¯å°±è§£æ„children
      arr.forEach(element => {
        if (typeof (element) === 'string') childrens.push(element)
        else {
          const {children} = element
          getCom(children)
        }
      });

      // const childrens = []
      // const chil = children.map((item, index) => {
      //   // æ˜¯å­—ç¬¦ä¸²ç›´æ¥åŠ å…¥æ•°ç»„ï¼Œä¸æ˜¯å­—ç¬¦ä¸²æå–å‡ºchildren
      //   if (typeof (item) === 'string') childrens.push(item)

      // })
    }
    getCom(children)
    console.log(childrens)

  </script>
</body>

</html>