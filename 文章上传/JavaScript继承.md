# JavaScriptç»§æ‰¿

## ä¸€ã€ç»§æ‰¿æ˜¯ä»€ä¹ˆ

ç»§æ‰¿ï¼ˆinheritanceï¼‰æ˜¯é¢å‘å¯¹è±¡è½¯ä»¶æŠ€æœ¯å½“ä¸­çš„ä¸€ä¸ªæ¦‚å¿µã€‚

å¦‚æœä¸€ä¸ªç±»åˆ«Bâ€œç»§æ‰¿è‡ªâ€å¦ä¸€ä¸ªç±»åˆ«Aï¼Œå°±æŠŠè¿™ä¸ªBç§°ä¸ºâ€œAçš„å­ç±»â€ï¼Œè€ŒæŠŠAç§°ä¸ºâ€œBçš„çˆ¶ç±»åˆ«â€ä¹Ÿå¯ä»¥ç§°â€œAæ˜¯Bçš„è¶…ç±»â€

- ç»§æ‰¿çš„ä¼˜ç‚¹

ç»§æ‰¿å¯ä»¥ä½¿å¾—å­ç±»å…·æœ‰çˆ¶ç±»åˆ«çš„å„ç§å±æ€§å’Œæ–¹æ³•ï¼Œè€Œä¸éœ€è¦å†æ¬¡ç¼–å†™ç›¸åŒçš„ä»£ç 

åœ¨å­ç±»åˆ«ç»§æ‰¿çˆ¶ç±»åˆ«çš„åŒæ—¶ï¼Œå¯ä»¥é‡æ–°å®šä¹‰æŸäº›å±æ€§ï¼Œå¹¶é‡å†™æŸäº›æ–¹æ³•ï¼Œå³è¦†ç›–çˆ¶ç±»åˆ«çš„åŸæœ‰å±æ€§å’Œæ–¹æ³•ï¼Œä½¿å…¶è·å¾—ä¸çˆ¶ç±»åˆ«ä¸åŒçš„åŠŸèƒ½

è™½ç„¶`JavaScript`å¹¶ä¸æ˜¯çœŸæ­£çš„é¢å‘å¯¹è±¡è¯­è¨€ï¼Œä½†å®ƒå¤©ç”Ÿçš„çµæ´»æ€§ï¼Œä½¿åº”ç”¨åœºæ™¯æ›´åŠ ä¸°å¯Œ

å…³äºç»§æ‰¿ï¼Œæˆ‘ä»¬ä¸¾ä¸ªå½¢è±¡çš„ä¾‹å­ï¼š

å®šä¹‰ä¸€ä¸ªç±»ï¼ˆClassï¼‰å«æ±½è½¦ï¼Œæ±½è½¦çš„å±æ€§åŒ…æ‹¬é¢œè‰²ã€è½®èƒã€å“ç‰Œã€é€Ÿåº¦ã€æ’æ°”é‡ç­‰

```js
class Car{
    constructor(color,speed){
        this.color = color
        this.speed = speed
        // ...
    }
}
```

ç”±æ±½è½¦è¿™ä¸ªç±»å¯ä»¥æ´¾ç”Ÿå‡ºâ€œè½¿è½¦â€å’Œâ€œè´§è½¦â€ä¸¤ä¸ªç±»ï¼Œåœ¨æ±½è½¦çš„åŸºç¡€å±æ€§ä¸Šï¼Œä¸ºè½¿è½¦æ·»åŠ ä¸€ä¸ªåå¤‡å¢ã€ç»™è´§è½¦æ·»åŠ ä¸€ä¸ªå¤§è´§ç®±

```js
// è´§è½¦
class Truck extends Car{
    constructor(color,speed){
        super(color,speed)
        this.Container = true // è´§ç®±
    }
}
```

è¿™æ ·è½¿è½¦å’Œè´§è½¦å°±æ˜¯ä¸ä¸€æ ·çš„ï¼Œä½†æ˜¯äºŒè€…éƒ½å±äºæ±½è½¦è¿™ä¸ªç±»ï¼Œæ±½è½¦ã€è½¿è½¦ç»§æ‰¿äº†æ±½è½¦çš„å±æ€§ï¼Œè€Œä¸éœ€è¦å†æ¬¡åœ¨â€œè½¿è½¦â€ä¸­å®šä¹‰æ±½è½¦å·²ç»æœ‰çš„å±æ€§

åœ¨â€œè½¿è½¦â€ç»§æ‰¿â€œæ±½è½¦â€çš„åŒæ—¶ï¼Œä¹Ÿå¯ä»¥é‡æ–°å®šä¹‰æ±½è½¦çš„æŸäº›å±æ€§ï¼Œå¹¶é‡å†™æˆ–è¦†ç›–æŸäº›å±æ€§å’Œæ–¹æ³•ï¼Œä½¿å…¶è·å¾—ä¸â€œæ±½è½¦â€è¿™ä¸ªçˆ¶ç±»ä¸åŒçš„å±æ€§å’Œæ–¹æ³•

```js
class Truck extends Car{
    constructor(color,speed){
        super(color,speed)
        this.color = "black" //è¦†ç›–
        this.Container = true // è´§ç®±
    }
}
```

ä»è¿™ä¸ªä¾‹å­ä¸­å°±èƒ½è¯¦ç»†è¯´æ˜æ±½è½¦ã€è½¿è½¦ä»¥åŠå¡è½¦ä¹‹é—´çš„ç»§æ‰¿å…³ç³»

## äºŒã€å®ç°æ–¹å¼

### 1. åŸå‹é“¾ç»§æ‰¿ï¼ˆä¸ä¼šè¢«å•ç‹¬ä½¿ç”¨ï¼‰

ğŸ¦ˆå®ç°ä¸€ä¸ªåŸå‹é“¾ç»§æ‰¿

å®šä¹‰çˆ¶ç±»ã€å­ç±»æ„é€ å‡½æ•°ï¼Œè®©å­ç±»æ„é€ å‡½æ•°çš„åŸå‹æ‰§è¡Œçˆ¶çš„å®ä¾‹å¯¹è±¡ï¼Œè¿™æ ·å°±å®ç°ç±»å­ç±»ç»§æ‰¿çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ã€‚

```js
// å®šä¹‰çˆ¶ç±»
function Parent() {
    this.name = 'Jack';
}
// çˆ¶ç±»åŸå‹æ·»åŠ æ–¹æ³•
Parent.prototype.getName = function () {
    return this.name;
};

// å­ç±»
function Child() {}
// å­ç±»çš„åŸå‹è®¾ç½®ä¸ºçˆ¶ç±»Parentçš„å®ä¾‹
Child.prototype = new Parent();

// å®ä¾‹åŒ–å­ç±»
const child = new Child();

console.log(child.getName()); // Jack
```

![img](../JavaScript/%E9%9D%A2%E8%AF%95%EF%BC%9AJS/%E9%9D%A2%E8%AF%95JavaScript.assets/20210802133147.png)

ä¸¤ä¸ªæ³¨æ„ç‚¹ï¼ˆç¼ºç‚¹ï¼‰ï¼š

- ç»§æ‰¿ä¹‹åå†æ›´æ”¹åŸå‹å±æ€§ä¸ä¼šå‘ä¸‹ä¼ é€’
- å®ä¾‹ä¹‹é—´äº’ç›¸å½±å“

åŸå‹é“¾ç»§æ‰¿ï¼Œåˆ›å»ºå®ä¾‹å¯¹è±¡æ—¶å®ç°ç»§æ‰¿ï¼Œå†æ¬¡å¯¹åŸå‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•è¿›è¡Œæ›´æ”¹æ—¶ï¼Œä¸ä¼šå½±å“åˆ°å®ä¾‹å¯¹è±¡åŸæœ‰çš„ç»§æ‰¿ã€‚

```js
let f = function () {
  this.a = 1;
  this.b = 2;
}
let o = new f(); // {a: 1, b: 2}
// å¯¹åŸå‹çš„å±æ€§è¿›è¡Œäº†æ›´æ”¹
f.prototype.b = 3;
f.prototype.c = 4;
console.log(o.a); // 1
console.log(o.b); // 2 ==ã€‹ä¸ä¼šå½±å“åˆ°åŸæœ‰ç»§æ‰¿
console.log(o.c); // 4 ==ã€‹å½“å‰å®ä¾‹ä¸­æ²¡æœ‰è¯¥å±æ€§ï¼Œå–åŸå‹ä¸­æŸ¥æ‰¾
console.log(o.d); // undefined ==ã€‹ åŸå‹ä¸­ä¹Ÿæ²¡æœ‰ï¼Œè¿”å›undefined
```

ä½†æ˜¯å¤šä¸ªå®ä¾‹å¯¹è±¡å®ç°åŸå‹é“¾ç»§æ‰¿æ—¶ï¼Œéƒ½å…¶ä¸­ä¸€ä¸ªå®ä¾‹æ›´æ”¹å±æ€§ï¼Œä¼šå½±å“åˆ°å…¶ä»–å®ä¾‹ã€‚--ã€‹å³å½“ç»§æ‰¿çš„å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œ[this](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/this) æŒ‡å‘çš„æ˜¯å½“å‰ç»§æ‰¿çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ç»§æ‰¿çš„å‡½æ•°æ‰€åœ¨çš„åŸå‹å¯¹è±¡ã€‚

```js
function Parent() {
  this.name = 'parent1';
  this.play = [1, 2, 3]
}
function Child() {
  this.type = 'child2';
}
Child1.prototype = new Parent();
console.log(new Child())
```

ä¸Šé¢ä»£ç çœ‹ä¼¼æ²¡é—®é¢˜ï¼Œå®é™…å­˜åœ¨æ½œåœ¨é—®é¢˜

```js
  var s1 = new Child2();
  var s2 = new Child2();
  s1.play.push(4);
  console.log(s1.play, s2.play); // [1,2,3,4]
```

æ”¹å˜`s1`çš„`play`å±æ€§ï¼Œä¼šå‘ç°`s2`ä¹Ÿè·Ÿç€å‘ç”Ÿå˜åŒ–äº†ï¼Œè¿™æ˜¯å› ä¸ºä¸¤ä¸ªå®ä¾‹ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªåŸå‹å¯¹è±¡ï¼Œå†…å­˜ç©ºé—´æ˜¯å…±äº«ã€‚

### 2. æ„é€ å‡½æ•°ç»§æ‰¿ï¼ˆä¸å•ç‹¬ä½¿ç”¨ï¼‰

åœ¨**å­ç±»æ„é€ å‡½æ•°**ä¸­è°ƒç”¨**çˆ¶ç±»æ„é€ å‡½æ•°**ã€‚ä½¿ç”¨ `apply()`å’Œ`call()`æ–¹æ³•ä»¥**æ–°åˆ›å»ºçš„å¯¹è±¡**ä¸ºä¸Šä¸‹æ–‡æ‰§è¡Œæ„é€ å‡½æ•°ã€‚

```js
function Parent(){
    this.name = 'parent1';
}

Parent.prototype.getName = function () {
    return this.name;
}

function Child(){
    Parent1.call(this);
    this.type = 'child'
}

let child = new Child();
console.log(child);  // æ²¡é—®é¢˜
console.log(child.getName());  // ä¼šæŠ¥é”™
```

åªèƒ½ç»§æ‰¿çˆ¶ç±»çš„å®ä¾‹å±æ€§å’Œæ–¹æ³•ï¼Œä¸èƒ½ç»§æ‰¿åŸå‹å±æ€§æˆ–è€…æ–¹æ³•ã€‚

```js
function SuperType() {
    this.colors = ['red', 'blue', 'green'];
}
function SubType() {
    // ç»§æ‰¿ SuperType
    SuperType.call(this);
}
const instance1 = new SubType();
instance1.colors.push('black');
console.log(instance1.colors); // [ 'red', 'blue', 'green', 'black' ]

const instance2 = new SubType();
console.log(instance2.colors); // [ 'red', 'blue', 'green' ]
```

å®ä¾‹ä¹‹é—´ä¸äº’ç›¸å½±å“ï¼Œå› ä¸º`SubType`å­ç±»è°ƒç”¨callä»…å¯¹çˆ¶å‡½æ•°å¤åˆ¶äº†åˆå§‹åŒ–ä»£ç ï¼Œæ¯ä¸€ä¸ªå®ä¾‹éƒ½æ˜¯ä¸€ä¸ªæ–°çš„ã€‚

```js
function SuperType(name) {
    this.name = name;
}
function SubType() {
    // ç»§æ‰¿ SuperType å¹¶ä¼ å‚
    SuperType.call(this, 'Nicholas');
    // å®ä¾‹å±æ€§
    this.age = 29;
}
const usr = new SubType();
console.log(usr.name, usr.age); // Nicholas 29
```

ç›¸æ¯”äºä½¿ç”¨**åŸå‹é“¾**ï¼Œ**æ„é€ å‡½æ•°ç»§æ‰¿**çš„ä¸€ä¸ªä¼˜ç‚¹å°±æ˜¯**å¯ä»¥åœ¨å­ç±»æ„é€ å‡½æ•°ä¸­å‘çˆ¶ç±»æ„é€ å‡½æ•°ä¼ å‚**ã€‚

å°ç»“ï¼š

- å¯å‘çˆ¶ç±»æ„é€ å‡½æ•°ä¼ å‚
- å®ä¾‹ä¹‹é—´ä¸å½±å“
- ä¸èƒ½è®¿é—®çˆ¶ç±»åŸå‹ä¸Šçš„æ–¹æ³•

### 3. ç»„åˆç»§æ‰¿ 

**ç»„åˆç»§æ‰¿**ï¼Œæœ‰æ—¶å€™ä¹Ÿå«**ä¼ªç»å…¸ç»§æ‰¿**ï¼Œç»¼åˆäº†**åŸå‹é“¾**å’Œ**ç›—ç”¨æ„é€ å‡½æ•°**ï¼Œå°†ä¸¤è€…çš„ä¼˜ç‚¹é›†ä¸­äº†èµ·æ¥ã€‚ä½¿ç”¨**åŸå‹é“¾ç»§æ‰¿åŸå‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•**ï¼Œè€Œé€šè¿‡**ç›—ç”¨æ„é€ å‡½æ•°ç»§æ‰¿å®ä¾‹å±æ€§**ã€‚è¿™æ ·æ—¢å¯ä»¥æŠŠæ–¹æ³•å®šä¹‰åœ¨åŸå‹ä¸Šä»¥å®ç°é‡ç”¨ï¼Œåˆå¯ä»¥è®©æ¯ä¸ªå®ä¾‹éƒ½æœ‰è‡ªå·±çš„å±æ€§ã€‚

```javascript
function SuperType(name) {
    this.name = name;
    this.colors = ['red', 'blue', 'green'];
}
SuperType.prototype.sayName = function () {
    console.log(this.name);
};

function SubType(name, age) {
    // ç»§æ‰¿å±æ€§
    SuperType.call(this, name);
    this.age = age;
}
// ç»§æ‰¿æ–¹æ³•
SubType.prototype = new SuperType();
SubType.prototype.sayAge = function () {
    console.log(this.age);
};

const usr1 = new SubType('Nicholas', 29);
usr1.colors.push('black');
console.log(usr1.colors); // [ 'red', 'blue', 'green', 'black' ]
usr1.sayName(); // Nicholas
usr1.sayAge(); // 29

const usr2 = new SubType('Greg', 27);
console.log(usr2.colors); // [ 'red', 'blue', 'green' ]
usr2.sayName(); // Greg
usr2.sayAge(); // 27
```

**ç»„åˆç»§æ‰¿**å¼¥è¡¥äº†**åŸå‹é“¾**å’Œ**ç›—ç”¨æ„é€ å‡½æ•°**çš„ä¸è¶³ï¼Œæ˜¯ JavaScript ä¸­ä½¿ç”¨æœ€å¤šçš„ç»§æ‰¿æ¨¡å¼ã€‚è€Œä¸”ç»„åˆç»§æ‰¿ä¹Ÿä¿ç•™äº†`instanceof`æ“ä½œç¬¦å’Œ`isPrototypeOf()`æ–¹æ³•**è¯†åˆ«åˆæˆå¯¹è±¡**çš„èƒ½åŠ›ã€‚